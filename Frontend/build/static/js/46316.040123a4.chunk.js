"use strict";(self.webpackChunknorthwind=self.webpackChunknorthwind||[]).push([[46316],{82218:(t,e,r)=>{r.d(e,{B:()=>b,a:()=>v,b:()=>X,c:()=>y,d:()=>V,e:()=>W,f:()=>_,g:()=>T,h:()=>E,i:()=>U,n:()=>B,r:()=>N,t:()=>j,u:()=>M});r(93169);var i=r(32718),s=r(16889),n=r(21530),o=r(29134),a=r(7025),c=r(32035),l=r(12400),h=r(14320),f=r(85981),u=r(55652),g=r(40885),d=r(40927),p=r(51378);const m=()=>i.Z.getLogger("esri.views.3d.support.geometryUtils.boundedPlane");const b=class{constructor(){this.plane=(0,u.Ue)(),this.origin=(0,l.Ue)(),this.basis1=(0,l.Ue)(),this.basis2=(0,l.Ue)()}};function v(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S;return{plane:(0,u.Ue)(t.plane),origin:(0,l.d9)(t.origin),basis1:(0,l.d9)(t.basis1),basis2:(0,l.d9)(t.basis2)}}function y(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:v();return _(t.origin,t.basis1,t.basis2,e)}function _(t,e,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:v();return(0,c.c)(i.origin,t),(0,c.c)(i.basis1,e),(0,c.c)(i.basis2,r),M(i),function(t,e){Math.abs((0,c.m)(t.basis1,t.basis2)/((0,c.l)(t.basis1)*(0,c.l)(t.basis2)))>1e-6&&m().warn(e,"Provided basis vectors are not perpendicular"),Math.abs((0,c.m)(t.basis1,B(t)))>1e-6&&m().warn(e,"Basis vectors and plane normal are not perpendicular"),Math.abs(-(0,c.m)(B(t),t.origin)-t.plane[3])>1e-6&&m().warn(e,"Plane offset is not consistent with plane origin")}(i,"fromValues()"),i}function M(t){(0,u.my)(t.basis2,t.basis1,t.origin,t.plane)}function O(t,e,r){t!==r&&y(t,r);const i=(0,c.j)(p.WM.get(),B(t),e);return(0,c.g)(r.origin,r.origin,i),r.plane[3]-=e,r}function T(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:v();const r=(t[2]-t[0])/2,i=(t[3]-t[1])/2;return(0,c.s)(e.origin,t[0]+r,t[1]+i,0),(0,c.s)(e.basis1,r,0,0),(0,c.s)(e.basis2,0,i,0),(0,u.al)(0,0,1,0,e.plane),e}function U(t,e,r){return!!(0,u.BR)(t.plane,e,r)&&J(t,r)}function L(t,e,r){const i=C.get();q(t,e,i,C.get());let n=Number.POSITIVE_INFINITY;for(const o of Z){const a=P(t,o,k.get()),l=p.WM.get();if((0,u.rx)(i,a,l)){const t=(0,c.E)(p.WM.get(),e.origin,l),i=Math.abs((0,s.ZF)((0,c.m)(e.direction,t)));i<n&&(n=i,(0,c.c)(r,l))}}return n===Number.POSITIVE_INFINITY?I(t,e,r):r}function I(t,e,r){if(U(t,e,r))return r;const i=C.get(),s=C.get();q(t,e,i,s);let n=Number.POSITIVE_INFINITY;for(const o of Z){const a=P(t,o,k.get()),l=p.WM.get();if((0,u.dZ)(i,a,l)){const t=(0,g.Jk)(e,l);if(!(0,u.Ac)(s,l))continue;t<n&&(n=t,(0,c.c)(r,l))}}return w(t,e.origin)<n&&x(t,e.origin,r),r}function x(t,e,r){const i=(0,u.nF)(t.plane,e,p.WM.get()),s=(0,f.ct)(G(t,t.basis1),i,-1,1,p.WM.get()),n=(0,f.ct)(G(t,t.basis2),i,-1,1,p.WM.get());return(0,c.f)(r,(0,c.g)(p.WM.get(),s,n),t.origin),r}function A(t,e,r){const{origin:i,basis1:s,basis2:n}=t,o=(0,c.f)(p.WM.get(),e,i),a=(0,d.SR)(s,o),l=(0,d.SR)(n,o),h=(0,d.SR)(B(t),o);return(0,c.s)(r,a,l,h)}function w(t,e){const r=A(t,e,p.WM.get()),{basis1:i,basis2:s}=t,n=(0,c.l)(i),o=(0,c.l)(s),a=Math.max(Math.abs(r[0])-n,0),l=Math.max(Math.abs(r[1])-o,0),h=r[2];return a*a+l*l+h*h}function E(t,e){return Math.sqrt(w(t,e))}function W(t,e){return(0,u.Ac)(t.plane,e)&&J(t,e)}function R(t,e){const r=-t.plane[3];return(0,d.SR)(B(t),e)-r}function V(t,e){return(0,c.e)(t.basis1,e.basis1)&&(0,c.e)(t.basis2,e.basis2)&&(0,c.e)(t.origin,e.origin)}function j(t,e,r){return t!==r&&y(t,r),(0,o.U_)(z,e),(0,o.p4)(z,z),(0,c.h)(r.basis1,t.basis1,z),(0,c.h)(r.basis2,t.basis2,z),(0,c.h)((0,u.st)(r.plane),(0,u.st)(t.plane),z),(0,c.h)(r.origin,t.origin,e),(0,u.T5)(r.plane,r.plane,r.origin),r}function N(t,e,r,i){return t!==i&&y(t,i),(0,o.Us)(F,e,r),(0,c.h)(i.basis1,t.basis1,F),(0,c.h)(i.basis2,t.basis2,F),M(i),i}function B(t){return(0,u.st)(t.plane)}function J(t,e){const r=(0,c.f)(p.WM.get(),e,t.origin),i=(0,c.q)(t.basis1),s=(0,c.q)(t.basis2),n=(0,c.m)(t.basis1,r),o=(0,c.m)(t.basis2,r);return-n-i<0&&n-i<0&&-o-s<0&&o-s<0}function G(t,e){const r=k.get();return(0,c.c)(r.origin,t.origin),(0,c.c)(r.vector,e),r}function P(t,e,r){const{basis1:i,basis2:s,origin:n}=t,o=(0,c.j)(p.WM.get(),i,e.origin[0]),a=(0,c.j)(p.WM.get(),s,e.origin[1]);(0,c.g)(r.origin,o,a),(0,c.g)(r.origin,r.origin,n);const l=(0,c.j)(p.WM.get(),i,e.direction[0]),h=(0,c.j)(p.WM.get(),s,e.direction[1]);return(0,c.j)(r.vector,(0,c.g)(l,l,h),2),r}function q(t,e,r,i){const s=B(t);(0,u.my)(s,e.direction,e.origin,r),(0,u.my)((0,u.st)(r),s,e.origin,i)}const S={plane:(0,u.Ue)(),origin:(0,l.al)(0,0,0),basis1:(0,l.al)(1,0,0),basis2:(0,l.al)(0,1,0)},C=new n.x(u.Ue),k=new n.x(f.Ue),D=(0,l.Ue)(),Y=new n.x((()=>v())),Z=[{origin:[-1,-1],direction:[1,0]},{origin:[1,-1],direction:[0,1]},{origin:[1,1],direction:[-1,0]},{origin:[-1,1],direction:[0,-1]}],z=(0,a.Ue)(),F=(0,a.Ue)(),X=Object.freeze(Object.defineProperty({__proto__:null,BoundedPlaneClass:b,altitudeAt:R,axisAt:function(t,e,r,i){return function(t,e,r){switch(e){case h.R.X:(0,c.c)(r,t.basis1),(0,c.n)(r,r);break;case h.R.Y:(0,c.c)(r,t.basis2),(0,c.n)(r,r);break;case h.R.Z:(0,c.c)(r,B(t))}return r}(t,r,i)},closestPoint:I,closestPointOnSilhouette:L,copy:y,copyWithoutVerify:function(t,e){(0,c.c)(e.origin,t.origin),(0,c.c)(e.basis1,t.basis1),(0,c.c)(e.basis2,t.basis2),(0,u.JG)(e.plane,t.plane)},create:v,distance:E,distance2:w,distanceToSilhouette:function(t,e){let r=Number.NEGATIVE_INFINITY;for(const i of Z){const s=P(t,i,k.get()),n=(0,f.Jk)(s,e);n>r&&(r=n)}return Math.sqrt(r)},elevate:O,equals:V,extrusionContainsPoint:W,fromAABoundingRect:T,fromValues:_,intersectRay:U,intersectRayClosestSilhouette:function(t,e,r){if(U(t,e,r))return r;const i=L(t,e,p.WM.get());return(0,c.g)(r,e.origin,(0,c.j)(p.WM.get(),e.direction,(0,c.p)(e.origin,i)/(0,c.l)(e.direction))),r},normal:B,projectPoint:x,projectPointLocal:A,rotate:N,setAltitudeAt:function(t,e,r,i){const s=R(t,e),n=(0,c.j)(D,B(t),r-s);return(0,c.g)(i,e,n),i},setExtent:function(t,e,r){return T(e,r),O(r,R(t,t.origin),r),r},transform:j,up:S,updateUnboundedPlane:M,wrap:function(t,e,r){const i=Y.get();return i.origin=t,i.basis1=e,i.basis2=r,i.plane=(0,u.re)(0,0,0,0),M(i),i}},Symbol.toStringTag,{value:"Module"}))},85981:(t,e,r)=>{r.d(e,{AR:()=>v,Gr:()=>b,JG:()=>h,Jk:()=>g,KU:()=>p,Ue:()=>c,al:()=>f,ct:()=>m,nF:()=>d,re:()=>l,zk:()=>u});var i=r(16889),s=r(21530),n=r(32035),o=r(12400),a=r(51378);function c(t){return t?{origin:(0,o.d9)(t.origin),vector:(0,o.d9)(t.vector)}:{origin:(0,o.Ue)(),vector:(0,o.Ue)()}}function l(t,e){const r=M.get();return r.origin=t,r.vector=e,r}function h(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c();return f(t.origin,t.vector,e)}function f(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c();return(0,n.c)(r.origin,t),(0,n.c)(r.vector,e),r}function u(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c();return(0,n.c)(r.origin,t),(0,n.f)(r.vector,e,t),r}function g(t,e){const r=(0,n.f)(a.WM.get(),e,t.origin),s=(0,n.m)(t.vector,r),o=(0,n.m)(t.vector,t.vector),c=(0,i.uZ)(s/o,0,1),l=(0,n.f)(a.WM.get(),(0,n.j)(a.WM.get(),t.vector,c),r);return(0,n.m)(l,l)}function d(t,e,r){return m(t,e,0,1,r)}function p(t,e,r){return(0,n.g)(r,t.origin,(0,n.j)(r,t.vector,e))}function m(t,e,r,s,o){const{vector:c,origin:l}=t,h=(0,n.f)(a.WM.get(),e,l),f=(0,n.m)(c,h)/(0,n.q)(c);return(0,n.j)(o,c,(0,i.uZ)(f,r,s)),(0,n.g)(o,o,t.origin)}function b(t,e){if(y(t,l(e.origin,e.direction),!1,_)){const{tA:e,pB:r,distance2:i}=_;if(e>=0&&e<=1)return i;if(e<0)return(0,n.a)(t.origin,r);if(e>1)return(0,n.a)((0,n.g)(a.WM.get(),t.origin,t.vector),r)}return null}function v(t,e,r){return!!y(t,e,!0,_)&&((0,n.c)(r,_.pA),!0)}function y(t,e,r,s){const o=1e-6,c=t.origin,l=(0,n.g)(a.WM.get(),c,t.vector),h=e.origin,f=(0,n.g)(a.WM.get(),h,e.vector),u=a.WM.get(),g=a.WM.get();if(u[0]=c[0]-h[0],u[1]=c[1]-h[1],u[2]=c[2]-h[2],g[0]=f[0]-h[0],g[1]=f[1]-h[1],g[2]=f[2]-h[2],Math.abs(g[0])<o&&Math.abs(g[1])<o&&Math.abs(g[2])<o)return!1;const d=a.WM.get();if(d[0]=l[0]-c[0],d[1]=l[1]-c[1],d[2]=l[2]-c[2],Math.abs(d[0])<o&&Math.abs(d[1])<o&&Math.abs(d[2])<o)return!1;const p=u[0]*g[0]+u[1]*g[1]+u[2]*g[2],m=g[0]*d[0]+g[1]*d[1]+g[2]*d[2],b=u[0]*d[0]+u[1]*d[1]+u[2]*d[2],v=g[0]*g[0]+g[1]*g[1]+g[2]*g[2],y=(d[0]*d[0]+d[1]*d[1]+d[2]*d[2])*v-m*m;if(Math.abs(y)<o)return!1;let _=(p*m-b*v)/y,M=(p+m*_)/v;r&&(_=(0,i.uZ)(_,0,1),M=(0,i.uZ)(M,0,1));const O=a.WM.get(),T=a.WM.get();return O[0]=c[0]+_*d[0],O[1]=c[1]+_*d[1],O[2]=c[2]+_*d[2],T[0]=h[0]+M*g[0],T[1]=h[1]+M*g[1],T[2]=h[2]+M*g[2],s.tA=_,s.tB=M,s.pA=O,s.pB=T,s.distance2=(0,n.a)(O,T),!0}const _={tA:0,tB:0,pA:(0,o.Ue)(),pB:(0,o.Ue)(),distance2:0},M=new s.x((()=>c()))},81020:(t,e,r)=>{function i(t){return"point"===t.type}r.d(e,{f:()=>i})},77648:(t,e,r)=>{r.d(e,{Fb:()=>n,KO:()=>o,sb:()=>s});var i=r(81020);class s{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.array=t,this.spatialReference=e,this.offset=r}}function n(t){return"array"in t}function o(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"ground";if((0,i.f)(e))return t.getElevation(e.x,e.y,e.z||0,e.spatialReference,r);if(n(e)){var s;let i=e.offset;return t.getElevation(e.array[i++],e.array[i++],e.array[i]||0,null!==(s=e.spatialReference)&&void 0!==s?s:t.spatialReference,r)}return t.getElevation(e[0],e[1],e[2]||0,t.spatialReference,r)}},88153:(t,e,r)=>{r.d(e,{LP:()=>O,Z8:()=>v,jb:()=>p});var i=r(29134),s=r(7025),n=r(32035),o=r(12400),a=r(19093),c=r(86361),l=r(40885),h=r(50951),f=r(54463),u=r(55848),g=r(22178),d=r(76783);const p=1e-5;class m{constructor(t){this.options=new f.om,this._results=new y,this.transform=new d.yn,this.tolerance=p,this.verticalOffset=null,this._ray=(0,l.Ue)(),this._rayEnd=(0,o.Ue)(),this._rayBeginTransformed=(0,o.Ue)(),this._rayEndTransformed=(0,o.Ue)(),this.viewingMode=null!==t&&void 0!==t?t:h.JY.Global}get results(){return this._results}get ray(){return this._ray}get rayBegin(){return this._ray.origin}get rayEnd(){return this._rayEnd}reset(t,e,r){this.resetWithRay((0,l.zk)(t,e,this._ray),r)}resetWithRay(t,e){this.camera=e,t!==this._ray&&(0,l.JG)(t,this._ray),0!==this.options.verticalOffset?this.viewingMode===h.JY.Local?this._ray.origin[2]-=this.options.verticalOffset:this.verticalOffset=this.options.verticalOffset:this.verticalOffset=null,(0,n.g)(this._rayEnd,this._ray.origin,this._ray.direction),this._results.init(this._ray)}intersect(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0;this.point=e,this.filterPredicate=i,this.tolerance=null!==r&&void 0!==r?r:p;const n=(0,d.W9)(this.verticalOffset);if(t&&t.length>0){const e=s?t=>{s(t)&&this.intersectObject(t)}:t=>{this.intersectObject(t)};for(const r of t){var o;const t=null===(o=r.getSpatialQueryAccelerator)||void 0===o?void 0:o.call(r);null!=t?(null!=n?t.forEachAlongRayWithVerticalOffset(this._ray.origin,this._ray.direction,e,n):t.forEachAlongRay(this._ray.origin,this._ray.direction,e),this.options.selectionMode&&this.options.hud&&t.forEachDegenerateObject(e)):r.objects.forAll((t=>e(t)))}}this.sortResults()}intersectObject(t){const e=t.geometries;if(!e)return;const r=t.effectiveTransformation,i=(0,d.W9)(this.verticalOffset);for(const o of e){if(!o.visible)continue;const{material:e,id:a}=o;this.transform.setAndInvalidateLazyTransforms(r,o.transformation),(0,n.h)(this._rayBeginTransformed,this.rayBegin,this.transform.inverse),(0,n.h)(this._rayEndTransformed,this.rayEnd,this.transform.inverse);const c=this.transform.transform;null!=i&&(i.objectTransform=this.transform),e.intersect(o,this.transform.transform,this,this._rayBeginTransformed,this._rayEndTransformed,((e,r,i,n,o,l)=>{if(e>=0){if(null!=this.filterPredicate&&!this.filterPredicate(this._ray.origin,this._rayEnd,e))return;const h=n?this._results.hud:this._results,g=n?n=>{const c=new u.RA(t,a,i,l);n.set(f.q7.HUD,c,e,r,s.Wd,o)}:s=>s.set(f.q7.OBJECT,{object:t,geometryId:a,triangleNr:i},e,r,c,o);if((null==h.min.drapedLayerOrder||o>=h.min.drapedLayerOrder)&&(null==h.min.dist||e<h.min.dist)&&g(h.min),this.options.store!==f.eC.MIN&&(null==h.max.drapedLayerOrder||o<h.max.drapedLayerOrder)&&(null==h.max.dist||e>h.max.dist)&&g(h.max),this.options.store===f.eC.ALL)if(n){const t=new M(this._ray);g(t),this._results.hud.all.push(t)}else{const t=new _(this._ray);g(t),this._results.all.push(t)}}}))}}sortResults(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._results.all).sort(((t,e)=>{var r,i;return t.dist!==e.dist?(null!==(r=t.dist)&&void 0!==r?r:0)-(null!==(i=e.dist)&&void 0!==i?i:0):t.drapedLayerOrder!==e.drapedLayerOrder?b(t.drapedLayerOrder,e.drapedLayerOrder):b(t.drapedLayerGraphicOrder,e.drapedLayerGraphicOrder)}))}}function b(t,e){return(null!==e&&void 0!==e?e:-Number.MAX_VALUE)-(null!==t&&void 0!==t?t:-Number.MAX_VALUE)}function v(t){return new m(t)}class y{constructor(){this.min=new _((0,l.Ue)()),this.max=new _((0,l.Ue)()),this.hud={min:new M((0,l.Ue)()),max:new M((0,l.Ue)()),all:new Array},this.ground=new _((0,l.Ue)()),this.all=[]}init(t){this.min.init(t),this.max.init(t),this.ground.init(t),this.all.length=0,this.hud.min.init(t),this.hud.max.init(t),this.hud.all.length=0}}class _{get ray(){return this._ray}get distanceInRenderSpace(){return null!=this.dist?((0,n.j)(T,this.ray.direction,this.dist),(0,n.l)(T)):null}getIntersectionPoint(t){return!!(0,g.nn)(this)&&((0,n.j)(T,this.ray.direction,this.dist),(0,n.g)(t,this.ray.origin,T),!0)}getTransformedNormal(t){return(0,n.c)(U,this.normal),U[3]=0,(0,a.t)(U,U,this.transformation),(0,n.c)(t,U),(0,n.n)(t,t)}constructor(t){this.intersector=f.q7.OBJECT,this.normal=(0,o.Ue)(),this.transformation=(0,s.Ue)(),this._ray=(0,l.Ue)(),this.init(t)}init(t){this.dist=null,this.target=null,this.drapedLayerOrder=null,this.drapedLayerGraphicOrder=null,this.intersector=f.q7.OBJECT,(0,l.JG)(t,this._ray)}set(t,e,r,a,c,l,h){this.intersector=t,this.dist=r,(0,n.c)(this.normal,null!==a&&void 0!==a?a:o.eG),(0,i.JG)(this.transformation,null!==c&&void 0!==c?c:s.Wd),this.target=e,this.drapedLayerOrder=l,this.drapedLayerGraphicOrder=h}copy(t){(0,l.JG)(t.ray,this._ray),this.intersector=t.intersector,this.dist=t.dist,this.target=t.target,this.drapedLayerOrder=t.drapedLayerOrder,this.drapedLayerGraphicOrder=t.drapedLayerGraphicOrder,(0,n.c)(this.normal,t.normal),(0,i.JG)(this.transformation,t.transformation)}}class M extends _{constructor(){super(...arguments),this.intersector=f.q7.HUD}}function O(t){return new _(t)}const T=(0,o.Ue)(),U=(0,c.Ue)()},54463:(t,e,r)=>{var i,s;r.d(e,{eC:()=>s,om:()=>n,q7:()=>i}),function(t){t[t.OBJECT=0]="OBJECT",t[t.HUD=1]="HUD",t[t.TERRAIN=2]="TERRAIN",t[t.OVERLAY=3]="OVERLAY",t[t.I3S=4]="I3S",t[t.PCL=5]="PCL",t[t.LOD=6]="LOD",t[t.VOXEL=7]="VOXEL",t[t.TILES3D=8]="TILES3D"}(i||(i={}));class n{constructor(){this.verticalOffset=0,this.selectionMode=!1,this.hud=!0,this.selectOpaqueTerrainOnly=!0,this.invisibleTerrain=!1,this.backfacesTerrain=!0,this.isFiltered=!1,this.filteredLayerUids=[],this.store=s.ALL,this.normalRequired=!0}}!function(t){t[t.MIN=0]="MIN",t[t.MINMAX=1]="MINMAX",t[t.ALL=2]="ALL"}(s||(s={}))},55848:(t,e,r)=>{r.d(e,{Dx:()=>a,RA:()=>n,Zh:()=>o});var i=r(12400);class s{constructor(t,e,r){this.object=t,this.geometryId=e,this.triangleNr=r}}class n extends s{constructor(t,e,r,s){super(t,e,r),this.center=null!=s?(0,i.d9)(s):null}}class o{constructor(t){this.layerUid=t}}class a extends o{constructor(t,e){super(t),this.graphicUid=e}}},22178:(t,e,r)=>{r.d(e,{G1:()=>h,e4:()=>c,es:()=>l,nn:()=>a});var i=r(32035),s=r(12400),n=r(82218),o=r(54463);function a(t){return null!=(null===t||void 0===t?void 0:t.dist)}function c(t){return(e,r,s)=>((0,i.o)(f,e,r,s),!(0,n.e)(t,f))}function l(t){return a(t)&&t.intersector===o.q7.OBJECT&&!!t.target}function h(t){return a(t)&&t.intersector===o.q7.HUD&&!!t.target&&"center"in t.target&&null!=t.target.center}const f=(0,s.Ue)()},76783:(t,e,r)=>{r.d(e,{W9:()=>p,iO:()=>b,lV:()=>y,xX:()=>_,yn:()=>u});var i=r(29303),s=r(21389),n=r(29134),o=r(7025),a=r(32035),c=r(12400),l=r(23470),h=r(50951),f=r(89414);class u{constructor(){this._transform=(0,o.Ue)(),this._transformInverse=new g({value:this._transform},n.U_,o.Ue),this._transformInverseTranspose=new g(this._transformInverse,n.p4,o.Ue),this._transformTranspose=new g({value:this._transform},n.p4,o.Ue),this._transformInverseRotation=new g({value:this._transform},i.f6,s.Ue)}_invalidateLazyTransforms(){this._transformInverse.invalidate(),this._transformInverseTranspose.invalidate(),this._transformTranspose.invalidate(),this._transformInverseRotation.invalidate()}get transform(){return this._transform}get inverse(){return this._transformInverse.value}get inverseTranspose(){return this._transformInverseTranspose.value}get inverseRotation(){return this._transformInverseRotation.value}get transpose(){return this._transformTranspose.value}setTransformMatrix(t){(0,n.JG)(this._transform,t)}multiplyTransform(t){(0,n.Jp)(this._transform,this._transform,t)}set(t){(0,n.JG)(this._transform,t),this._invalidateLazyTransforms()}setAndInvalidateLazyTransforms(t,e){this.setTransformMatrix(t),this.multiplyTransform(e),this._invalidateLazyTransforms()}}class g{constructor(t,e,r){this._original=t,this._update=e,this._dirty=!0,this._transform=r()}invalidate(){this._dirty=!0}get value(){return this._dirty&&(this._update(this._transform,this._original.value),this._dirty=!1),this._transform}}const d=new class{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.offset=t,this.sphere=(0,l.c)(),this.tmpVertex=(0,c.Ue)()}applyToVertex(t,e,r){const i=this.objectTransform.transform,s=(0,a.s)(M,t,e,r),n=(0,a.h)(s,s,i),o=this.offset/(0,a.l)(n);(0,a.r)(n,n,n,o);const c=this.objectTransform.inverse;return(0,a.h)(this.tmpVertex,n,c),this.tmpVertex}applyToMinMax(t,e){const r=this.offset/(0,a.l)(t);(0,a.r)(t,t,t,r);const i=this.offset/(0,a.l)(e);(0,a.r)(e,e,e,i)}applyToAabb(t){const e=this.offset/Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]+=t[0]*e,t[1]+=t[1]*e,t[2]+=t[2]*e;const r=this.offset/Math.sqrt(t[3]*t[3]+t[4]*t[4]+t[5]*t[5]);return t[3]+=t[3]*r,t[4]+=t[4]*r,t[5]+=t[5]*r,t}applyToBoundingSphere(t){const e=(0,a.l)((0,l.g)(t)),r=this.offset/e;return(0,a.r)((0,l.g)(this.sphere),(0,l.g)(t),(0,l.g)(t),r),this.sphere[3]=t[3]+t[3]*this.offset/e,this.sphere}};function p(t){return null!=t?(d.offset=t,d):null}const m=new class{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.componentLocalOriginLength=0,this._totalOffset=0,this._offset=0,this._tmpVertex=(0,c.Ue)(),this._tmpMbs=(0,l.c)(),this._tmpObb=new f.Oo,this._resetOffset(t)}_resetOffset(t){this._offset=t,this._totalOffset=t}set offset(t){this._resetOffset(t)}get offset(){return this._offset}set componentOffset(t){this._totalOffset=this._offset+t}set localOrigin(t){this.componentLocalOriginLength=(0,a.l)(t)}applyToVertex(t,e,r){const i=(0,a.s)(M,t,e,r),s=(0,a.s)(O,t,e,r+this.componentLocalOriginLength),n=this._totalOffset/(0,a.l)(s);return(0,a.r)(this._tmpVertex,i,s,n),this._tmpVertex}applyToAabb(t){const e=this.componentLocalOriginLength,r=t[0],i=t[1],s=t[2]+e,n=t[3],o=t[4],a=t[5]+e,c=Math.abs(r),l=Math.abs(i),h=Math.abs(s),f=Math.abs(n),u=Math.abs(o),g=Math.abs(a),d=.5*(1+Math.sign(r*n))*Math.min(c,f),p=.5*(1+Math.sign(i*o))*Math.min(l,u),m=.5*(1+Math.sign(s*a))*Math.min(h,g),b=Math.max(c,f),v=Math.max(l,u),y=Math.max(h,g),_=Math.sqrt(d*d+p*p+m*m),M=Math.sign(c+r),O=Math.sign(l+i),T=Math.sign(h+s),U=Math.sign(f+n),L=Math.sign(u+o),I=Math.sign(g+a),x=this._totalOffset;if(_<x)return t[0]-=(1-M)*x,t[1]-=(1-O)*x,t[2]-=(1-T)*x,t[3]+=U*x,t[4]+=L*x,t[5]+=I*x,t;const A=x/Math.sqrt(b*b+v*v+y*y),w=x/_,E=w-A,W=-E;return t[0]+=r*(M*W+w),t[1]+=i*(O*W+w),t[2]+=s*(T*W+w),t[3]+=n*(U*E+A),t[4]+=o*(L*E+A),t[5]+=a*(I*E+A),t}applyToMbs(t){const e=(0,a.l)((0,l.g)(t)),r=this._totalOffset/e;return(0,a.r)((0,l.g)(this._tmpMbs),(0,l.g)(t),(0,l.g)(t),r),this._tmpMbs[3]=t[3]+t[3]*this._totalOffset/e,this._tmpMbs}applyToObb(t){return(0,f.gI)(t,this._totalOffset,this._totalOffset,h.JY.Global,this._tmpObb),this._tmpObb}};function b(t){return null!=t?(m.offset=t,m):null}const v=new class{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.offset=t,this.tmpVertex=(0,c.Ue)()}applyToVertex(t,e,r){const i=(0,a.s)(M,t,e,r),s=(0,a.g)(O,i,this.localOrigin),n=this.offset/(0,a.l)(s);return(0,a.r)(this.tmpVertex,i,s,n),this.tmpVertex}applyToAabb(t){const e=T,r=U,i=L;for(let a=0;a<3;++a)e[a]=t[0+a]+this.localOrigin[a],r[a]=t[3+a]+this.localOrigin[a],i[a]=e[a];const s=this.applyToVertex(e[0],e[1],e[2]);for(let a=0;a<3;++a)t[a]=s[a],t[a+3]=s[a];const n=e=>{const r=this.applyToVertex(e[0],e[1],e[2]);for(let i=0;i<3;++i)t[i]=Math.min(t[i],r[i]),t[i+3]=Math.max(t[i+3],r[i])};for(let a=1;a<8;++a){for(let t=0;t<3;++t)i[t]=a&1<<t?r[t]:e[t];n(i)}let o=0;for(let a=0;a<3;++a)e[a]*r[a]<0&&(o|=1<<a);if(0!==o&&7!==o)for(let a=0;a<8;++a)if(!(o&a)){for(let t=0;t<3;++t)i[t]=o&1<<t?0:a&1<<t?e[t]:r[t];n(i)}for(let a=0;a<3;++a)t[a]-=this.localOrigin[a],t[a+3]-=this.localOrigin[a];return t}};function y(t){return null!=t?(v.offset=t,v):null}const _="terrain",M=(0,c.Ue)(),O=(0,c.Ue)(),T=(0,c.Ue)(),U=(0,c.Ue)(),L=(0,c.Ue)()}}]);
//# sourceMappingURL=46316.040123a4.chunk.js.map