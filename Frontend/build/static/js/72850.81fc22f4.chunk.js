"use strict";(self.webpackChunknorthwind=self.webpackChunknorthwind||[]).push([[72850],{72850:(e,t,i)=>{i.r(t),i.d(t,{default:()=>ee});var n=i(27366),o=i(32718),s=i(94172),l=i(49861),a=(i(93169),i(84936),i(69912)),r=i(33565);const h="esri-daylight",d="".concat(h,"__container"),c="esri-slider",u={base:h,dayContainer:"".concat(d," ").concat(h,"__day-container"),dateContainer:"".concat(d," ").concat(h,"__date-container"),containerDisabled:"".concat(d,"--disabled"),slider:c,sliderShadowOff:"".concat(c,"--shadow-off"),sliderShadowOn:"".concat(c,"--shadow-on"),sliderAmPmOn:"".concat(c,"--ampm-on"),sliderDateOff:"".concat(c,"--date-off"),sliderDateOn:"".concat(c,"--date-on"),playPauseButton:"".concat(h,"__play-pause-button"),datePicker:"".concat(h,"__date-picker"),seasonPicker:"".concat(h,"__season-picker"),panelError:"".concat(h,"__panel--error"),sunLightingCheckbox:"".concat(h,"__sun-lighting-checkbox"),shadowsCheckbox:"".concat(h,"__shadows-checkbox")};var g,p,m=i(7138),f=i(42537),_=i(92026),y=i(99346),v=i(86710),b=i(85276),C=i(13086),T=i(12040),w=i(696);(p=g||(g={}))[p.NORTHERN=0]="NORTHERN",p[p.SOUTHERN=1]="SOUTHERN";const z={spring:{dayOfMonth:20,month:2},summer:{dayOfMonth:21,month:5},fall:{dayOfMonth:23,month:8},winter:{dayOfMonth:21,month:11}},O=["spring","summer","fall","winter"];function S(e,t,i){const n=D(t,i),{dayOfMonth:o,month:s}=z[n],l=new Date(e.getTime());return l.setMonth(s,o),l}function k(e,t){return D(function(e){const t=e.getTime(),i=S(e,"spring",g.NORTHERN).getTime(),n=S(e,"summer",g.NORTHERN).getTime(),o=S(e,"fall",g.NORTHERN).getTime(),s=S(e,"winter",g.NORTHERN).getTime();return t>=i&&t<n?"spring":t>=n&&t<o?"summer":t>=o&&t<s?"fall":"winter"}(e),t)}function D(e,t){return t===g.NORTHERN?e:function(e){const t=O.indexOf(e);return O[(t+2)%4]}(e)}var P=i(84908);let E=class extends P.Z{constructor(){super(...arguments),this.utcOffset=null,this.timezonePickerOpen=!1}};(0,n._)([(0,l.Cb)()],E.prototype,"utcOffset",void 0),(0,n._)([(0,l.Cb)()],E.prototype,"timezonePickerOpen",void 0),E=(0,n._)([(0,a.j)("esri.widgets.Daylight.support.SliderWithDropdownViewModel")],E);var M=i(80629);let L=class extends m.default{constructor(e){super(e),this.view=null,this.timeSliderViewModel=new E({min:0,max:1439,values:[0],labelFormatFunction:M.Ox,inputFormatFunction:M.Ox}),this.lightingUpdateInterval=200,this._oldLighting=null,this.playSpeedMultiplier=1,this._lastTime=null,this._sunrise=null,this._sunset=null,this._cachedLightingDateUTC=new Date(0),this._cachedDisplayUTCOffset=0,this._firstInteraction=!0,this._lastLightingUpdate=0,this._lightingUpdateHandle=null}initialize(){this.addHandles([(0,s.when)((()=>this.view),(e=>e.when((()=>this._updateLighting()))),s.initial),(0,s.watch)((()=>{const e=this._lighting;return"sun"===(null===e||void 0===e?void 0:e.type)?this._ensureValidDate(e):null}),(e=>this._scheduleLightingUpdate(e))),(0,s.on)((()=>this._lighting),"timezone-will-change",(e=>this._timezoneWillChange(e)),{onListenerAdd:()=>this._timezoneWillChange(null)}),(0,s.watch)((()=>{var e;return!0===(null===(e=this.view)||void 0===e?void 0:e.stationary)}),(()=>{(this.dayPlaying||this.yearPlaying)&&this._updateSunriseAndSunset()}),s.initial),(0,s.watch)((()=>{const e=this.timeSliderViewModel;return{vm:e,state:e.state,sliderPosition:this.timeSliderPosition}}),(e=>{let{vm:t,state:i,sliderPosition:n}=e;"ready"===i&&t.setValue(0,n)})),(0,s.watch)((()=>{var e;return null===(e=this.timeSliderViewModel)||void 0===e?void 0:e.utcOffset}),(e=>{null!=e&&(this.utcOffset=e)})),(0,s.watch)((()=>({utcOffset:this.utcOffset,sliderViewModel:this.timeSliderViewModel})),(e=>{let{utcOffset:t,sliderViewModel:i}=e;i&&(i.utcOffset=t)}),s.syncAndInitial),(0,s.watch)((()=>this.timeSliderViewModel.timezonePickerOpen),(()=>this.stopPlaying())),(0,s.watch)((()=>this.timeSliderViewModel.values),(e=>{var t;return this._setTimeSliderPosition(null!==(t=null===e||void 0===e?void 0:e[0])&&void 0!==t?t:0,{forceLightingUpdate:!1})}))])}destroy(){this._cancelLightingUpdate(),this.view=null}get isSupported(){return null==this.view||"3d"===this.view.type}get utcOffset(){return this._cachedDisplayUTCOffset}set utcOffset(e){e!==this.utcOffset&&null!=this._lighting&&"virtual"!==this._lighting.type&&(this._lighting.displayUTCOffset=e,this._updateLighting())}get localDate(){return(0,v.cH)(this._lightingDateDisplay)}set localDate(e){var t;null!==(t=this.view)&&void 0!==t&&t.ready?(0,v.qb)(e)&&e.getTime()!==this.localDate.getTime()&&(this._lightingDateDisplay=(0,v.y7)(this._lightingDateDisplay,e)):o.Z.getLogger(this).error("The localDate property cannot be set before the view and the widget are ready.")}get timeSliderPosition(){return function(e){return(0,v.Ni)(e,"minutes")}(this._lightingDateDisplay)}set timeSliderPosition(e){var t,i;null!==(t=this.view)&&void 0!==t&&t.ready&&"ready"===(null===(i=this.timeSliderViewModel)||void 0===i?void 0:i.state)?this._setTimeSliderPosition(e,{forceLightingUpdate:!0}):o.Z.getLogger(this).error("The timeSliderPosition property cannot be set before the view and the widget are ready.")}_setTimeSliderPosition(e,t){Math.abs(e-this.timeSliderPosition)<=1/60||(this.stopPlaying(),this._enableDirectShadowsIfFirstInteraction(),t.forceLightingUpdate&&(this._cancelLightingUpdate(),this._updateLighting()),this._lightingDateDisplay=function(e,t){return(0,v.cl)(e,t,"minutes")}(this._lightingDateDisplay,e))}_timezoneFromCamera(e,t){if(null==t||!e.cameraTrackingEnabled)return 0;const i=(0,w.dF)([t.longitude,t.latitude]);return null==i?0:Math.round(i.hours+i.minutes/60+i.seconds/3600)}get directShadowsEnabled(){var e,t;return null!==(e=null===(t=this._lighting)||void 0===t?void 0:t.directShadowsEnabled)&&void 0!==e&&e}set directShadowsEnabled(e){const t=this._lighting;t&&(t.directShadowsEnabled=e)}get sunLightingEnabled(){return"sun"===this._lightingType}set sunLightingEnabled(e){const t=this._environment;if(e===this._get("sunLightingEnabled")||null==t)return;const i=t.lighting,n=this._oldLighting;this._oldLighting=i;const o={directShadowsEnabled:i.directShadowsEnabled,cameraTrackingEnabled:i.cameraTrackingEnabled},s=e?"sun":"virtual";let l;l=null!=n&&n.type===s?n:e?new C.Z:new T.Z,l.set(o),t.lighting=l,e||(this.stopPlaying(),this.timeSliderViewModel.timezonePickerOpen=!1)}set playingState(e){this.playingState!==e&&(this._set("playingState",e),"none"!==e&&this.sunLightingEnabled&&(this._updateSunriseAndSunset(),this._lastTime=Date.now(),this._play(),this._enableDirectShadowsIfFirstInteraction()))}get dayPlaying(){return"day"===this.playingState}set dayPlaying(e){e?this.playingState="day":this.dayPlaying&&(this.playingState="none")}get yearPlaying(){return"year"===this.playingState}set yearPlaying(e){e?this.playingState="year":this.yearPlaying&&(this.playingState="none")}get currentSeason(){return k(this.localDate,this._currentHemisphere)}set currentSeason(e){this.stopPlaying();const t=D(e,this._currentHemisphere);this.localDate=S(this.localDate,t,g.NORTHERN)}get _currentHemisphere(){var e;const t=null===(e=this.view)||void 0===e||null===(e=e.camera)||void 0===e||null===(e=e.position)||void 0===e?void 0:e.latitude;return null==t||t>=0?g.NORTHERN:g.SOUTHERN}get _environment(){var e;return null===(e=this.view)||void 0===e?void 0:e.environment}get _lighting(){var e;return null===(e=this._environment)||void 0===e?void 0:e.lighting}get _lightingType(){var e;return null===(e=this._lighting)||void 0===e?void 0:e.type}get _lightingDateDisplay(){return(0,v.Nm)(this._cachedLightingDateUTC,this._cachedDisplayUTCOffset,"hours")}set _lightingDateDisplay(e){const t=this._lighting;if(null==t||!this.sunLightingEnabled||"virtual"===t.type||!(0,v.qb)(e))return;const i=this._ensureValidDate(t),n=(0,v.Nm)(e,-this._cachedDisplayUTCOffset,"hours");n.getTime()!==i.getTime()&&(t.date=n,this._updateLighting())}stopPlaying(){this.playingState="none"}toggleDayPlaying(){this.dayPlaying=!this.dayPlaying}toggleYearPlaying(){this.yearPlaying=!this.yearPlaying}toggleSunLightingEnabled(){this.stopPlaying(),this.sunLightingEnabled=!this.sunLightingEnabled}toggleDirectShadowsEnabled(){this.stopPlaying(),this.directShadowsEnabled=!this.directShadowsEnabled}onDateChange(e){this.dayPlaying=!1,this.localDate=e}_enableDirectShadowsIfFirstInteraction(){this._firstInteraction&&(this._firstInteraction=!1,this.directShadowsEnabled=!0)}_updateLighting(e){var t,i;const n=Date.now();this._lastLightingUpdate=n;const{view:o}=this,s=this._lighting;if(null==o||null==s||"virtual"===s.type)return;null!==(t=e)&&void 0!==t||(e=this._ensureValidDate(s));const l=s.displayUTCOffset,a=null!==l?l:this._timezoneFromCamera(s,null===(i=o.camera)||void 0===i?void 0:i.position);this._cachedLightingDateUTC.getTime()!==e.getTime()&&(this._cachedLightingDateUTC=new Date(e.getTime())),this._cachedDisplayUTCOffset!==a&&(this._cachedDisplayUTCOffset=a)}_timezoneWillChange(e){const t=this._lighting;if(null==t||"virtual"===t.type||!t.cameraTrackingEnabled)return;let i;if(e)i=e.timezoneOffset;else{if(null!=t.displayUTCOffset)return;i=C.Z.calculateTimezoneOffset(t.positionTimezoneInfo)}t.displayUTCOffset=i,this._scheduleLightingUpdate()}_scheduleLightingUpdate(e){if(e&&(this._lightingUpdateHandle=(0,_.hw)(this._lightingUpdateHandle),!(0,v.qb)(e)))return;if(this._lightingUpdateHandle)return;const t=Date.now()-this._lastLightingUpdate,i=this.lightingUpdateInterval-t;let n=null;const o=()=>{this._updateLighting(e),this._lightingUpdateHandle===n&&(this._lightingUpdateHandle=null)};if(i<=0)this._lightingUpdateHandle=n=(0,y.Os)(o);else{const e=setTimeout(o,i);this._lightingUpdateHandle=n=(0,f.kB)((()=>clearTimeout(e)))}}_cancelLightingUpdate(){this._lightingUpdateHandle=(0,_.hw)(this._lightingUpdateHandle)}_play(){const e=this._lighting;if(null==e||!this.sunLightingEnabled||"virtual"===e.type)return;const t=this._ensureValidDate(e);if(this.dayPlaying||this.yearPlaying){var i;const o=Date.now()-(null!==(i=this._lastTime)&&void 0!==i?i:0);if(this.dayPlaying){this._lastTime=Date.now();const i=function(e,t,i){const n=12e5,o=n/4,s=18e5,l=o/3*2,a=72e5;if(null==e||null==t||isNaN(e.getTime())&&isNaN(t.getTime()))return o;const r=i.getTime(),h=e.getTime(),d=t.getTime(),c=h-a/2,u=h+a/2,g=d-a/3*2,p=d+a/3;let m=o;return r>=c&&r<=u?m=r-c<=n?s-(r-c)/n*(s-l):u-r<=n/2?o-(u-r)/n*2*(o-l):l:r>=g&&r<=p?m=r-g<=n/2?o-(r-g)/n*2*(o-l):p-r<=n?s-(p-r)/n*(s-l):l:(r<h||r>d)&&(m=s),m}(this._sunrise,this._sunset,t)*this.playSpeedMultiplier/100*o;if(i>0){var n;let o=new Date(t.getTime()+i);const s=null!==(n=e.displayUTCOffset)&&void 0!==n?n:0;if(((o.getUTCHours()+s)%24+24)%24<((t.getUTCHours()+s)%24+24)%24){const e=864e5;o=new Date(t.getTime()+i-e)}e.date=o}}else if(o>1e3){this._lastTime=Date.now();const i=(t.getUTCMonth()+1)%12,n=new Date(t.getTime());n.setUTCMonth(i),e.date=n}requestAnimationFrame((()=>this._play()))}}_updateSunriseAndSunset(){var e;const t=this._lighting;if(null==t||"virtual"===t.type||!this.sunLightingEnabled)return;const i=null===(e=this.view)||void 0===e||null===(e=e.camera)||void 0===e?void 0:e.position;if(null==i)return;const{latitude:n,longitude:o}=i,{date:s,displayUTCOffset:l}=t,a=(0,M.LL)(s,n,o,null!==l&&void 0!==l?l:0);a&&(this._sunrise=new Date(a.sunrise),this._sunset=new Date(a.sunset))}_ensureValidDate(e){return(0,v.qb)(e.date)||(o.Z.getLogger(this).warn("Invalid date. Reverting to the current date/time."),e.date=new Date),e.date}};(0,n._)([(0,l.Cb)({type:b.default})],L.prototype,"view",void 0),(0,n._)([(0,l.Cb)({type:E,nonNullable:!0})],L.prototype,"timeSliderViewModel",void 0),(0,n._)([(0,l.Cb)()],L.prototype,"isSupported",null),(0,n._)([(0,l.Cb)()],L.prototype,"lightingUpdateInterval",void 0),(0,n._)([(0,l.Cb)()],L.prototype,"utcOffset",null),(0,n._)([(0,l.Cb)()],L.prototype,"localDate",null),(0,n._)([(0,l.Cb)()],L.prototype,"timeSliderPosition",null),(0,n._)([(0,l.Cb)()],L.prototype,"directShadowsEnabled",null),(0,n._)([(0,l.Cb)()],L.prototype,"sunLightingEnabled",null),(0,n._)([(0,l.Cb)({type:["none","day","year"],value:"none"})],L.prototype,"playingState",null),(0,n._)([(0,l.Cb)()],L.prototype,"dayPlaying",null),(0,n._)([(0,l.Cb)()],L.prototype,"yearPlaying",null),(0,n._)([(0,l.Cb)()],L.prototype,"playSpeedMultiplier",void 0),(0,n._)([(0,l.Cb)()],L.prototype,"currentSeason",null),(0,n._)([(0,l.Cb)()],L.prototype,"_lastTime",void 0),(0,n._)([(0,l.Cb)()],L.prototype,"_sunrise",void 0),(0,n._)([(0,l.Cb)()],L.prototype,"_sunset",void 0),(0,n._)([(0,l.Cb)()],L.prototype,"_cachedLightingDateUTC",void 0),(0,n._)([(0,l.Cb)()],L.prototype,"_cachedDisplayUTCOffset",void 0),(0,n._)([(0,l.Cb)()],L.prototype,"_firstInteraction",void 0),(0,n._)([(0,l.Cb)()],L.prototype,"_currentHemisphere",null),(0,n._)([(0,l.Cb)()],L.prototype,"_environment",null),(0,n._)([(0,l.Cb)()],L.prototype,"_lighting",null),(0,n._)([(0,l.Cb)()],L.prototype,"_lightingType",null),(0,n._)([(0,l.Cb)()],L.prototype,"_lightingDateDisplay",null),L=(0,n._)([(0,a.j)("esri.widgets.Daylight.DaylightViewModel")],L);const U=L;let N=class extends m.default{constructor(e){super(e),this.header=!0,this.playButtons=!0,this.datePicker=!0,this.timezone=!0,this.sunLightingToggle=!0,this.shadowsToggle=!0}};(0,n._)([(0,l.Cb)({type:Boolean,nonNullable:!0})],N.prototype,"header",void 0),(0,n._)([(0,l.Cb)({type:Boolean,nonNullable:!0})],N.prototype,"playButtons",void 0),(0,n._)([(0,l.Cb)({type:Boolean,nonNullable:!0})],N.prototype,"datePicker",void 0),(0,n._)([(0,l.Cb)({type:Boolean,nonNullable:!0})],N.prototype,"timezone",void 0),(0,n._)([(0,l.Cb)({type:Boolean,nonNullable:!0})],N.prototype,"sunLightingToggle",void 0),(0,n._)([(0,l.Cb)({type:Boolean,nonNullable:!0})],N.prototype,"shadowsToggle",void 0),N=(0,n._)([(0,a.j)("esri.widgets.Daylight.VisibleElements")],N);const A=N;var H=i(88350),I=i(1552),x=i(80975),B=i(67005);const V="esri-slider-with-dropdown",R="esri-slider__label",Z="".concat(V,"__box"),W="".concat(V,"__box--drop-down-on"),F="".concat(V,"__box--drop-down-off");let G=class extends H.default{constructor(e,t){super(e,t),this.viewModel=new E,this.showDropDown=!0,this._labelWidth=0,this._onLabelAfterCreate=e=>{const t="label-size-observer";this.removeHandles(t),this.addHandles((0,x.ib)(e,(e=>{let{contentRect:t}=e;this._labelWidth=t.width})),t)},this._getLabelStyles=()=>{if(!this.trackElement)return;const e=this._trackWidth,t=this._labelWidth/2,i=this.getCurrentPosition(),n=i-t,o=i+t;let s=-t;return n<0?s+=-n:o>e&&(s+=e-o),{left:"".concat(s,"px")}},this._onTimezoneChange=e=>{this.viewModel.utcOffset=e},this._onTimezonePickerOpen=()=>{this.viewModel.timezonePickerOpen=!0},this._onTimezonePickerClose=()=>{this.viewModel.timezonePickerOpen=!1}}renderThumbLabel(e){const{showDropDown:t,viewModel:i}=this;return(0,B.u)("div",{afterCreate:this._onLabelAfterCreate,class:this.classes({[Z]:!0,[R]:!0,[W]:t,[F]:!t}),key:"thumb-label",styles:this._getLabelStyles()},super.renderThumbLabel(e),t?(0,B.u)(I.X,{open:i.timezonePickerOpen,value:i.utcOffset,onChange:this._onTimezoneChange,onClose:this._onTimezonePickerClose,onOpen:this._onTimezonePickerOpen}):null)}};(0,n._)([(0,l.Cb)()],G.prototype,"viewModel",void 0),(0,n._)([(0,l.Cb)()],G.prototype,"showDropDown",void 0),(0,n._)([(0,l.Cb)()],G.prototype,"_labelWidth",void 0),G=(0,n._)([(0,a.j)("esri.widgets.Daylight.support.SliderWithDropdown")],G);const j=G;var K=i(8905),q=i(7021),Y=i(96919),J=i(80532);const X="date";let Q=class extends r.Z{constructor(e,t){super(e,t),this.headingLevel=3,this.viewModel=new U,this.visibleElements=new A,this.dateOrSeason=X,this._timeSlider=new j({viewModel:this.viewModel.timeSliderViewModel,steps:this.timeSliderSteps,labelInputsEnabled:!1,visibleElements:{labels:!0},tickConfigs:[{mode:"position",values:[0,360,720,1080,1439],labelsVisible:!0,tickCreatedFunction:(e,t,i)=>(0,M.mW)({tickElement:t,labelElement:i,tickClasses:$,onClick:this._makeGoToTime(e)})},{mode:"position",values:[120,240,480,600,840,960,1200,1320],tickCreatedFunction:(e,t)=>(0,M.FL)({tickElement:t,tickClasses:$,onClick:this._makeGoToTime(e)})}]}),this._datePicker=null,this._onPlayDayClick=()=>{this.viewModel.toggleDayPlaying()},this._onDatePickerAfterCreate=e=>{this._datePicker=e},this._onDateChange=e=>{const t=e.target.valueAsDate;this.viewModel.onDateChange(Array.isArray(t)?t[0]:t)},this._onYearPlayClick=()=>{this.viewModel.toggleYearPlaying()},this._onSeasonChange=e=>{this.viewModel.currentSeason=e.target.value},this._onSunLightingCheckboxChange=()=>{this.viewModel.toggleSunLightingEnabled()},this._onShadowCheckboxChange=()=>{this.viewModel.toggleDirectShadowsEnabled()}}get icon(){return"brightness"}set icon(e){this._overrideIfSome("icon",e)}get label(){var e,t;return null!==(e=null===(t=this.messages)||void 0===t?void 0:t.title)&&void 0!==e?e:""}set label(e){this._overrideIfSome("label",e)}get playSpeedMultiplier(){return this.viewModel.playSpeedMultiplier}set playSpeedMultiplier(e){this.viewModel.playSpeedMultiplier=e}get timeSliderSteps(){var e,t;return null!==(e=null===(t=this._timeSlider)||void 0===t?void 0:t.steps)&&void 0!==e?e:5}set timeSliderSteps(e){this._timeSlider.steps=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}postInitialize(){this.viewModel.isSupported&&this.addHandles([(0,s.watch)((()=>this.viewModel.timeSliderViewModel),(e=>this._timeSlider.viewModel=e),s.syncAndInitial),(0,s.watch)((()=>{var e;return null===(e=this.visibleElements)||void 0===e?void 0:e.timezone}),(e=>this._timeSlider.showDropDown=e),s.syncAndInitial),(0,s.watch)((()=>!this.viewModel.sunLightingEnabled),(e=>{this._timeSlider.disabled=e}),s.syncAndInitial),(0,s.when)((()=>!this.visible),(()=>{this._datePicker&&(this._datePicker.open=!1)}),s.sync)])}destroy(){this._timeSlider.destroy()}render(){const{messages:e,viewModel:t,visibleElements:i}=this,n=t.isSupported;return(0,B.u)("div",{class:this.classes(u.base,q.z.widget)},n?(0,B.u)(B.D,null,i.header?(0,B.u)(Y.X,{level:this.headingLevel},e.title):null,this._renderTimeOptions(),i.datePicker?this._renderDateOrSeason():null,i.sunLightingToggle?this._renderSunLightingToggle():null,i.shadowsToggle?this._renderShadowsToggle():null):(0,B.u)("div",{class:u.panelError,key:"unsupported"},(0,B.u)("p",null,e.unsupported)))}loadDependencies(){return(0,K.h)({button:()=>Promise.all([i.e(92358),i.e(46895),i.e(54438),i.e(14105),i.e(32275)]).then(i.bind(i,32275)),checkbox:()=>Promise.all([i.e(92358),i.e(54438),i.e(12424)]).then(i.bind(i,12424)),label:()=>Promise.all([i.e(92358),i.e(35738)]).then(i.bind(i,35738)),"input-date-picker":()=>Promise.all([i.e(92358),i.e(46895),i.e(54438),i.e(89219),i.e(63839),i.e(96506),i.e(11216)]).then(i.bind(i,11216)),option:()=>i.e(19790).then(i.bind(i,19790)),select:()=>Promise.all([i.e(92358),i.e(54438),i.e(26369)]).then(i.bind(i,26369))})}_renderTimeOptions(){const{viewModel:e,visibleElements:t,messages:i}=this,{directShadowsEnabled:n,dayPlaying:o}=e,s=!e.sunLightingEnabled;return(0,B.u)("div",{class:this.classes(u.dayContainer,{[u.sliderShadowOn]:n,[u.sliderShadowOff]:!n,[u.sliderDateOn]:t.datePicker,[u.sliderDateOff]:!t.datePicker,[u.sliderAmPmOn]:(0,M.y8)(),[u.containerDisabled]:s}),key:"daylight-time-options"},this._timeSlider.render(),t.playButtons?this._renderPlayPauseButton({playing:o,disabled:s,label:i.playDay,onClick:this._onPlayDayClick}):null)}_renderDateOptions(){const{viewModel:e,visibleElements:t,messages:i}=this,{yearPlaying:n}=e,o=!e.sunLightingEnabled;return(0,B.u)("div",{class:this.classes(u.dateContainer,o&&u.containerDisabled),key:u.dateContainer},(0,B.u)("calcite-input-date-picker",{afterCreate:this._onDatePickerAfterCreate,class:u.datePicker,"data-testid":"daylight-date-picker",disabled:o,key:u.datePicker,overlayPositioning:"fixed",placement:"bottom",valueAsDate:e.localDate,onCalciteInputDatePickerChange:this._onDateChange}),t.playButtons?this._renderPlayPauseButton({playing:n,disabled:o,label:i.playYear,onClick:this._onYearPlayClick}):null)}_renderPlayPauseButton(e){let{playing:t,disabled:i,label:n,onClick:o}=e;return(0,B.u)("calcite-button",{appearance:"solid",class:u.playPauseButton,disabled:i,iconStart:t?"pause-f":"play-f",label:n,onclick:o,round:!0,title:n,type:"button"})}_renderSeasonSelect(){const{messages:e,viewModel:t}=this,i=!t.sunLightingEnabled;return(0,B.u)("calcite-select",{class:this.classes(u.seasonPicker),disabled:i,label:e.season,onCalciteSelectChange:this._onSeasonChange},O.map((i=>(0,B.u)("calcite-option",{selected:t.currentSeason===i,value:i},e[i]))))}_renderDateOrSeason(){return"date"===this.dateOrSeason?this._renderDateOptions():this._renderSeasonSelect()}_renderSunLightingToggle(){var e;const t=null===(e=this.messages)||void 0===e?void 0:e.sunLightingToggle;return(0,B.u)("calcite-label",{key:"date-time-toggle",layout:"inline",scale:"s",title:null===t||void 0===t?void 0:t.tooltip},(0,B.u)("calcite-checkbox",{checked:this.viewModel.sunLightingEnabled,class:u.sunLightingCheckbox,onCalciteCheckboxChange:this._onSunLightingCheckboxChange}),null===t||void 0===t?void 0:t.label)}_renderShadowsToggle(){const e=this.messages.shadowsToggle;return(0,B.u)("calcite-label",{key:"shadow-toggle",layout:"inline",scale:"s",title:null===e||void 0===e?void 0:e.tooltip},(0,B.u)("calcite-checkbox",{checked:this.viewModel.directShadowsEnabled,class:u.shadowsCheckbox,onCalciteCheckboxChange:this._onShadowCheckboxChange}),e.label)}_makeGoToTime(e){return()=>{this.viewModel.timeSliderPosition=e}}};(0,n._)([(0,l.Cb)(),(0,J.H)("esri/widgets/Daylight/t9n/Daylight")],Q.prototype,"messages",void 0),(0,n._)([(0,l.Cb)(),(0,J.H)("esri/widgets/support/t9n/timezone")],Q.prototype,"timezoneMessages",void 0),(0,n._)([(0,l.Cb)()],Q.prototype,"headingLevel",void 0),(0,n._)([(0,l.Cb)()],Q.prototype,"icon",null),(0,n._)([(0,l.Cb)()],Q.prototype,"label",null),(0,n._)([(0,l.Cb)()],Q.prototype,"playSpeedMultiplier",null),(0,n._)([(0,l.Cb)()],Q.prototype,"timeSliderSteps",null),(0,n._)([(0,l.Cb)()],Q.prototype,"view",null),(0,n._)([(0,l.Cb)({type:U})],Q.prototype,"viewModel",void 0),(0,n._)([(0,l.Cb)({type:A,nonNullable:!0})],Q.prototype,"visibleElements",void 0),(0,n._)([(0,l.Cb)({cast(e){return"season"===e||"date"===e?e:(o.Z.getLogger(this).warn('"'.concat(e,'" is not a valid option. Acceptable values are only "date" or "season". Defaulting to "').concat(X,'".')),X)}})],Q.prototype,"dateOrSeason",void 0),(0,n._)([(0,l.Cb)()],Q.prototype,"_timeSlider",void 0),(0,n._)([(0,l.Cb)()],Q.prototype,"_datePicker",void 0),Q=(0,n._)([(0,a.j)("esri.widgets.Daylight")],Q);const $=[q.z.interactive,q.z.anchor],ee=Q},1552:(e,t,i)=>{i.d(t,{X:()=>g});var n=i(27366),o=i(49861),s=(i(93169),i(32718),i(84936),i(69912)),l=i(33565),a=i(8905),r=i(80629),h=(i(80975),i(80532)),d=i(67005);const c="esri-timezone-picker",u={base:c,trigger:"".concat(c,"__trigger"),itemTitle:"".concat(c,"__item-title"),itemDescription:"".concat(c,"__item_description")};let g=class extends l.Z{constructor(e,t){super(e,t),this.value=null,this.onChange=null,this.open=!1,this.onOpen=null,this.onClose=null,this._selectedId=null,this._onOpen=()=>{var e;this.open=!0,null===(e=this.onOpen)||void 0===e||e.call(this)},this._onClose=()=>{var e;this.open=!1,null===(e=this.onClose)||void 0===e||e.call(this)},this._killEvent=e=>(e.stopPropagation(),!0),this._onChange=e=>{var t,i,n;const o=null===(t=e.target.selectedItems)||void 0===t?void 0:t[0].getAttribute("data-id"),s=null===(i=p(this._gmtOffsets,o))||void 0===i?void 0:i.utcOffset;s&&(this._selectedId=o,null===(n=this.onChange)||void 0===n||n.call(this,s))}}loadDependencies(){return(0,a.h)({button:()=>Promise.all([i.e(92358),i.e(46895),i.e(54438),i.e(14105),i.e(32275)]).then(i.bind(i,32275)),dropdown:()=>Promise.all([i.e(92358),i.e(89219),i.e(43001)]).then(i.bind(i,43001)),"dropdown-group":()=>i.e(89992).then(i.bind(i,89992)),"dropdown-item":()=>Promise.all([i.e(92358),i.e(19784)]).then(i.bind(i,19784))})}render(){var e;const t=this._messages;if(!t)return(0,d.u)("div",{class:u.base,key:"empty"});const i=this._selectedItem,n=m(i);return(0,d.u)("div",{class:u.base,key:"container",onpointerdown:this._killEvent},(0,d.u)("calcite-dropdown",{open:this.open,overlayPositioning:"fixed",placement:"bottom-end",scale:"s",onCalciteDropdownClose:this._onClose,onCalciteDropdownOpen:this._onOpen,onCalciteDropdownSelect:this._onChange},(0,d.u)("calcite-button",{appearance:"transparent",class:u.trigger,"data-testid":"timezone-picker-button",key:"trigger",kind:"neutral",scale:"s",slot:"trigger",tabIndex:0,title:t.chooseTimezone},null!==(e=null===i||void 0===i?void 0:i.short)&&void 0!==e?e:""),(0,d.u)("calcite-dropdown-group",{selectionMode:"single"},this._gmtOffsets.map((e=>{const t=m(e);return(0,d.u)("calcite-dropdown-item",{"data-id":t,key:t,selected:n===t},(0,d.u)("div",{class:u.itemTitle,key:"title"},e.shortWithUTC),(0,d.u)("div",{class:u.itemDescription,key:"description"},e.long))})))))}get _gmtOffsets(){const e=this._messages;return e?(0,r.qZ)(e):[]}get _selectedItem(){const e=this._gmtOffsets,t=this.value,i=p(e,this._selectedId);return(null===i||void 0===i?void 0:i.utcOffset)===t?i:function(e,t){return e.find((e=>e.utcOffset===t))}(e,t)}};function p(e,t){return e.find((e=>m(e)===t))}function m(e){return e?"".concat(e.utcOffset,"-").concat(e.long):void 0}(0,n._)([(0,o.Cb)()],g.prototype,"value",void 0),(0,n._)([(0,o.Cb)()],g.prototype,"onChange",void 0),(0,n._)([(0,o.Cb)()],g.prototype,"open",void 0),(0,n._)([(0,o.Cb)()],g.prototype,"onOpen",void 0),(0,n._)([(0,o.Cb)()],g.prototype,"onClose",void 0),(0,n._)([(0,o.Cb)(),(0,h.H)("esri/widgets/support/t9n/timezone")],g.prototype,"_messages",void 0),(0,n._)([(0,o.Cb)()],g.prototype,"_gmtOffsets",null),(0,n._)([(0,o.Cb)()],g.prototype,"_selectedItem",null),(0,n._)([(0,o.Cb)()],g.prototype,"_selectedId",void 0),g=(0,n._)([(0,s.j)("esri.widgets.support.TimezonePicker")],g)},80629:(e,t,i)=>{i.d(t,{FL:()=>c,LL:()=>p,Ox:()=>h,mW:()=>d,qZ:()=>m,s5:()=>a,y8:()=>u});var n=i(86710),o=i(76969),s=i(73401),l=i(7021);const a={hour:"numeric",minute:"numeric",timeZone:"UTC"},r={hour:"numeric",timeZone:"UTC"};function h(e,t){const i=g(e,t);let n=(0,o.p6)(i,a);return 0!==e&&"00:00"===n&&(n="24:00"),"tick"===t&&n.includes(" ")&&(n=(0,o.p6)(i,r),n=n.replace(":00","")),n}function d(e){let{tickElement:t,labelElement:i,tickClasses:n=[],onClick:o}=e;t&&i&&(t.classList.add(...n,l.z.primaryTick),i.classList.add(...n,l.z.primaryTickLabel),o&&(i.onclick=t.onclick=()=>o()))}function c(e){let{tickElement:t,tickClasses:i=[],onClick:n}=e;t&&(t.classList.add(...i,l.z.secondaryTick),n&&(t.onclick=()=>n()))}function u(){return(0,o.Sh)(r).formatToParts(g(0,"value")).some((e=>{let{type:t}=e;return"dayPeriod"===t}))}function g(e,t){if("tick"===t){const t=Math.round((0,n.rJ)(e,"minutes","hours"));return new Date((0,n.rJ)(t,"hours","milliseconds"))}return new Date(6e4*e)}function p(e,t,i,o){if(null==t||null==i)return null;const l=s.S.getTimes(e,t,i),a=l.sunrise,r=l.sunset,h=(0,n.Nm)(e,o,"hours"),d=(0,n.Nm)(a,o,"hours"),c=(0,n.Nm)(r,o,"hours");if(h.getUTCDate()!==d.getUTCDate()||h.getUTCDate()!==c.getUTCDate()){const e=h.getTime()-d.getTime()>0?1:-1;a.setUTCDate(a.getUTCDate()+e),r.setUTCDate(r.getUTCDate()+e)}return{sunrise:a,sunset:r}}function m(e){return[{utcOffset:-12,short:"UTC-12",long:e.timezoneDateline},{utcOffset:-11,short:"UTC-11",long:e.timezoneSamoa},{utcOffset:-10,short:e.timezoneHAST,long:e.timezoneHawaii},{utcOffset:-9,short:e.timezoneAKST,long:e.timezoneAlaska},{utcOffset:-8,short:e.timezonePST,long:e.timezoneBaja},{utcOffset:-7,short:e.timezoneMST,long:e.timezoneMountain},{utcOffset:-7,short:e.timezoneMST,long:e.timezoneLaPaz},{utcOffset:-7,short:e.timezoneMST,long:e.timezoneArizona},{utcOffset:-6,short:e.timezoneCST,long:e.timezoneSaskatchewan},{utcOffset:-6,short:e.timezoneCST,long:e.timezoneCentralAmerica},{utcOffset:-6,short:e.timezoneCST,long:e.timezoneCentralTime},{utcOffset:-6,short:e.timezoneCST,long:e.timezoneMexico},{utcOffset:-5,short:e.timezoneEST,long:e.timezoneEasternUS},{utcOffset:-5,short:e.timezoneEST,long:e.timezoneLima},{utcOffset:-5,short:e.timezoneEST,long:e.timezoneIndiana},{utcOffset:-4,short:null,long:e.timezoneAtlantic},{utcOffset:-4,short:null,long:e.timezoneCuiaba},{utcOffset:-4,short:null,long:e.timezoneSantiago},{utcOffset:-4,short:null,long:e.timezoneManaus},{utcOffset:-4,short:null,long:e.timezoneAsuncion},{utcOffset:-3,short:null,long:e.timezoneBrasilia},{utcOffset:-3,short:null,long:e.timezoneGreenland},{utcOffset:-3,short:null,long:e.timezoneMontevideo},{utcOffset:-3,short:null,long:e.timezoneCayenne},{utcOffset:-3,short:null,long:e.timezoneBuenosAires},{utcOffset:-2,short:null,long:e.timezoneMidAtlantic},{utcOffset:-1,short:null,long:e.timezoneAzores},{utcOffset:-1,short:null,long:e.timezoneCaboVerde},{utcOffset:0,short:null,long:e.timezoneDublin},{utcOffset:0,short:null,long:e.timezoneReykjavik},{utcOffset:0,short:null,long:e.timezoneCasablanca},{utcOffset:1,short:e.timezoneCET,long:e.timezoneBelgrade},{utcOffset:1,short:e.timezoneCET,long:e.timezoneSarajevo},{utcOffset:1,short:e.timezoneCET,long:e.timezoneBrussels},{utcOffset:1,short:e.timezoneCET,long:e.timezoneWCAfrica},{utcOffset:1,short:e.timezoneCET,long:e.timezoneAmsterdam},{utcOffset:1,short:e.timezoneCET,long:e.timezoneWindhoek},{utcOffset:2,short:e.timezoneEET,long:e.timezoneMinsk},{utcOffset:2,short:e.timezoneEET,long:e.timezoneCairo},{utcOffset:2,short:e.timezoneEET,long:e.timezoneHelsinki},{utcOffset:2,short:e.timezoneEET,long:e.timezoneAthens},{utcOffset:2,short:e.timezoneEET,long:e.timezoneJerusalem},{utcOffset:2,short:e.timezoneEET,long:e.timezoneAmman},{utcOffset:2,short:e.timezoneEET,long:e.timezoneBeirut},{utcOffset:2,short:e.timezoneEET,long:e.timezoneHarare},{utcOffset:2,short:e.timezoneEET,long:e.timezoneDamascus},{utcOffset:2,short:e.timezoneEET,long:e.timezoneIstanbul},{utcOffset:3,short:e.timezoneMSK,long:e.timezoneKuwait},{utcOffset:3,short:e.timezoneMSK,long:e.timezoneBaghdad},{utcOffset:3,short:e.timezoneMSK,long:e.timezoneNairobi},{utcOffset:3,short:e.timezoneMSK,long:e.timezoneKaliningrad},{utcOffset:4,short:e.timezoneGST,long:e.timezoneMoscow},{utcOffset:4,short:e.timezoneGST,long:e.timezoneMuscat},{utcOffset:4,short:e.timezoneGST,long:e.timezoneBaku},{utcOffset:4,short:e.timezoneGST,long:e.timezoneYerevan},{utcOffset:4,short:e.timezoneGST,long:e.timezoneTbilisi},{utcOffset:4,short:e.timezoneGST,long:e.timezonePortLouis},{utcOffset:5,short:null,long:e.timezoneTashkent},{utcOffset:5,short:null,long:e.timezoneIslamabad},{utcOffset:6,short:null,long:e.timezoneEkaterinburg},{utcOffset:6,short:null,long:e.timezoneAstana},{utcOffset:6,short:null,long:e.timezoneDhaka},{utcOffset:7,short:e.timezoneICT,long:e.timezoneNovosibirsk},{utcOffset:7,short:e.timezoneICT,long:e.timezoneBangkok},{utcOffset:8,short:e.timezoneCCT,long:e.timezoneKrasnoyarsk},{utcOffset:8,short:e.timezoneCCT,long:e.timezoneBeijing},{utcOffset:8,short:e.timezoneCCT,long:e.timezoneSingapore},{utcOffset:8,short:e.timezoneCCT,long:e.timezoneTaipei},{utcOffset:8,short:e.timezoneCCT,long:e.timezonePerth},{utcOffset:8,short:e.timezoneCCT,long:e.timezoneUlaanbaatar},{utcOffset:9,short:e.timezoneJST,long:e.timezoneIrkutsk},{utcOffset:9,short:e.timezoneJST,long:e.timezoneSeoul},{utcOffset:9,short:e.timezoneJST,long:e.timezoneOsaka},{utcOffset:10,short:e.timezoneAEST,long:e.timezoneYakutsk},{utcOffset:10,short:e.timezoneAEST,long:e.timezoneCanberra},{utcOffset:10,short:e.timezoneAEST,long:e.timezoneBrisbane},{utcOffset:10,short:e.timezoneAEST,long:e.timezoneHobart},{utcOffset:10,short:e.timezoneAEST,long:e.timezoneGuam},{utcOffset:11,short:null,long:e.timezoneVladivostok},{utcOffset:11,short:null,long:e.timezoneSolomon},{utcOffset:12,short:e.timezoneNZST,long:e.timezoneMagadan},{utcOffset:12,short:e.timezoneNZST,long:e.timezoneFiji},{utcOffset:12,short:e.timezoneNZST,long:e.timezoneAuckland},{utcOffset:12,short:e.timezoneNZST,long:e.timezoneNukualofa}].map((e=>{let{utcOffset:t,short:i,long:n}=e;const o=t>0?"UTC+".concat(t):t<0?"UTC".concat(t):"GMT";return i?{utcOffset:t,short:i,shortWithUTC:"".concat(o," (").concat(i,")"),long:n}:{utcOffset:t,short:o,shortWithUTC:o,long:n}}))}}}]);
//# sourceMappingURL=72850.81fc22f4.chunk.js.map