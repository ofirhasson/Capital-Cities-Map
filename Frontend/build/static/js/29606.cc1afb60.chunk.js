"use strict";(self.webpackChunknorthwind=self.webpackChunknorthwind||[]).push([[29606,4035],{42137:(t,e,i)=>{i.d(e,{Z:()=>g});var o,n=i(27366),r=i(68860),s=i(49861),a=(i(93169),i(32718),i(84936),i(69912)),l=i(83448),c=i(848),d=i(80885),p=i(78952),u=i(15559),h=i(81753),y=i(89093);let v=o=class extends d.Z{constructor(){super(...arguments),this.center=null,this.geodesic=!1,this.numberOfPoints=60,this.radius=1e3,this.radiusUnit="meters"}normalizeCtorArgs(t,e){let i;if(null!==t&&void 0!==t&&t.center)i=t;else{if(null!==t&&void 0!==t&&t.rings)return super.normalizeCtorArgs(t,e);i={center:t}}return{...super.normalizeCtorArgs(),...i,...e}}initialize(){var t;const e=this.center,i=this.numberOfPoints;if(this.hasZ=null!==(t=null===e||void 0===e?void 0:e.hasZ)&&void 0!==t&&t,0!==this.rings.length||!e)return;const o=(0,r.En)(this.radius,this.radiusUnit,"meters"),n=e.spatialReference;let s,a="geographic";if(n.isWebMercator?a="webMercator":(null!=(n.wkid&&y.Z[n.wkid])||(n.wkt2||n.wkt)&&(0,r.s_)(n.wkt2||n.wkt))&&(a="projected"),this.geodesic){let t;switch(a){case"webMercator":t=(0,h.Sx)(e);break;case"projected":console.error("Creating a geodesic circle requires the center to be specified in web mercator or geographic coordinate system");break;case"geographic":t=e}s=this._createGeodesicCircle(t,o,i),"webMercator"===a&&(s=(0,h.$)(s))}else{let t;"webMercator"===a||"projected"===a?t=o/(0,r.Z7)(e.spatialReference):"geographic"===a&&(t=(0,r.ty)(o,"meters",(0,l.Iu)(e.spatialReference).radius)),s=this._createPlanarCircle(e,t,i)}this.spatialReference=s.spatialReference,this.addRing(s.rings[0])}clone(){const{center:t,numberOfPoints:e,radius:i,radiusUnit:n,geodesic:r}=this;return new o({center:null===t||void 0===t?void 0:t.clone(),numberOfPoints:e,radius:i,radiusUnit:n,geodesic:r})}_createGeodesicCircle(t,e,i){let o=0;const n=[];for(;o<360;){const r=[0,0],s=[t.x,t.y];(0,u.TB)(r,s,o,e,p.Z.WGS84),this.hasZ&&r.push(t.z),n.push(r),o+=360/i}return n.push(n[0]),new d.Z(n)}_createPlanarCircle(t,e,i){const o=[],n=2*Math.PI/i;for(let r=0;r<i;++r){const i=n*r,s=[t.x+Math.cos(-i)*e,t.y+Math.sin(-i)*e];this.hasZ&&s.push(t.z),o.push(s)}return o.push(o[0]),new d.Z({spatialReference:t.spatialReference,rings:[o]})}};(0,n._)([(0,s.Cb)({type:c.Z})],v.prototype,"center",void 0),(0,n._)([(0,s.Cb)()],v.prototype,"geodesic",void 0),(0,n._)([(0,s.Cb)()],v.prototype,"numberOfPoints",void 0),(0,n._)([(0,s.Cb)()],v.prototype,"radius",void 0),(0,n._)([(0,s.Cb)()],v.prototype,"radiusUnit",void 0),v=o=(0,n._)([(0,a.j)("esri.geometry.Circle")],v);const g=v},84827:(t,e,i)=>{i.d(e,{T:()=>ft,I:()=>xt});var o,n,r=i(27366),s=i(52639),a=i(7138),l=i(80987),c=i(94172),d=i(49861),p=(i(93169),i(32718),i(84936),i(69912)),u=i(46634);!function(t){t[t.NeverApplied=0]="NeverApplied",t[t.Applied=1]="Applied",t[t.Undone=2]="Undone"}(o||(o={})),function(t){t.UndoRedoUpdating="UndoRedoUpdating",t.UndoInvalidError="UndoInvalidError",t.RedoInvalidError="RedoInvalidError",t.ApplyInvalidError="ApplyInvalidError"}(n||(n={}));const h={[n.UndoRedoUpdating]:"Cannot perform operation whilst undo redo is updating",[n.UndoInvalidError]:"There are no items to Undo",[n.RedoInvalidError]:"There are no items to Redo",[n.ApplyInvalidError]:"Cannot apply an item that is already applied"};class y extends Error{constructor(){super(h[n.UndoRedoUpdating]),this.type="undo-redo-updating-error"}}class v extends Error{constructor(){super(h[n.UndoInvalidError]),this.type="undo-redo-undo-error"}}class g extends Error{constructor(){super(h[n.RedoInvalidError]),this.type="undo-redo-redo-error"}}class m extends Error{constructor(){super(h[n.ApplyInvalidError]),this.type="undo-redo-apply-error"}}var f,_;(_=f||(f={}))[_.Apply=0]="Apply",_[_.Undo=1]="Undo",_[_.Redo=2]="Redo";let w=class extends a.default{constructor(){super(...arguments),this.name="",this.tag=Symbol(),this.status=o.NeverApplied}get canUndo(){return this.status===o.Applied}get canRedo(){return this.status===o.Undone}async executeUndoRedoOperation(t){switch(t){case f.Apply:if(this.status!==o.NeverApplied)throw new m;return await this.apply(),void(this.status=o.Applied);case f.Undo:if(this.status!==o.Applied)throw new v;return await this.undo(),void(this.status=o.Undone);case f.Redo:if(this.status!==o.Undone)throw new v;return await this.redo(),void(this.status=o.Applied)}}};(0,r._)([(0,d.Cb)()],w.prototype,"name",void 0),(0,r._)([(0,d.Cb)()],w.prototype,"tag",void 0),w=(0,r._)([(0,p.j)("esri.undoredo.UndoableOperation")],w);let x=class extends a.default{constructor(){super(...arguments),this._stack=new l.Z,this._stackPosition=-1,this._updatingHandles=new u.R}get updating(){return this._updatingHandles.updating}get canUndo(){return this.hasUndo&&!this.updating}get hasUndo(){return this._stackPosition>=0}get canRedo(){return this.hasRedo&&!this.updating}get hasRedo(){return this._stackPosition<this._stack.length-1}_truncateForwardStack(){this._stack.splice(this._stackPosition+1,this._stack.length-this._stackPosition).forEach((t=>t.destroy()))}_drainStack(){this._stack.drain((t=>t.destroy())),this._stackPosition=-1}async undo(){if(!this.hasUndo)throw new v;if(this.updating)throw new y;const t=this._stack.getItemAt(this._stackPosition);await this._updatingHandles.addPromise((async()=>{await t.executeUndoRedoOperation(f.Undo),--this._stackPosition,t.canRedo||this._truncateForwardStack()})())}async redo(){if(!this.hasRedo)throw new g;if(this.updating)throw new y;const t=this._stack.getItemAt(this._stackPosition+1);await this._updatingHandles.addPromise((async()=>{await t.executeUndoRedoOperation(f.Redo),++this._stackPosition})())}peekUndo(){return this.canUndo?this._stack.getItemAt(this._stackPosition):null}peekRedo(){return this.canRedo?this._stack.getItemAt(this._stackPosition+1):null}async inject(t){if(this.updating)throw new y;await this._updatingHandles.addPromise((async()=>{t.status===o.NeverApplied&&await t.executeUndoRedoOperation(f.Apply),t.canUndo?(this._stack.splice(this._stackPosition+1,0,t),this._stackPosition++):this._stackPosition>-1&&(this._stack.splice(0,this._stackPosition+1).forEach((t=>t.destroy())),this._stackPosition=-1)})())}async add(t){if(this.updating)throw new y;await this._updatingHandles.addPromise((async()=>{t.status===o.NeverApplied&&await t.executeUndoRedoOperation(f.Apply),this._stackPosition>=-1&&this._truncateForwardStack(),t.canUndo?(this._stack.push(t),this._stackPosition=this._stack.length-1):this._drainStack()})())}async removeTagged(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.updating&&!e)return;await(0,c.whenOnce)((()=>!this.updating));const i=new l.Z;for(let o=0;o<this._stack.length;o++){const e=this._stack.getItemAt(o);e.tag===t?(e.destroy(),o===this._stackPosition&&(this._stackPosition=i.length-1)):i.push(e)}this._stack=i,this._stackPosition>i.length-1&&(this._stackPosition=i.length-1)}async clear(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.updating&&!t)throw new y;await(0,c.whenOnce)((()=>!this.updating)),this._drainStack()}};(0,r._)([(0,d.Cb)()],x.prototype,"_stack",void 0),(0,r._)([(0,d.Cb)()],x.prototype,"_stackPosition",void 0),(0,r._)([(0,d.Cb)()],x.prototype,"updating",null),(0,r._)([(0,d.Cb)({readOnly:!0})],x.prototype,"canUndo",null),(0,r._)([(0,d.Cb)({readOnly:!0})],x.prototype,"hasUndo",null),(0,r._)([(0,d.Cb)({readOnly:!0})],x.prototype,"canRedo",null),(0,r._)([(0,d.Cb)({readOnly:!0})],x.prototype,"hasRedo",null),x=(0,r._)([(0,p.j)("esri.UndoRedo")],x);var b=i(14921),C=i(91505),k=i(42537),O=i(92026),M=i(87616),R=i(93655),U=i(70178);class T{constructor(){this.committedVertices=null,this.cursorVertex=null,this.full=null,this.outline=null,this.cursorEdge=null,this.circle=null,this.rectangle=null}}var I=i(58845),P=i(3826),V=i(47898),A=i(68860),G=i(74509),S=i(86547),E=i(79422),z=i(55915),Z=i(87036),H=i(85809);let Q=class extends H.h{constructor(t){super(t),this.type="draw-circle",this.radius=null,this.xSize=null,this.ySize=null,this.area=V.MQ}get allFields(){return[]}};(0,r._)([(0,d.Cb)()],Q.prototype,"type",void 0),(0,r._)([(0,d.Cb)()],Q.prototype,"radius",void 0),(0,r._)([(0,d.Cb)()],Q.prototype,"xSize",void 0),(0,r._)([(0,d.Cb)()],Q.prototype,"ySize",void 0),(0,r._)([(0,d.Cb)()],Q.prototype,"area",void 0),(0,r._)([(0,d.Cb)()],Q.prototype,"allFields",null),Q=(0,r._)([(0,p.j)("esri.views.interactive.tooltip.infos.DrawCircleTooltipInfo")],Q);var F=i(73816),L=i(35647);let N=class extends((0,L.A)(H.h)){constructor(t){super(t),this.type="draw-mesh",this.orientation=(0,F.Zq)({lockable:!1}),this.scale=(0,F.Se)({lockable:!1})}get allFields(){return[this.longitude,this.latitude,this.x,this.y,this.elevation,this.orientation,this.scale]}};(0,r._)([(0,d.Cb)()],N.prototype,"helpMessage",void 0),(0,r._)([(0,d.Cb)()],N.prototype,"allFields",null),N=(0,r._)([(0,p.j)("esri.views.interactive.tooltip.infos.DrawMeshTooltipInfo")],N);let D=class extends((0,L.A)(H.h)){constructor(t){super(t),this.type="draw-point"}get allFields(){return[this.longitude,this.latitude,this.x,this.y,this.elevation]}};(0,r._)([(0,d.Cb)()],D.prototype,"helpMessage",void 0),(0,r._)([(0,d.Cb)()],D.prototype,"allFields",null),D=(0,r._)([(0,p.j)("esri.views.interactive.tooltip.infos.DrawPointTooltipInfo")],D);let j=class extends((0,L.A)(H.h)){constructor(t){super(t),this.type="draw-polygon",this.direction=(0,F.Cn)(),this.distance=(0,F.wD)({title:t=>t.messages.sketch.distance}),this.area=(0,F.UR)(),this.xyMode="direction-distance"}get allFields(){return[this.direction,this.distance,this.longitude,this.latitude,this.x,this.y,this.elevation,this.area]}};(0,r._)([(0,d.Cb)()],j.prototype,"xyMode",void 0),(0,r._)([(0,d.Cb)()],j.prototype,"helpMessage",void 0),(0,r._)([(0,d.Cb)()],j.prototype,"allFields",null),j=(0,r._)([(0,p.j)("esri.views.interactive.tooltip.infos.DrawPolygonTooltipInfo")],j);let q=class extends((0,L.A)(H.h)){constructor(t){super(t),this.type="draw-polyline",this.direction=(0,F.Cn)(),this.distance=(0,F.wD)({title:t=>t.messages.sketch.distance}),this.totalLength=(0,F.i4)(),this.xyMode="direction-distance"}get allFields(){return[this.direction,this.distance,this.longitude,this.latitude,this.x,this.y,this.elevation,this.totalLength]}};(0,r._)([(0,d.Cb)()],q.prototype,"helpMessage",void 0),(0,r._)([(0,d.Cb)()],q.prototype,"xyMode",void 0),(0,r._)([(0,d.Cb)()],q.prototype,"allFields",null),q=(0,r._)([(0,p.j)("esri.views.interactive.tooltip.infos.DrawPolylineTooltipInfo")],q);let Y=class extends H.h{constructor(t){super(t),this.type="draw-rectangle",this.xSize=V.yP,this.ySize=V.yP,this.area=V.MQ}get allFields(){return[]}};(0,r._)([(0,d.Cb)()],Y.prototype,"type",void 0),(0,r._)([(0,d.Cb)()],Y.prototype,"xSize",void 0),(0,r._)([(0,d.Cb)()],Y.prototype,"ySize",void 0),(0,r._)([(0,d.Cb)()],Y.prototype,"area",void 0),(0,r._)([(0,d.Cb)()],Y.prototype,"allFields",null),Y=(0,r._)([(0,p.j)("esri.views.interactive.tooltip.infos.DrawRectangleTooltipInfo")],Y);var W=i(73840),B=i(543),K=i(59418),J=i(4914);function X(t){const{directionOptions:e,geometryType:i,sketchOptions:o,tooltipInfos:n}=t,r=e=>{const i=dt(t).mode,o=n[e].elevation;"relative-to-ground"===i||"relative-to-scene"===i||"on-the-ground"===i?o.lock(ut(t)):o.unlock()};switch(i){case"polygon":case"polyline":r(i),(t=>{if(e){const i=n[t].direction;i.committed=e.angle,i.unlockOnVertexPlacement=!1,o.values.directionMode=e.mode}})(i);break;case"point":case"mesh":r(i)}}function $(t,e){const{drawOperation:i,view:o}=e,n=et(e),r=dt(e);if("2d"===o.type||!t||"absolute-height"!==r.mode||1!==(null===i||void 0===i?void 0:i.numCommittedVertices)||!n||"draw-polyline"!==n.type&&"draw-polygon"!==n.type||n.elevation.locked)return;const[s,a,l]=t,c=function(t,e,i,o,n){var r,s;const{view:a,drawOperation:l}=n;if("3d"!==a.type||!l)return;null!==(r=i)&&void 0!==r||(i=0);const c=pt(n),d=dt(n),p=(0,G.O3)(a,t,e,i,c,d,o);return null!==(s=(0,J.KY)(p,c))&&void 0!==s?s:ut(n)}(s,a,l,r,e);null!=c&&n.elevation.lock(c)}function tt(t){var e;null===(e=et(t))||void 0===e||e.allFields.forEach((t=>{t.unlockOnVertexPlacement&&t.unlock()}))}function et(t){var e;let{geometryType:i,graphic:o,tooltipInfos:n}=t;return"multipoint"===i||(null===o||void 0===o||null===(e=o.geometry)||void 0===e?void 0:e.type)!==it[i]?null:n[i]}const it={point:"point",mesh:"mesh",polyline:"polyline",polygon:"polygon",circle:"polygon",rectangle:"polygon"};function ot(t,e){switch(null===t||void 0===t?void 0:t.type){case"draw-point":!function(t,e){var i;const o=null===(i=e.graphic)||void 0===i?void 0:i.geometry;"point"===(null===o||void 0===o?void 0:o.type)&&(nt(t,o,e),t.helpMessage=(0,S.A)("point",o))}(t,e);break;case"draw-polyline":!function(t,e){var i;const{createOperationGeometry:o,drawOperation:n}=e,r=null!=o?o.full:null;"polyline"===(null===r||void 0===r?void 0:r.type)&&(rt(t,e),t.totalLength.actual=n.lastVertex?null!==(i=(0,K.C_)(r))&&void 0!==i?i:V.yP:null,t.helpMessage=(0,S.A)("polyline",r))}(t,e);break;case"draw-polygon":!function(t,e){var i;const{createOperationGeometry:o,drawOperation:n}=e,r=null!=o?o.full:null;"polygon"===(null===r||void 0===r?void 0:r.type)&&(rt(t,e),t.area.actual=n.lastVertex?null!==(i=(0,B.f)(r))&&void 0!==i?i:V.MQ:null,t.helpMessage=(0,S.A)("polygon",r))}(t,e);break;case"draw-rectangle":!function(t,e){t.sketchOptions=e.sketchOptions,t.xSize=lt(e),t.ySize=ct(e),t.area=at(e)}(t,e);break;case"draw-circle":!function(t,e){const{forceUniformSize:i,sketchOptions:o}=e;t.sketchOptions=o,t.radius=i?function(t){var e,i;let{createOperationGeometry:o}=t;return null!==(e=null!=(null===o||void 0===o||null===(i=o.circle)||void 0===i?void 0:i.center)&&null!=o.circle.edge?(0,K.Qw)(o.circle.center,o.circle.edge):null)&&void 0!==e?e:V.yP}(e):null,t.xSize=i?null:lt(e),t.ySize=i?null:ct(e),t.area=at(e)}(t,e);break;case"draw-mesh":!function(t,e){const{graphic:i,view:o}=e,n=null===i||void 0===i?void 0:i.geometry;"3d"===o.type&&"mesh"===(null===n||void 0===n?void 0:n.type)&&(nt(t,n.origin,e),(0,Z.kJ)(t,n),t.helpMessage=(0,E.getDrawMeshHelpMessage)(i,o))}(t,e)}}function nt(t,e,i){const{drawOperation:o,view:n,sketchOptions:r}=i,{cursorVertex:s}=o;if(t.sketchOptions=r,t.viewType=n.type,t.setLocationFromPoint(e,pt(i)),st(t.elevation,i),!s)return void(o.constraints=void 0);const a=s;o.constraints={context:ht(a,i),x:t.x.committed,y:t.y.committed,longitude:t.longitude.committed,latitude:t.latitude.committed,elevation:t.elevation.committed,distance:null,direction:null}}function rt(t,e){var i;const{drawOperation:o,sketchOptions:n,view:r}=e,{cursorVertex:s,lastVertex:a,secondToLastVertex:l}=o,c=n.values.effectiveDirectionMode;t.sketchOptions=n,t.viewType=r.type;const d=a&&s?null!==(i=(0,K.Qw)(a,s))&&void 0!==i?i:V.yP:null;if(t.distance.actual=d,t.distance.readOnly=null==a,t.direction.actual=null,t.direction.readOnly=!0,a&&s&&("absolute"===c||l)){const e=(0,W.zS)(l,a,s,c);t.direction.actual=null!==e&&void 0!==e?e:V.qF,t.direction.readOnly=!1}t.setLocationFromPoint(s,pt(e)),st(t.elevation,e);const p=function(t,e){let{sketchOptions:i}=e;const o=i.tooltips.xyMode;return"auto"===o?t?"direction-distance":"coordinates":o}(a,e);t.xyMode=p,t.direction.visible="direction-distance"===p,t.distance.visible="direction-distance"===p,t.effectiveX.visible="coordinates"===p,t.effectiveY.visible="coordinates"===p;const u=null!==s&&void 0!==s?s:a;o.constraints=u?{context:ht(u,e),x:t.x.committed,y:t.y.committed,longitude:t.longitude.committed,latitude:t.latitude.committed,elevation:t.elevation.committed,distance:t.distance.committed,direction:t.direction.committed}:void 0}function st(t,e){var i,o;const{drawOperation:n}=e,r=null!==(i=null===n||void 0===n?void 0:n.cursorVertex)&&void 0!==i?i:null===n||void 0===n?void 0:n.lastVertex;t.actual=null!==(o=(0,J.un)(r))&&void 0!==o?o:ut(e),t.visible=n.hasZ,t.readOnly=!1,t.showAsZ=!0}function at(t){var e,i;const o=null===(e=t.createOperationGeometry)||void 0===e?void 0:e.full;return"polygon"!==(null===o||void 0===o?void 0:o.type)?V.MQ:null!==(i=(0,B.f)(o))&&void 0!==i?i:V.MQ}function lt(t){var e,i;const o=null===(e=t.createOperationGeometry)||void 0===e||null===(e=e.rectangle)||void 0===e?void 0:e.midpoints;return null!==(i=null!=o?(0,K.Qw)(o.left,o.right):null)&&void 0!==i?i:V.yP}function ct(t){var e,i;const o=null===(e=t.createOperationGeometry)||void 0===e||null===(e=e.rectangle)||void 0===e?void 0:e.midpoints;return null!==(i=null!=o?(0,K.Qw)(o.top,o.bottom):null)&&void 0!==i?i:V.yP}function dt(t){var e;return null!==(e=t.drawOperation.elevationInfo)&&void 0!==e?e:G.jG}function pt(t){return t.drawOperation.coordinateHelper.spatialReference}function ut(t){const e=(0,A._R)(pt(t));return(0,V.yG)(t.defaultZ*e,"meters")}function ht(t,e){return(0,z.ND)(t,e.view,pt(e),dt(e),e.drawOperation.coordinateHelper.hasZ(),e.sketchOptions.values.effectiveDirectionMode)}var yt=i(45900),vt=i(59981),gt=i(26091),mt=i(27088);let ft=class extends(C.Z.EventedMixin(yt.m)){constructor(t){super(t),this._graphic=null,this._coordinateFormatterLoadTask=null,this._createOperationGeometry=null,this.defaultZ=0,this.directionOptions=null,this.geometryType=null,this.hasZ=!0,this.geometryToPlace=null,this.snappingManager=null,this.snapToScene=!1,this.sketchOptions=new vt.Z}initialize(){const{view:t}=this;this.internalGraphicsLayer=new R.default({listMode:"hide",internal:!0}),this.view.map.layers.add(this.internalGraphicsLayer);const e=this.drawOperation=this.makeDrawOperation();this.tooltipInfos=function(t,e){return{point:new D({sketchOptions:e,viewType:t}),polyline:new q({sketchOptions:e,viewType:t}),polygon:new j({sketchOptions:e,viewType:t}),mesh:new N({sketchOptions:e,viewType:t}),rectangle:new Y({sketchOptions:e}),circle:new Q({sketchOptions:e})}}(t.type,this.sketchOptions);const i=this.tooltip=new gt.u({view:t});X(this._tooltipsContext),this._coordinateFormatterLoadTask=(0,b.vr)((()=>(0,M.zD)())),this.addHandles([e.on("vertex-add",(t=>this.onVertexAdd(t))),e.on("vertex-remove",(t=>this.onVertexRemove(t))),e.on("vertex-update",(t=>this.onVertexUpdate(t))),e.on("cursor-update",(t=>this.onCursorUpdate(t))),e.on("cursor-remove",(()=>this._updateGraphic())),e.on("complete",(t=>this.onComplete(t))),this._coordinateFormatterLoadTask,i.on("paste",(t=>(0,Z.N5)(t,this.activeTooltipInfo))),(0,c.watch)((()=>this.cursor),(t=>{e.cursor=t}),c.syncAndInitial),(0,mt.EH)((()=>{const{activeTooltipInfo:t,sketchOptions:e}=this;ot(t,this._tooltipsContext),i.info=e.tooltips.effectiveEnabled?t:null})),(0,mt.EH)((()=>{e.constraintZ=function(t){const{geometryType:e,tooltipInfos:i}=t;switch(e){case"point":case"mesh":case"polyline":case"polygon":{const o=i[e].elevation.committed;if(!o)return;return(0,V.mE)(o,"meters")/(0,A._R)(pt(t))}default:return}}(this._tooltipsContext)}))]),this.finishToolCreation()}destroy(){this.drawOperation=(0,O.SC)(this.drawOperation),this.tooltip=(0,O.SC)(this.tooltip),this._destroyAllVisualizations(),this.view.map.remove(this.internalGraphicsLayer),this.internalGraphicsLayer=(0,O.SC)(this.internalGraphicsLayer),this._set("view",null)}get _drawSpatialReference(){return this.drawOperation.coordinateHelper.spatialReference}get _tooltipsContext(){return{createOperationGeometry:this._createOperationGeometry,defaultZ:this.defaultZ,directionOptions:this.directionOptions,drawOperation:this.drawOperation,forceUniformSize:this.forceUniformSize,geometryType:this.geometryType,graphic:this.graphic,sketchOptions:this.sketchOptions,tooltipInfos:this.tooltipInfos,view:this.view}}get canRedo(){return this.drawOperation.canRedo}get canUndo(){return this.drawOperation.canUndo}set centered(t){this._set("centered",t),this._updateGraphic()}get cursor(){return this._get("cursor")}set cursor(t){this._set("cursor",t)}set enabled(t){this.drawOperation.interactive=t,this._set("enabled",t)}set forceUniformSize(t){this._set("forceUniformSize",t),this._updateGraphic()}get graphic(){return this._graphic}set graphicSymbol(t){this._set("graphicSymbol",t),null!=this._graphic&&(this._graphic.symbol=t)}set mode(t){const e=this.drawOperation;e&&(e.drawingMode=t),this._set("mode",t)}get updating(){var t,e;return null!==(t=null===(e=this.drawOperation)||void 0===e?void 0:e.updating)&&void 0!==t&&t}get undoRedo(){const{view:{type:t,map:e}}=this;return"2d"===t&&e&&"undoRedo"in e&&e.undoRedo instanceof x?e.undoRedo:null}set undoRedo(t){this._override("undoRedo",t)}completeCreateOperation(){this.drawOperation.complete()}onInputEvent(t){this.destroyed||(0,Z._i)(t,this.tooltip)||this.drawOperation.onInputEvent(t)}redo(){this.drawOperation.redo()}reset(){}undo(){this.drawOperation.undo(),0===this.drawOperation.numCommittedVertices&&X(this._tooltipsContext)}_destroyAllVisualizations(){this.removeHandles(wt.outline),this.removeHandles(wt.regularVertices),this.removeHandles(wt.activeVertex),this.removeHandles(wt.activeEdge),this.removeHandles(_t)}_createOrUpdateGraphic(t){if(null!=this._graphic)return this.updateGraphicGeometry(t),this._graphic;const e=new s.Z({...this.graphicProperties,symbol:this.graphicSymbol});return this._graphic=e,this.updateGraphicGeometry(t),this.internalGraphicsLayer.add(e),this.addHandles(this.initializeGraphic(e)),this.notifyChange("graphic"),this.addHandles((0,k.kB)((()=>{this.internalGraphicsLayer.remove(e),this._graphic===e&&(this._graphic=null)})),_t),e}updateGraphicGeometry(t){this._graphic.geometry=t}_getCreateOperationGeometry(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{operationComplete:!1};if(null==this.drawOperation)return;const{coordinateHelper:e,view:i,visualizationCursorVertex:o,lastVertex:n,committedVertices:r,geometryIncludingUncommittedVertices:s,numCommittedVertices:a}=this.drawOperation;if(!(a>0||null!=o))return;const l=t.operationComplete?r:s,c=l.length,d=null!=o?e.pointToArray(o):null,p=this._drawSpatialReference,u="3d"===i.type&&"global"===i.viewingMode,h=new T;h.committedVertices=r,h.cursorVertex=d;const{geometryType:y}=this;switch(y){case"point":case"mesh":h.full=e.arrayToPoint(l[0]);break;case"multipoint":h.full=c>0?(0,I.Nv)(l,p):null;break;case"polyline":case"polygon":c>0&&(h.full="polygon"===y?(0,I.p)([l],p,u,!0):(0,I.DF)([l],p,u),h.cursorEdge=null!=d&&n&&!(0,U.kg)(o,n)?(0,I.DF)([[d,e.pointToArray(n)]],p,u):null,h.outline=c>1?h.full:null);break;case"circle":case"rectangle":{var v,g;if(h.committedVertices=h.cursorVertex=null,!c)break;const e=(0,P.Gn)(i,l[0]),o=l[0],n=e.makeMapPoint(o[0]+bt*i.resolution,o[1]);"circle"===y?1===c&&t.operationComplete?h.circle=(0,I.y)([o,n],e,!0):2===c&&(this.forceUniformSize?h.circle=(0,I.y)(l,e,this.centered):h.rectangle=(0,I.n_)(l,e,this.centered)):1===c&&t.operationComplete?h.rectangle=(0,I.yL)([o,n],e,!0):2===c&&(h.rectangle=this.forceUniformSize?(0,I.yL)(l,e,this.centered):(0,I.MC)(l,e,this.centered)),h.full=null!=h.circle?h.circle.geometry:null===(v=h.rectangle)||void 0===v?void 0:v.geometry,h.outline="polygon"===(null===(g=h.full)||void 0===g?void 0:g.type)?h.full:null;break}default:return null}return h}initializeGraphic(t){return(0,k.kB)()}onComplete(t){if(!this.drawOperation)return;this._updateGraphic();let e=null;if(this.drawOperation.isCompleted){const t=this._getCreateOperationGeometry({operationComplete:!0});null!=t&&(e=this._createOrUpdateGraphic(t.full))}this._createOperationGeometry=null,this.emit("complete",{graphic:e,...t})}onCursorUpdate(t){this._updateGraphic(),this.emit("cursor-update",t)}onDeactivate(){const{drawOperation:t}=this;t&&(t.isCompleted||t.cancel())}onOutlineChanged(t){return(0,k.kB)()}onCursorEdgeChanged(t){return(0,k.kB)()}onVertexAdd(t){var e;tt(this._tooltipsContext),this._updateGraphic(),$(null===(e=t.vertices.at(0))||void 0===e?void 0:e.coordinates,this._tooltipsContext),this.emit("vertex-add",t)}onVertexRemove(t){tt(this._tooltipsContext),this._updateGraphic(),this.emit("vertex-remove",t)}onVertexUpdate(t){this._updateGraphic(),this.emit("vertex-update",t)}_updateGraphic(){const t=this._getCreateOperationGeometry();this._createOperationGeometry=t,null!=t?(null!=t.cursorEdge?this.addHandles(this.onCursorEdgeChanged(t.cursorEdge),wt.activeEdge):this.removeHandles(wt.activeEdge),null!=t.outline?this.addHandles(this.onOutlineChanged(t.outline),wt.outline):this.removeHandles(wt.outline),null!=t.committedVertices?this.addHandles(this.onRegularVerticesChanged(t.committedVertices),wt.regularVertices):this.removeHandles(wt.regularVertices),null!=t.cursorVertex?this.addHandles(this.onActiveVertexChanged(t.cursorVertex),wt.activeVertex):this.removeHandles(wt.activeVertex),null!=t.full?this._createOrUpdateGraphic(t.full):this.removeHandles(_t)):this._destroyAllVisualizations()}get activeTooltipInfo(){var t;return null!==(t=this._coordinateFormatterLoadTask)&&void 0!==t&&t.finished?et(this._tooltipsContext):null}};(0,r._)([(0,d.Cb)()],ft.prototype,"_coordinateFormatterLoadTask",void 0),(0,r._)([(0,d.Cb)()],ft.prototype,"_createOperationGeometry",void 0),(0,r._)([(0,d.Cb)()],ft.prototype,"_tooltipsContext",null),(0,r._)([(0,d.Cb)({value:!0})],ft.prototype,"centered",null),(0,r._)([(0,d.Cb)()],ft.prototype,"cursor",null),(0,r._)([(0,d.Cb)({nonNullable:!0})],ft.prototype,"defaultZ",void 0),(0,r._)([(0,d.Cb)({constructOnly:!0})],ft.prototype,"directionOptions",void 0),(0,r._)([(0,d.Cb)()],ft.prototype,"drawOperation",void 0),(0,r._)([(0,d.Cb)({value:!0})],ft.prototype,"enabled",null),(0,r._)([(0,d.Cb)({value:!0})],ft.prototype,"forceUniformSize",null),(0,r._)([(0,d.Cb)({constructOnly:!0})],ft.prototype,"geometryType",void 0),(0,r._)([(0,d.Cb)()],ft.prototype,"graphic",null),(0,r._)([(0,d.Cb)({constructOnly:!0})],ft.prototype,"graphicProperties",void 0),(0,r._)([(0,d.Cb)()],ft.prototype,"graphicSymbol",null),(0,r._)([(0,d.Cb)({constructOnly:!0})],ft.prototype,"hasZ",void 0),(0,r._)([(0,d.Cb)({constructOnly:!0})],ft.prototype,"geometryToPlace",void 0),(0,r._)([(0,d.Cb)()],ft.prototype,"mode",null),(0,r._)([(0,d.Cb)()],ft.prototype,"snappingManager",void 0),(0,r._)([(0,d.Cb)()],ft.prototype,"snapToScene",void 0),(0,r._)([(0,d.Cb)()],ft.prototype,"tooltip",void 0),(0,r._)([(0,d.Cb)()],ft.prototype,"tooltipInfos",void 0),(0,r._)([(0,d.Cb)({constructOnly:!0,type:vt.Z})],ft.prototype,"sketchOptions",void 0),(0,r._)([(0,d.Cb)()],ft.prototype,"updating",null),(0,r._)([(0,d.Cb)({constructOnly:!0,nonNullable:!0})],ft.prototype,"view",void 0),(0,r._)([(0,d.Cb)({constructOnly:!0})],ft.prototype,"undoRedo",null),(0,r._)([(0,d.Cb)()],ft.prototype,"activeTooltipInfo",null),ft=(0,r._)([(0,p.j)("esri.views.draw.DrawGraphicTool")],ft);const _t=Symbol("create-operation-graphic"),wt={outline:Symbol("outline-visual"),regularVertices:Symbol("regular-vertices-visual"),activeVertex:Symbol("active-vertex-visual"),activeEdge:Symbol("active-edge-visual")};function xt(t){switch(t){case"point":case"polyline":case"polygon":case"multipoint":return t;case"circle":case"rectangle":return"segment";case"mesh":return"point"}}const bt=48},58845:(t,e,i)=>{i.d(e,{DF:()=>_,MC:()=>b,Nv:()=>f,n_:()=>T,p:()=>w,y:()=>U,yL:()=>x});i(59486);var o=i(63780),n=i(84652),r=i(68860),s=i(32035),a=i(12400),l=i(42137),c=i(2170),d=i(69662),p=i(92975),u=i(3826),h=i(848),y=i(77577),v=i(29909),g=i(80885);function m(t,e){const i=new h.Z({x:t[0],y:t[1],spatialReference:e});return t.length>2&&(i.z=t[2]),i}function f(t,e){return new y.Z({points:t,spatialReference:e})}function _(t,e,i){const o=new v.Z({paths:t,spatialReference:e});return i&&(0,d.nc)(o),o}function w(t,e,i){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const s=(0,n.d9)(t);s.forEach((t=>{const e=t[0],i=t[t.length-1];(0,o.fS)(e,i)&&1!==t.length||t.push(t[0])}));let a=new g.Z({rings:s,spatialReference:e});return a.rings.forEach((t=>{(0,d.bu)(t)||t.reverse()})),i&&(0,d.nc)(a),r&&a.isSelfIntersecting&&(0,p.JY)(e)&&(a=(0,c.simplify)(a)),a}function x(t,e,i){const n=e.mapToLocalMultiple(t),r=[],s={x:n[0].x,y:n[0].y},a=n[1].x,l=n[1].y,c=Math.round(a-s.x),d=Math.round(l-s.y),p=Math.max(Math.abs(c),Math.abs(d));if(i){const t={x:s.x+p,y:s.y+p},e={x:s.x-p,y:s.y-p};r.push((0,u.Q8)(t.x,e.y),(0,u.Q8)(e.x,e.y),(0,u.Q8)(e.x,t.y),(0,u.Q8)(t.x,t.y))}else{const t={x:c>0?s.x+p:s.x-p,y:d>0?s.y+p:s.y-p};r.push((0,u.Q8)(s.x,s.y),(0,u.Q8)(t.x,s.y),(0,u.Q8)(t.x,t.y),(0,u.Q8)(s.x,t.y))}return C(w([r.map((t=>e.localToMap(t))).filter(o.pC)],e.spatialReference,e.doUnnormalization,!0),r,e)}function b(t,e,i){let n=e.mapToLocalMultiple(t);if(1===n.length){const t=48,e=n[0];n=[(0,u.Q8)(e.x-t,e.y+t),(0,u.Q8)(e.x+t,e.y-t),(0,u.Q8)(e.x+t,e.y-t),(0,u.Q8)(e.x-t,e.y+t)]}const r=[],s={x:n[0].x,y:n[0].y},a={x:n[1].x,y:n[1].y};if(i){const t=Math.round(a.x-s.x),e=Math.round(a.y-s.y);r.push((0,u.Q8)(s.x-t,s.y-e),(0,u.Q8)(a.x,s.y-e),(0,u.Q8)(a.x,a.y),(0,u.Q8)(s.x-t,a.y))}else r.push((0,u.Q8)(s.x,s.y),(0,u.Q8)(a.x,s.y),(0,u.Q8)(a.x,a.y),(0,u.Q8)(s.x,a.y));return C(w([r.map((t=>e.localToMap(t))).filter(o.pC)],e.spatialReference,e.doUnnormalization,!0),r,e)}function C(t,e,i){const o=k(e[3],e[2],i),n=k(e[1],e[2],i),r=k(e[0],e[1],i),s=k(e[0],e[3],i);return{geometry:t,midpoints:null!=o&&null!=n&&null!=r&&null!=s?{top:o,right:n,bottom:r,left:s}:null}}function k(t,e,i){M[0]=t.x,M[1]=t.y,M[2]=0,R[0]=e.x,R[1]=e.y,R[2]=0,(0,s.o)(M,M,R,.5),O.x=M[0],O.y=R[1],O.z=R[2];const o=i.localToMap(O);return null!=o?m(o,i.spatialReference):null}const O=(0,u.Q8)(0,0,0),M=(0,a.Ue)(),R=(0,a.Ue)();function U(t,e,i,o){const n=e.mapToLocalMultiple(t);let s=null,a=null;if(i)s=n[0],a=n[1];else{const t=n[0],e=n[1],i=Math.round(e.x-t.x),o=Math.round(e.y-t.y),r=Math.max(Math.abs(i),Math.abs(o));s=(0,u.Q8)(i>0?t.x+r/2:t.x-r/2,o>0?t.y+r/2:t.y-r/2),a=(0,u.Q8)(Math.abs(i)>Math.abs(o)?s.x-r/2:s.x,Math.abs(i)>Math.abs(o)?s.y:s.y-r/2)}const h=e.localToMap(s),y=e.localToMap(a);if(null==h||null==y)return null;e.doUnnormalization&&(0,d.Sq)([[h,y]],e.spatialReference);const v=m(h,e.spatialReference),g=m(y,e.spatialReference),f=(0,r.c9)(e.spatialReference);let _=0;if((0,p.JY)(e.spatialReference))_=f*(0,c.distance)(v,g,null);else{const t=s.x-a.x,e=s.y-a.y;_=f*Math.sqrt(t*t+e*e)*(o||1)}const x=new l.Z({center:v,radius:_,radiusUnit:"meters",spatialReference:e.spatialReference});return{geometry:w(x.rings,x.spatialReference,!1),center:v,edge:g}}function T(t,e,i){const n=e.mapToLocalMultiple(t),r=n[0],s=n[1],a=Math.round(s.x-r.x),l=Math.round(s.y-r.y),c=(0,u.Q8)(i?r.x:r.x+a/2,i?r.y:r.y+l/2),d=i?a:a/2,p=i?l:l/2,h=[],y=2*Math.PI/60;function v(t){const e=Math.cos(t),i=Math.sin(t);return(0,u.Q8)(d*e+c.x,p*i+c.y)}for(let o=0;o<60;o++)h.push(v(o*y));h.push(h[0]);const{spatialReference:g,doUnnormalization:f}=e,_=w([h.map((t=>e.localToMap(t))).filter(o.pC)],g,f,!1),x=e.localToMap(v(Math.PI/2)),b=e.localToMap(v(0)),C=e.localToMap(v(-Math.PI/2)),k=e.localToMap(v(Math.PI));return{geometry:_,midpoints:null!=x&&null!=b&&null!=C&&null!=k?{top:m(x,g),right:m(b,g),bottom:m(C,g),left:m(k,g)}:null}}},86547:(t,e,i)=>{function o(t,e){switch(t){case"point":case"multipoint":return"point";case"polyline":return function(t){return(null!=t&&"polyline"===t.type&&t.paths.length?t.paths[0].length:0)<2?"polylineZeroVertices":"polylineOneVertex"}(e);case"polygon":return function(t){const e=null!=t&&"polygon"===t.type&&t.rings.length?t.rings[0].length:0;return e<3?"polylineZeroVertices":e<4?"polygonOneVertex":"polygonTwoVertices"}(e);default:return}}i.d(e,{A:()=>o})},79422:(t,e,i)=>{i.r(e),i.d(e,{getDrawMeshHelpMessage:()=>a});var o=i(68860),n=i(32035),r=i(12400),s=i(74509);function a(t,e){var i,r,a,u;const h=null===t||void 0===t?void 0:t.geometry;if(!t||"mesh"!==(null===h||void 0===h?void 0:h.type)||!e)return;const{renderCoordsHelper:y,elevationProvider:v}=e,{camera:g}=e.state,{extent:m}=h,{center:f,spatialReference:_}=m,w=(0,o.c9)(_),x=(0,o._R)(_),b=(0,o.c9)(y.spatialReference),C=m.width*w,k=m.height*x,O=(null!==(i=m.zmax)&&void 0!==i?i:0)*x,M=O-(null!==(r=m.zmin)&&void 0!==r?r:0)*x,R=Math.max(C,k,M)/b,{x:U,y:T}=f,I=null!==(a=f.z)&&void 0!==a?a:0;(0,n.s)(p,U,T,I),y.toRenderCoords(p,_,p);const P=R/g.computeScreenPixelSizeAt(p);if(P>g.width*c)return"meshTooClose";if(P<l)return"meshTooFar";const V=(0,s.RL)(t),{absoluteZ:A}=(0,s.tq)(U,T,O,_,e,V);return A<(null!==(u=v.getElevation(U,T,I,_,"ground"))&&void 0!==u?u:0)*x+M*d?"meshUnderground":"mesh"}const l=20,c=1,d=.1,p=(0,r.Ue)()},92583:(t,e,i)=>{i.d(e,{lv:()=>v,nn:()=>u,ui:()=>h});var o=i(13611),n=i(32035),r=i(12400),s=i(82218),a=i(51378),l=i(254),c=i(12225),d=i(29014),p=i(34778);function u(t,e){return y(t,e,!1)}function h(t,e){return y(t,e,!0)}function y(t,e,i){if(t instanceof p.y){if(t.operation instanceof l.z)return function(t,e){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const o=i?-1:1,a=(0,r.al)(o*t.dx,o*t.dy,o*t.dz);(0,n.g)(e.origin,e.origin,a),(0,s.u)(e)}(t.operation,e,i),!0;if(t.operation instanceof c.S)return function(t,e){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const o=i?-t.angle:t.angle;(0,n.K)(e.basis1,e.basis1,r.AG,o),(0,n.K)(e.basis2,e.basis2,r.AG,o),(0,s.u)(e)}(t.operation,e,i),!0;if(t.operation instanceof d.q)return function(t,e){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=i?1/t.factor1:t.factor1,a=i?1/t.factor2:t.factor2;(0,n.j)(e.basis1,e.basis1,r),(0,n.j)(e.basis2,e.basis2,a),(0,o.LG)(e.origin,e.origin,t.origin,t.axis1,r),(0,o.LG)(e.origin,e.origin,t.origin,t.axis2,a),(0,s.u)(e)}(t.operation,e,i),!0}return!1}function v(t,e,i,n){n||(n=(0,s.a)());const r=(0,o.t8)(a.qW.get(),t[1],-t[0]),l=(0,o.t8)(a.qW.get(),Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),c=(0,o.t8)(a.qW.get(),Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY),d=a.qW.get();e.components.forEach((e=>e.vertices.forEach((e=>{let{pos:i}=e;(0,o.t8)(d,(0,o.AK)(t,i),(0,o.AK)(r,i)),(0,o.VV)(l,l,d),(0,o.Fp)(c,c,d)}))));const p=1e-6,u=(0,o.t8)(a.qW.get(),c[0]-l[0]<p?i/2:0,c[1]-l[1]<p?i/2:0);return(0,o.$X)(l,l,u),(0,o.IH)(c,c,u),(0,o.bA)(n.basis1,t,(c[0]-l[0])/2),(0,o.bA)(n.basis2,r,(c[1]-l[1])/2),(0,o.t8)(n.origin,l[0]*t[0]+l[1]*r[0],l[0]*t[1]+l[1]*r[1]),(0,o.IH)(n.origin,n.origin,n.basis1),(0,o.IH)(n.origin,n.origin,n.basis2),(0,s.u)(n),n}}}]);
//# sourceMappingURL=29606.cc1afb60.chunk.js.map