"use strict";(self.webpackChunknorthwind=self.webpackChunknorthwind||[]).push([[91836,60050],{21389:(e,t,a)=>{function n(){return[1,0,0,0,1,0,0,0,1]}function r(e){return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]]}function o(e,t,a,n,r,o,l,i,s){return[e,t,a,n,r,o,l,i,s]}a.d(t,{Ue:()=>n,Wd:()=>l,al:()=>o,d9:()=>r});const l=[1,0,0,0,1,0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:l,clone:r,create:n,createView:function(e,t){return new Float64Array(e,t,9)},fromValues:o},Symbol.toStringTag,{value:"Module"}))},7025:(e,t,a)=>{function n(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function r(e){return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]]}function o(e,t,a,n,r,o,l,i,s,u,d,c,p,h,f,m){return[e,t,a,n,r,o,l,i,s,u,d,c,p,h,f,m]}a.d(t,{Ue:()=>n,Wd:()=>l,al:()=>o,d9:()=>r});const l=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:l,clone:r,create:n,createView:function(e,t){return new Float64Array(e,t,16)},fromValues:o},Symbol.toStringTag,{value:"Module"}))},50894:(e,t,a)=>{function n(){return[0,0,0,1]}function r(e){return[e[0],e[1],e[2],e[3]]}function o(e,t,a,n){return[e,t,a,n]}a.d(t,{Ue:()=>n,Wd:()=>l,al:()=>o,d9:()=>r});const l=[0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:l,clone:r,create:n,createView:function(e,t){return new Float64Array(e,t,4)},fromValues:o},Symbol.toStringTag,{value:"Module"}))},68700:(e,t,a)=>{a.d(t,{Bh:()=>d,I6:()=>U,Jp:()=>c,Kx:()=>f,Su:()=>y,U_:()=>h,b0:()=>j,t8:()=>v,yY:()=>u});var n=a(21389),r=a(50894),o=a(12400),l=a(24204),i=a(32035),s=a(19093);function u(e,t,a){a*=.5;const n=Math.sin(a);return e[0]=n*t[0],e[1]=n*t[1],e[2]=n*t[2],e[3]=Math.cos(a),e}function d(e,t){const a=2*Math.acos(t[3]),n=Math.sin(a/2);return n>(0,l.bn)()?(e[0]=t[0]/n,e[1]=t[1]/n,e[2]=t[2]/n):(e[0]=1,e[1]=0,e[2]=0),a}function c(e,t,a){const n=t[0],r=t[1],o=t[2],l=t[3],i=a[0],s=a[1],u=a[2],d=a[3];return e[0]=n*d+l*i+r*u-o*s,e[1]=r*d+l*s+o*i-n*u,e[2]=o*d+l*u+n*s-r*i,e[3]=l*d-n*i-r*s-o*u,e}function p(e,t,a,n){const r=t[0],o=t[1],i=t[2],s=t[3];let u,d,c,p,h,f=a[0],m=a[1],y=a[2],g=a[3];return d=r*f+o*m+i*y+s*g,d<0&&(d=-d,f=-f,m=-m,y=-y,g=-g),1-d>(0,l.bn)()?(u=Math.acos(d),c=Math.sin(u),p=Math.sin((1-n)*u)/c,h=Math.sin(n*u)/c):(p=1-n,h=n),e[0]=p*r+h*f,e[1]=p*o+h*m,e[2]=p*i+h*y,e[3]=p*s+h*g,e}function h(e,t){const a=t[0],n=t[1],r=t[2],o=t[3],l=a*a+n*n+r*r+o*o,i=l?1/l:0;return e[0]=-a*i,e[1]=-n*i,e[2]=-r*i,e[3]=o*i,e}function f(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e}function m(e,t){const a=t[0]+t[4]+t[8];let n;if(a>0)n=Math.sqrt(a+1),e[3]=.5*n,n=.5/n,e[0]=(t[5]-t[7])*n,e[1]=(t[6]-t[2])*n,e[2]=(t[1]-t[3])*n;else{let a=0;t[4]>t[0]&&(a=1),t[8]>t[3*a+a]&&(a=2);const r=(a+1)%3,o=(a+2)%3;n=Math.sqrt(t[3*a+a]-t[3*r+r]-t[3*o+o]+1),e[a]=.5*n,n=.5/n,e[3]=(t[3*r+o]-t[3*o+r])*n,e[r]=(t[3*r+a]+t[3*a+r])*n,e[o]=(t[3*o+a]+t[3*a+o])*n}return e}function y(e,t,a,n){const r=.5*Math.PI/180;t*=r,a*=r,n*=r;const o=Math.sin(t),l=Math.cos(t),i=Math.sin(a),s=Math.cos(a),u=Math.sin(n),d=Math.cos(n);return e[0]=o*s*d-l*i*u,e[1]=l*i*d+o*s*u,e[2]=l*s*u-o*i*d,e[3]=l*s*d+o*i*u,e}const g=s.c,v=s.s,b=s.f,w=c,F=s.b,I=s.g,A=s.l,M=s.i,R=M,Z=s.j,S=Z,E=s.n,U=s.a,O=s.e;function j(e,t,a){const n=(0,i.m)(t,a);return n<-.999999?((0,i.b)(_,T,t),(0,i.H)(_)<1e-6&&(0,i.b)(_,x,t),(0,i.n)(_,_),u(e,_,Math.PI),e):n>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):((0,i.b)(_,t,a),e[0]=_[0],e[1]=_[1],e[2]=_[2],e[3]=1+n,E(e,e))}const _=(0,o.Ue)(),T=(0,o.al)(1,0,0),x=(0,o.al)(0,1,0);const k=(0,r.Ue)(),q=(0,r.Ue)();const L=(0,n.Ue)();Object.freeze(Object.defineProperty({__proto__:null,add:b,calculateW:function(e,t){const a=t[0],n=t[1],r=t[2];return e[0]=a,e[1]=n,e[2]=r,e[3]=Math.sqrt(Math.abs(1-a*a-n*n-r*r)),e},conjugate:f,copy:g,dot:I,equals:O,exactEquals:U,fromEuler:y,fromMat3:m,getAxisAngle:d,identity:function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e},invert:h,len:R,length:M,lerp:A,mul:w,multiply:c,normalize:E,random:function(e){const t=l.FD,a=t(),n=t(),r=t(),o=Math.sqrt(1-a),i=Math.sqrt(a);return e[0]=o*Math.sin(2*Math.PI*n),e[1]=o*Math.cos(2*Math.PI*n),e[2]=i*Math.sin(2*Math.PI*r),e[3]=i*Math.cos(2*Math.PI*r),e},rotateX:function(e,t,a){a*=.5;const n=t[0],r=t[1],o=t[2],l=t[3],i=Math.sin(a),s=Math.cos(a);return e[0]=n*s+l*i,e[1]=r*s+o*i,e[2]=o*s-r*i,e[3]=l*s-n*i,e},rotateY:function(e,t,a){a*=.5;const n=t[0],r=t[1],o=t[2],l=t[3],i=Math.sin(a),s=Math.cos(a);return e[0]=n*s-o*i,e[1]=r*s+l*i,e[2]=o*s+n*i,e[3]=l*s-r*i,e},rotateZ:function(e,t,a){a*=.5;const n=t[0],r=t[1],o=t[2],l=t[3],i=Math.sin(a),s=Math.cos(a);return e[0]=n*s+r*i,e[1]=r*s-n*i,e[2]=o*s+l*i,e[3]=l*s-o*i,e},rotationTo:j,scale:F,set:v,setAxes:function(e,t,a,n){const r=L;return r[0]=a[0],r[3]=a[1],r[6]=a[2],r[1]=n[0],r[4]=n[1],r[7]=n[2],r[2]=-t[0],r[5]=-t[1],r[8]=-t[2],E(e,m(e,r))},setAxisAngle:u,slerp:p,sqlerp:function(e,t,a,n,r,o){return p(k,t,r,o),p(q,a,n,o),p(e,k,q,2*o*(1-o)),e},sqrLen:S,squaredLength:Z,str:function(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}},Symbol.toStringTag,{value:"Module"}))},76046:(e,t,a)=>{a.d(t,{Z:()=>y});var n,r=a(27366),o=a(46784),l=a(49861),i=(a(93169),a(32718),a(84936),a(69912)),s=a(29134),u=a(7025),d=a(68700),c=a(50894),p=a(12400),h=a(45238);let f=n=class extends o.wq{constructor(e){super(e),this.translation=(0,p.Ue)(),this.rotationAxis=(0,p.nI)(h.up),this.rotationAngle=0,this.scale=(0,p.al)(1,1,1)}get rotation(){return(0,h.uT)(this.rotationAxis,this.rotationAngle)}set rotation(e){this.rotationAxis=(0,p.d9)((0,h.ZZ)(e)),this.rotationAngle=(0,h.EU)(e)}get localMatrix(){const e=(0,u.Ue)();return(0,d.yY)(m,(0,h.ZZ)(this.rotation),(0,h.WH)(this.rotation)),(0,s.Iw)(e,m,this.translation,this.scale),e}get localMatrixInverse(){return(0,s.U_)((0,u.Ue)(),this.localMatrix)}equals(e){return this===e||null!=e&&(0,s.I6)(this.localMatrix,e.localMatrix)}clone(){const e={translation:(0,p.d9)(this.translation),rotationAxis:(0,p.d9)(this.rotationAxis),rotationAngle:this.rotationAngle,scale:(0,p.d9)(this.scale)};return new n(e)}};(0,r._)([(0,l.Cb)({type:[Number],nonNullable:!0,json:{write:!0}})],f.prototype,"translation",void 0),(0,r._)([(0,l.Cb)({type:[Number],nonNullable:!0,json:{write:!0}})],f.prototype,"rotationAxis",void 0),(0,r._)([(0,l.Cb)({type:Number,nonNullable:!0,json:{write:!0}})],f.prototype,"rotationAngle",void 0),(0,r._)([(0,l.Cb)({type:[Number],nonNullable:!0,json:{write:!0}})],f.prototype,"scale",void 0),(0,r._)([(0,l.Cb)()],f.prototype,"rotation",null),(0,r._)([(0,l.Cb)()],f.prototype,"localMatrix",null),(0,r._)([(0,l.Cb)()],f.prototype,"localMatrixInverse",null),f=n=(0,r._)([(0,i.j)("esri.geometry.support.MeshTransform")],f);const m=(0,c.Ue)(),y=f},45238:(e,t,a)=>{a.d(t,{EU:()=>g,Ue:()=>d,WH:()=>v,ZZ:()=>y,q_:()=>h,qw:()=>m,uT:()=>c,up:()=>w,zk:()=>p});var n=a(16889),r=a(29134),o=a(68700),l=a(50894),i=a(32035),s=a(12400),u=a(86361);function d(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w;return[e[0],e[1],e[2],e[3]]}function c(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:d();return(0,i.c)(a,e),a[3]=t,a}function p(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,u.Ue)();return(0,i.b)(a,e,t),(0,i.n)(a,a),a[3]=-(0,i.d)(e,t),a}function h(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d();const a=(0,r.j6)(F,e);return b(t,(0,n.BV)((0,o.Bh)(t,a))),t}function f(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:d();return(0,o.yY)(F,e,v(e)),(0,o.yY)(I,t,v(t)),(0,o.Jp)(F,I,F),b(a,(0,n.BV)((0,o.Bh)(a,F)))}function m(e,t,a){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:d();return c(s.E9,e,A),c(s.IO,t,M),c(s.eG,a,R),f(A,M,A),f(A,R,n),n}function y(e){return e}function g(e){return e[3]}function v(e){return(0,n.Vl)(e[3])}function b(e,t){return e[3]=t,e}const w=[0,0,1,0],F=(0,l.Ue)(),I=(0,l.Ue)(),A=(d(),d()),M=d(),R=d()},91836:(e,t,a)=>{a.d(t,{CJ:()=>y,JK:()=>F,JX:()=>w,Q7:()=>v,RZ:()=>g,hw:()=>f,mh:()=>h});var n=a(52639),r=a(10064),o=a(32718),l=a(68860),i=a(35995),s=a(79803),u=a(77981),d=a(76046),c=a(92975),p=a(29887);async function h(e,t,a){const{geometry:n}=t,r={...t.attributes};if(null!=a&&"mesh"===(null===n||void 0===n?void 0:n.type)){var o,i;const{transformFieldRoles:t}=a,{origin:u,spatialReference:p,vertexSpace:h}=n,f=null!==(o=n.transform)&&void 0!==o?o:new d.Z,m="local"===h.type,y=e.spatialReference,g=y.isGeographic,v=(0,c.fS)(y,p),b=(0,s.isEqualBaseGCS)(p,y)&&(0,s.canProjectWithoutEngine)(p,y);if(!(m&&g&&b||!m&&!g&&v))return null;const w=(0,s.projectWithoutEngine)(u,p,y);if(null==w)return null;if(r[t.originX]=w.x,r[t.originY]=w.y,r[t.originZ]=null!==(i=w.z)&&void 0!==i?i:0,null!=f){const{translation:e,scale:a,rotation:n}=f,o=m?1:(0,l.r6)(p)/(0,l.r6)(y);r[t.translationX]=e[0]*o,r[t.translationY]=e[2]*o,r[t.translationZ]=-e[1]*o,r[t.scaleX]=a[0],r[t.scaleY]=a[2],r[t.scaleZ]=a[1],r[t.rotationX]=n[0],r[t.rotationY]=n[2],r[t.rotationZ]=-n[1],r[t.rotationDeg]=n[3]}return{attributes:r}}return null==n?{attributes:r}:"mesh"===n.type||"extent"===n.type?null:{geometry:n.toJSON(),attributes:r}}async function f(e,t){var a,n,r;const o=await Promise.all((null!==(a=t.addAttachments)&&void 0!==a?a:[]).map((t=>m(e,t)))),l=await Promise.all((null!==(n=t.updateAttachments)&&void 0!==n?n:[]).map((t=>m(e,t)))),i=null!==(r=t.deleteAttachments)&&void 0!==r?r:[];return o.length||l.length||i.length?{adds:o,updates:l,deletes:[...i]}:null}async function m(e,t){var a;const{feature:n,attachment:r}=t,{globalId:o,name:l,contentType:s,data:u,uploadId:d}=r,c={globalId:o};if(n&&("attributes"in n?c.parentGlobalId=null===(a=n.attributes)||void 0===a?void 0:a[e.globalIdField]:n.globalId&&(c.parentGlobalId=n.globalId)),d)c.uploadId=d;else if(u){const e=await(0,i.IR)(u);e&&(c.contentType=e.mediaType,c.data=e.data),u instanceof File&&(c.name=u.name)}return l&&(c.name=l),s&&(c.contentType=s),c}function y(e,t,a){if(!t||0===t.length)return[];if(a&&(0,p.Ey)(t))return t.map((e=>e.globalId));if((0,p.aw)(t))return t.map((e=>e.objectId));const n=a?e.globalIdField:e.objectIdField;return n?t.map((e=>e.getAttribute(n))):[]}function g(e){var t,a,n,r,l,i;const s=null===e||void 0===e?void 0:e.assetMaps;if(s){for(const e of s.addResults)e.success||o.Z.getLogger("esri.layers.graphics.sources.support.sourceUtils").error("Failed to map asset to feature with globalId ".concat(e.globalId,"."));for(const e of s.updateResults)e.success||o.Z.getLogger("esri.layers.graphics.sources.support.sourceUtils").error("Failed to map asset to feature with globalId ".concat(e.globalId,"."))}const u=null===e||void 0===e?void 0:e.attachments,d={addFeatureResults:null!==(t=null===e||void 0===e||null===(a=e.addResults)||void 0===a?void 0:a.map(v))&&void 0!==t?t:[],updateFeatureResults:null!==(n=null===e||void 0===e||null===(r=e.updateResults)||void 0===r?void 0:r.map(v))&&void 0!==n?n:[],deleteFeatureResults:null!==(l=null===e||void 0===e||null===(i=e.deleteResults)||void 0===i?void 0:i.map(v))&&void 0!==l?l:[],addAttachmentResults:null!==u&&void 0!==u&&u.addResults?u.addResults.map(v):[],updateAttachmentResults:null!==u&&void 0!==u&&u.updateResults?u.updateResults.map(v):[],deleteAttachmentResults:null!==u&&void 0!==u&&u.deleteResults?u.deleteResults.map(v):[]};return null!==e&&void 0!==e&&e.editMoment&&(d.editMoment=e.editMoment),d}function v(e){const t=!0===e.success?null:e.error||{code:void 0,description:void 0};return{objectId:e.objectId,globalId:e.globalId,error:t?new r.Z("feature-layer-source:edit-failure",t.description,{code:t.code}):null}}function b(e,t){return new n.Z({attributes:e.attributes,geometry:(0,u.im)({...e.geometry,spatialReference:t})})}function w(e,t){var a,n,r;return{adds:(null===e||void 0===e||null===(a=e.adds)||void 0===a?void 0:a.map((e=>b(e,t))))||[],updates:(null===e||void 0===e||null===(n=e.updates)||void 0===n?void 0:n.map((e=>({original:b(e[0],t),current:b(e[1],t)}))))||[],deletes:(null===e||void 0===e||null===(r=e.deletes)||void 0===r?void 0:r.map((e=>b(e,t))))||[],spatialReference:t}}function F(e){const t=e.details.raw,a=+t.code,n=+t.extendedCode;return 500===a&&(-2147217144===n||-2147467261===n)}},29887:(e,t,a)=>{a.d(t,{EE:()=>Z,Ey:()=>F,X2:()=>S,applyEdits:()=>I,aw:()=>b,uploadAssets:()=>j,w4:()=>E});var n=a(52639),r=a(80987),o=a(10064),l=a(84652),i=a(32718),s=a(66978),u=a(35995),d=a(71907),c=a(91340),p=a(92975),h=a(56601),f=a(37270),m=a(18277),y=a(37933);function g(e){return null!=(null===e||void 0===e?void 0:e.applyEdits)}function v(e){return"object"==typeof e&&null!=e&&"objectId"in e&&!!e.objectId}function b(e){return e.every(v)}function w(e){return"object"==typeof e&&null!=e&&"globalId"in e&&!!e.globalId}function F(e){return e.every(w)}async function I(e,t,a){var n;let r,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const c="gdbVersion"in e?e.gdbVersion:null,p=null!==(n=u.gdbVersion)&&void 0!==n?n:c;if((0,h.lQ)(e)&&e.url)r=(0,h.jF)(e.url,e.layerId,p,"original-and-current-features"===u.returnServiceEditsOption);else{r=(0,s.hh)(),r.promise.then((t=>{(t.addedFeatures.length||t.updatedFeatures.length||t.deletedFeatures.length||t.addedAttachments.length||t.updatedAttachments.length||t.deletedAttachments.length)&&e.emit("edits",t)}));const t={result:r.promise};e.emit("apply-edits",t)}try{var f;const{results:n,edits:s}=await async function(e,t,a,n){var r,l,s,u,c,p;if(await e.load(),!g(t))throw new o.Z("".concat(e.type,"-layer:no-editing-support"),"Layer source does not support applyEdits capability",{layer:e});if(!(0,y.ln)(e))throw new o.Z("".concat(e.type,"-layer:editing-disabled"),"Editing is disabled for layer",{layer:e});const{edits:h,options:f}=await async function(e,t,a){const n=(0,y.S1)(e),r=t&&(t.addFeatures||t.updateFeatures||t.deleteFeatures),l=t&&(t.addAttachments||t.updateAttachments||t.deleteAttachments),s=null!=e.infoFor3D;if(E(t,n,a,!!r,!!l,"".concat(e.type,"-layer")),!n.data.isVersioned&&null!==a&&void 0!==a&&a.gdbVersion)throw new o.Z("".concat(e.type,"-layer:invalid-parameter"),"'gdbVersion' is applicable only if the layer supports versioned data. See: 'capabilities.data.isVersioned'");if(!n.editing.supportsRollbackOnFailure&&null!==a&&void 0!==a&&a.rollbackOnFailureEnabled)throw new o.Z("".concat(e.type,"-layer:invalid-parameter"),"This layer does not support 'rollbackOnFailureEnabled' parameter. See: 'capabilities.editing.supportsRollbackOnFailure'");const u={...a};if(null!=u.rollbackOnFailureEnabled||n.editing.supportsRollbackOnFailure||(u.rollbackOnFailureEnabled=!0),u.rollbackOnFailureEnabled||"original-and-current-features"!==u.returnServiceEditsOption||(!1===u.rollbackOnFailureEnabled&&i.Z.getLogger("esri.layers.graphics.editingSupport").warn("".concat(e.type,"-layer:invalid-parameter"),"'original-and-current-features' is valid for 'returnServiceEditsOption' only when 'rollBackOnFailure' is true, but 'rollBackOnFailure' was set to false. 'rollBackOnFailure' has been overwritten and set to true."),u.rollbackOnFailureEnabled=!0),!n.editing.supportsReturnServiceEditsInSourceSpatialReference&&u.returnServiceEditsInSourceSR)throw new o.Z("".concat(e.type,"-layer:invalid-parameter"),"This layer does not support 'returnServiceEditsInSourceSR' parameter. See: 'capabilities.editing.supportsReturnServiceEditsInSourceSpatialReference'");if(u.returnServiceEditsInSourceSR&&"original-and-current-features"!==u.returnServiceEditsOption)throw new o.Z("".concat(e.type,"-layer:invalid-parameter"),"'returnServiceEditsInSourceSR' is valid only when 'returnServiceEditsOption' is set to 'original-and-current-features'");const c=S(t,n,"".concat(e.type,"-layer")),p=(null===a||void 0===a?void 0:a.globalIdUsed)||s,h=e.fields.filter((e=>"big-integer"===e.type||"oid"===e.type&&(e.length||0)>=8));if(p){const{globalIdField:t}=e;if(null==t)throw new o.Z("".concat(e.type,"-layer:invalid-parameter"),"Layer does not specify a global id field.");c.addFeatures.forEach((e=>function(e,t){const{attributes:a}=e;null==a[t]&&(a[t]=(0,d.zS)())}(e,t)))}return c.addFeatures.forEach((t=>function(e,t,a,n){A(e,t,a,n),M(e,t)}(t,e,p,h))),c.updateFeatures.forEach((t=>function(e,t,a,n){A(e,t,a,n),M(e,t);const r=(0,y.S1)(t);if("geometry"in e&&null!=e.geometry&&(null===r||void 0===r||!r.editing.supportsGeometryUpdate))throw new o.Z("".concat(t.type,"-layer:unsupported-operation"),"Layer does not support geometry updates.")}(t,e,p,h))),c.deleteFeatures.forEach((t=>function(e,t,a,n){A(e,t,a,n)}(t,e,p,h))),c.addAttachments.forEach((t=>R(t,e))),c.updateAttachments.forEach((t=>R(t,e))),s&&await async function(e,t){var a,n;if(null==t.infoFor3D)return;const{infoFor3D:r}=t,l=null!==(a=(0,m.S0)("model/gltf-binary",r.supportedFormats))&&void 0!==a?a:(0,m.Ow)("glb",r.supportedFormats);if(!l||!r.editFormats.includes(l))throw new o.Z("".concat(t.type,"-layer:binary-gltf-asset-not-supported"),"3DObjectFeatureLayer requires binary glTF (.glb) support for updating mesh geometry.");null!==(n=e.addAssetFeatures)&&void 0!==n||(e.addAssetFeatures=[]);const{addAssetFeatures:i}=e;for(const o of null!==(s=e.addFeatures)&&void 0!==s?s:[]){var s;O(o)&&i.push(o)}for(const o of null!==(u=e.updateFeatures)&&void 0!==u?u:[]){var u;O(o)&&i.push(o)}}(c,e),{edits:await Z(c),options:u}}(e,a,n);return null!==(r=h.addFeatures)&&void 0!==r&&r.length||null!==(l=h.updateFeatures)&&void 0!==l&&l.length||null!==(s=h.deleteFeatures)&&void 0!==s&&s.length||null!==(u=h.addAttachments)&&void 0!==u&&u.length||null!==(c=h.updateAttachments)&&void 0!==c&&c.length||null!==(p=h.deleteAttachments)&&void 0!==p&&p.length?{edits:h,results:await t.applyEdits(h,f)}:{edits:h,results:{addFeatureResults:[],updateFeatureResults:[],deleteFeatureResults:[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}}(e,t,a,u),c=e=>e.filter((e=>!e.error)).map(l.d9),p={edits:s,addedFeatures:c(n.addFeatureResults),updatedFeatures:c(n.updateFeatureResults),deletedFeatures:c(n.deleteFeatureResults),addedAttachments:c(n.addAttachmentResults),updatedAttachments:c(n.updateAttachmentResults),deletedAttachments:c(n.deleteAttachmentResults),exceededTransferLimit:!1,historicMoment:n.editMoment?new Date(n.editMoment):null,globalIdToObjectId:u.globalIdToObjectId};return null!==(f=n.editedFeatureResults)&&void 0!==f&&f.length&&(p.editedFeatures=n.editedFeatureResults),r.resolve(p),n}catch(v){throw r.reject(v),v}}function A(e,t,a,n){if(a){if("attributes"in e&&!e.attributes[t.globalIdField])throw new o.Z("".concat(t.type,"-layer:invalid-parameter"),"Feature should have '".concat(t.globalIdField,"' when 'globalIdUsed' is true"));if(!("attributes"in e)&&!e.globalId)throw new o.Z("".concat(t.type,"-layer:invalid-parameter"),"`'globalId' of the feature should be passed when 'globalIdUsed' is true")}if(n.length&&"attributes"in e)for(const i of n){const a=e.attributes[i.name];if(void 0!==a&&!(0,f.d2)(i,a))throw new o.Z("".concat(t.type,"-layer:invalid-parameter"),"Big-integer field '".concat(i.name,"' of the feature must be less than ").concat(Number.MAX_SAFE_INTEGER),{feature:e})}if("geometry"in e&&null!=e.geometry){var r,l;if(e.geometry.hasZ&&!1===(null===(r=t.capabilities)||void 0===r?void 0:r.data.supportsZ))throw new o.Z("".concat(t.type,"-layer:z-unsupported"),"Layer does not support z values while feature has z values.");if(e.geometry.hasM&&!1===(null===(l=t.capabilities)||void 0===l?void 0:l.data.supportsM))throw new o.Z("".concat(t.type,"-layer:m-unsupported"),"Layer does not support m values while feature has m values.")}}function M(e,t){var a;if("geometry"in e&&"mesh"===(null===(a=e.geometry)||void 0===a?void 0:a.type)&&null!=t.infoFor3D&&null!=t.spatialReference){const{geometry:a}=e,{spatialReference:n,vertexSpace:r}=a,l=t.spatialReference,i="local"===r.type,s=(0,p.sT)(l),u=(0,p.fS)(l,n),d=u||(0,p.oR)(l)&&((0,p.oR)(n)||(0,p.sS)(n));if(!(i&&s&&d||!i&&!s&&u))throw new o.Z("".concat(t.type,"-layer:mesh-unsupported"),"Uploading a mesh with a ".concat(r.type," vertex space and a spatial reference wkid:").concat(n.wkid," to a layer with a spatial reference wkid:").concat(l.wkid," is not supported."))}}function R(e,t){var a;const{feature:n,attachment:r}=e;if(!n||"attributes"in n&&!n.attributes[t.globalIdField])throw new o.Z("".concat(t.type,"-layer:invalid-parameter"),"Attachment should have reference to a feature with 'globalId'");if(!("attributes"in n)&&!n.globalId)throw new o.Z("".concat(t.type,"-layer:invalid-parameter"),"Attachment should have reference to 'globalId' of the parent feature");if(!r.globalId)throw new o.Z("".concat(t.type,"-layer:invalid-parameter"),"Attachment should have 'globalId'");if(!r.data&&!r.uploadId)throw new o.Z("".concat(t.type,"-layer:invalid-parameter"),"Attachment should have 'data' or 'uploadId'");if(!(r.data instanceof File&&r.data.name)&&!r.name)throw new o.Z("".concat(t.type,"-layer:invalid-parameter"),"'name' is required when attachment is specified as Base64 encoded string using 'data'");if((null===(a=t.capabilities)||void 0===a||!a.editing.supportsUploadWithItemId)&&r.uploadId)throw new o.Z("".concat(t.type,"-layer:invalid-parameter"),"This layer does not support 'uploadId' parameter. See: 'capabilities.editing.supportsUploadWithItemId'");if("string"==typeof r.data){const e=(0,u.sJ)(r.data);if(e&&!e.isBase64)throw new o.Z("".concat(t.type,"-layer:invalid-parameter"),"Attachment 'data' should be a Blob, File or Base64 encoded string")}}async function Z(e){var t,a;const n=null!==(t=e.addFeatures)&&void 0!==t?t:[],r=null!==(a=e.updateFeatures)&&void 0!==a?a:[],o=n.concat(r).map((e=>e.geometry)),l=await(0,c.aX)(o),i=n.length,s=r.length;return l.slice(0,i).forEach(((e,t)=>n[t].geometry=e)),l.slice(i,i+s).forEach(((e,t)=>r[t].geometry=e)),e}function S(e,t,a){var n,l,i;const s=function(e){var t,a;return{addFeatures:Array.from(null!==(t=null===e||void 0===e?void 0:e.addFeatures)&&void 0!==t?t:[]),updateFeatures:Array.from(null!==(a=null===e||void 0===e?void 0:e.updateFeatures)&&void 0!==a?a:[]),deleteFeatures:e&&r.Z.isCollection(e.deleteFeatures)?e.deleteFeatures.toArray():e.deleteFeatures||[],addAttachments:e.addAttachments||[],updateAttachments:e.updateAttachments||[],deleteAttachments:e.deleteAttachments||[]}}(e);if(null!==(n=s.addFeatures)&&void 0!==n&&n.length&&!t.operations.supportsAdd)throw new o.Z("".concat(a,":unsupported-operation"),"Layer does not support adding features.");if(null!==(l=s.updateFeatures)&&void 0!==l&&l.length&&!t.operations.supportsUpdate)throw new o.Z("".concat(a,":unsupported-operation"),"Layer does not support updating features.");if(null!==(i=s.deleteFeatures)&&void 0!==i&&i.length&&!t.operations.supportsDelete)throw new o.Z("".concat(a,":unsupported-operation"),"Layer does not support deleting features.");return s.addFeatures=s.addFeatures.map(U),s.updateFeatures=s.updateFeatures.map(U),s.addAssetFeatures=[],s}function E(e,t,a,n,r,l){if(!e||!n&&!r)throw new o.Z("".concat(l,":missing-parameters"),"'addFeatures', 'updateFeatures', 'deleteFeatures', 'addAttachments', 'updateAttachments' or 'deleteAttachments' parameter is required");if(!t.editing.supportsGlobalId&&null!==a&&void 0!==a&&a.globalIdUsed)throw new o.Z("".concat(l,":invalid-parameter"),"This layer does not support 'globalIdUsed' parameter. See: 'capabilities.editing.supportsGlobalId'");if(!t.editing.supportsGlobalId&&r)throw new o.Z("".concat(l,":invalid-parameter"),"'addAttachments', 'updateAttachments' and 'deleteAttachments' are applicable only if the layer supports global ids. See: 'capabilities.editing.supportsGlobalId'");if((null===a||void 0===a||!a.globalIdUsed)&&r)throw new o.Z("".concat(l,":invalid-parameter"),"When 'addAttachments', 'updateAttachments' or 'deleteAttachments' is specified, globalIdUsed should be set to true")}function U(e){const t=new n.Z;return e.attributes||(e.attributes={}),t.geometry=e.geometry,t.attributes=e.attributes,t}function O(e){var t;return"mesh"===(null===e||void 0===e||null===(t=e.geometry)||void 0===t?void 0:t.type)}function j(e,t,a,n){if(!g(t))throw new o.Z("".concat(e.type,"-layer:no-editing-support"),"Layer source does not support applyEdits capability",{layer:e});if(!t.uploadAssets)throw new o.Z("".concat(e.type,"-layer:no-asset-upload-support"),"Layer source does not support uploadAssets capability",{layer:e});return t.uploadAssets(a,n)}}}]);
//# sourceMappingURL=91836.037a6a98.chunk.js.map