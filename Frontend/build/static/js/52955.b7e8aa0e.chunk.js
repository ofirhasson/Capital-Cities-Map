"use strict";(self.webpackChunknorthwind=self.webpackChunknorthwind||[]).push([[52955],{91953:(e,t,i)=>{i.d(t,{b$:()=>s,mR:()=>o,uS:()=>n});i(59166);var l=i(8704);function o(e){return e.icon?e.icon:"image"in e&&e.image||e.className?void 0:"question"}function n(e){return e?{backgroundImage:"url(".concat(e,")")}:{}}function s(e){let{action:t,feature:i}=e;const o=null===i||void 0===i?void 0:i.attributes,n="image"in t?t.image:void 0;return n&&o?(0,l.n)(n,o):null!==n&&void 0!==n?n:""}},52955:(e,t,i)=>{i.r(t),i.d(t,{default:()=>k});var l=i(27366),o=i(80987),n=i(44927),s=i(79056),a=i(32718),r=i(18442),c=i(94172),d=i(49861),u=(i(93169),i(84936),i(69912)),m=i(91953),h=i(33565);const p="esri-layer-list",v="".concat(p,"__item"),g={base:p,actionMenu:"".concat(p,"__action-menu"),actionGroup:"".concat(p,"__action-group"),filterNoResults:"".concat(p,"__filter-no-results"),item:v,itemActive:"".concat(v,"--active"),itemContent:"".concat(v,"-content"),itemContentBottom:"".concat(v,"-content-bottom"),itemMessage:"".concat(v,"-message"),itemInvisible:"".concat(v,"--invisible"),itemActionIcon:"".concat(v,"-action-icon"),itemActionImage:"".concat(v,"-action-image"),itemTemporaryIcon:"".concat(v,"-temporary-icon"),itemTableIcon:"".concat(v,"-table-icon"),itemCatalogIcon:"".concat(v,"-catalog-icon"),statusIndicator:"".concat(p,"__status-indicator"),publishing:"".concat(p,"__publishing"),updating:"".concat(p,"__updating"),connectionStatus:"".concat(p,"__connection-status"),connectionStatusConnected:"".concat(p,"__connection-status--connected"),visibleToggle:"".concat(p,"__visible-toggle"),visibleIcon:"".concat(p,"__visible-icon")};var _=i(69735),b=i(7138);let y=class extends b.default{constructor(){super(...arguments),this.catalogLayerList=!0,this.closeButton=!1,this.collapseButton=!1,this.errors=!1,this.filter=!1,this.flow=!0,this.heading=!1,this.statusIndicators=!0,this.temporaryLayerIndicators=!1}};(0,l._)([(0,d.Cb)({type:Boolean,nonNullable:!0})],y.prototype,"catalogLayerList",void 0),(0,l._)([(0,d.Cb)({type:Boolean,nonNullable:!0})],y.prototype,"closeButton",void 0),(0,l._)([(0,d.Cb)({type:Boolean,nonNullable:!0})],y.prototype,"collapseButton",void 0),(0,l._)([(0,d.Cb)({type:Boolean,nonNullable:!0})],y.prototype,"errors",void 0),(0,l._)([(0,d.Cb)({type:Boolean,nonNullable:!0})],y.prototype,"filter",void 0),(0,l._)([(0,d.Cb)({type:Boolean,nonNullable:!0})],y.prototype,"flow",void 0),(0,l._)([(0,d.Cb)({type:Boolean,nonNullable:!0})],y.prototype,"heading",void 0),(0,l._)([(0,d.Cb)({type:Boolean,nonNullable:!0})],y.prototype,"statusIndicators",void 0),(0,l._)([(0,d.Cb)({type:Boolean,nonNullable:!0})],y.prototype,"temporaryLayerIndicators",void 0),y=(0,l._)([(0,u.j)("esri.widgets.LayerList.LayerListVisibleElements")],y);const I=y;var f=i(89500),C=i(9309),w=i(8905),L=i(7021),E=(i(80975),i(80532)),F=i(28907),M=i(67005);const A=o.Z.ofType(f.Z);let T=class extends((0,s.IG)(h.Z)){constructor(e,t){super(e,t),this._activeItem=null,this._tooltipReferenceMap=new r.Z,this._focusRootFlowItem=!1,this._focusPanelFlowItem=!1,this._focusTableListFlowItem=!1,this._focusCatalogFlowItem=!1,this._lastDragDetail=null,this._selectedDragItemLayerUid=null,this._rootGroupUid="operational-".concat(this.uid),this.catalogLayerList=null,this.catalogOptions=null,this.collapsed=!1,this.dragEnabled=!1,this.filterPlaceholder="",this.filterText="",this.headingLevel=2,this.knowledgeGraphOptions=null,this.listItemCanGiveFunction=null,this.listItemCanReceiveFunction=null,this.messages=null,this.messagesCommon=null,this.minDragEnabledItems=C.MZ,this.minFilterItems=C.Kp,this.openCatalogItem=null,this.openTableListItem=null,this.selectedItems=new A,this.selectionMode="none",this.tableList=null,this.viewModel=new _.Z,this.visibilityAppearance="default",this.visibleElements=new I,this._canMove=(e,t)=>{var i,l,o,n,s;let{dragEl:a,fromEl:r,toEl:c}=e;const d="pull"===t?this.listItemCanGiveFunction:this.listItemCanReceiveFunction,u=(0,C.rV)(a);if(null===u||void 0===u||!u.sortable)return!1;const m=(0,C.rV)(r),h=(0,C.Gr)(r),p=(0,C.rV)(c),v=(0,C.Gr)(c),g=!!h&&!!v&&h===v,_={selected:u,from:m,to:p},b=r.group,y=c.group,I=null!==(i=null===m||void 0===m||null===(l=m.layer)||void 0===l?void 0:l.type)&&void 0!==i?i:"",f=null!==(o=null===p||void 0===p||null===(n=p.layer)||void 0===n?void 0:n.type)&&void 0!==o?o:"",w=new Set(["map-image","catalog","knowledge-graph"]);return b&&y&&"function"==typeof d?d.call(null,_):g&&!w.has(I)&&!w.has(f)&&"sublayer"!==(null===u||void 0===u||null===(s=u.layer)||void 0===s?void 0:s.type)},this._clearActiveItem=()=>{this._activeItem=null},this._setActiveItem=e=>{if("default"!==this.visibilityAppearance)return;const t=Array.from(e.composedPath()).find((e=>{var t;return null===(t=e.classList)||void 0===t?void 0:t.contains(g.item)}));this._activeItem=(0,C.rV)(t)},this._onCalciteListOrderChange=e=>{const{_lastDragDetail:t}=this,{toEl:i,fromEl:l,dragEl:o,newIndex:n}=e;if(l&&i&&((null===t||void 0===t?void 0:t.newIndex)!==n||(null===t||void 0===t?void 0:t.dragEl)!==o||(null===t||void 0===t?void 0:t.toEl)!==i||(null===t||void 0===t?void 0:t.fromEl)!==l))if(this._lastDragDetail=e,l!==i)this._moveLayerFromChildList({toEl:i,fromEl:l,dragEl:o,newIndex:n});else{const e=Array.from(l.children).filter((e=>null===e||void 0===e?void 0:e.matches("calcite-list-item"))).map((e=>e.value));this._sortLayers(l,e)}}}initialize(){this.addHandles([(0,c.watch)((()=>this.openCatalogItem),(e=>e?this._createCatalog():this._destroyCatalog())),(0,c.watch)((()=>this.openTableListItem),(e=>e?this._createTableList():this._destroyTableList()))])}loadDependencies(){return(0,w.h)({action:()=>Promise.all([i.e(92358),i.e(46895),i.e(65138),i.e(91741)]).then(i.bind(i,6814)),"action-group":()=>Promise.all([i.e(92358),i.e(46895),i.e(89219),i.e(63839),i.e(65138),i.e(2654),i.e(23635),i.e(70405)]).then(i.bind(i,70405)),"action-menu":()=>Promise.all([i.e(92358),i.e(46895),i.e(89219),i.e(63839),i.e(65138),i.e(2654),i.e(23635),i.e(24745)]).then(i.bind(i,24745)),button:()=>Promise.all([i.e(92358),i.e(46895),i.e(54438),i.e(14105),i.e(32275)]).then(i.bind(i,32275)),flow:()=>i.e(53049).then(i.bind(i,53049)),"flow-item":()=>Promise.all([i.e(92358),i.e(46895),i.e(89219),i.e(63839),i.e(65138),i.e(2654),i.e(23635),i.e(89524),i.e(48926)]).then(i.bind(i,48926)),icon:()=>Promise.all([i.e(92358),i.e(87474)]).then(i.bind(i,87474)),list:()=>Promise.all([i.e(92358),i.e(46895),i.e(54438),i.e(34504),i.e(8715),i.e(38782)]).then(i.bind(i,38782)),"list-item":()=>Promise.all([i.e(92358),i.e(46895),i.e(65138),i.e(21340)]).then(i.bind(i,67994)),notice:()=>Promise.all([i.e(92358),i.e(46895),i.e(15669)]).then(i.bind(i,15669)),tooltip:()=>Promise.all([i.e(92358),i.e(89219),i.e(94730)]).then(i.bind(i,94730))})}destroy(){this._destroyTableList(),this._tooltipReferenceMap.clear()}get _totalItems(){return this.viewModel.operationalItems.flatten((e=>e.children.filter((e=>"catalog-dynamic-group"!==e.layer.type)))).length}get _dragEnabled(){return this._totalItems>=this.minDragEnabledItems&&this.dragEnabled}get _filterEnabled(){return this._totalItems>=this.minFilterItems&&this.visibleElements.filter}get icon(){return"layers"}set icon(e){this._overrideIfSome("icon",e)}get label(){var e,t;return null!==(e=null===(t=this.messages)||void 0===t?void 0:t.widgetLabel)&&void 0!==e?e:""}set label(e){this._overrideIfSome("label",e)}get listItemCreatedFunction(){return this.viewModel.listItemCreatedFunction}set listItemCreatedFunction(e){this.viewModel.listItemCreatedFunction=e}get multipleSelectionEnabled(){return(0,n.Mr)(a.Z.getLogger(this),"multipleSelectionEnabled",{replacement:"selectionMode",version:"4.29",warnOnce:!0}),"multiple"===this.selectionMode}set multipleSelectionEnabled(e){(0,n.Mr)(a.Z.getLogger(this),"multipleSelectionEnabled",{replacement:"selectionMode",version:"4.29",warnOnce:!0}),this.selectionMode=e?"multiple":this.selectionEnabled?"single":"none"}get operationalItems(){return this.viewModel.operationalItems}set operationalItems(e){this.viewModel.operationalItems=e}get selectionEnabled(){return(0,n.Mr)(a.Z.getLogger(this),"selectionEnabled",{replacement:"selectionMode, dragEnabled",version:"4.29",warnOnce:!0}),"none"!==this.selectionMode&&this.dragEnabled}set selectionEnabled(e){(0,n.Mr)(a.Z.getLogger(this),"selectionEnabled",{replacement:"selectionMode, dragEnabled",version:"4.29",warnOnce:!0}),this.dragEnabled=e,this.selectionMode=e?this.multipleSelectionEnabled?"multiple":"single":"none"}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}triggerAction(e,t){return this.viewModel.triggerAction(e,t)}render(){var e,t;const i=null===(e=this.viewModel)||void 0===e?void 0:e.state,l={[L.z.hidden]:"loading"===i,[L.z.disabled]:"disabled"===i},o=null===(t=this.operationalItems)||void 0===t?void 0:t.filter((e=>!e.hidden&&(this.visibleElements.errors||!e.error)));return(0,M.u)("div",{class:this.classes(g.base,L.z.widget,L.z.panel,l)},null!==o&&void 0!==o&&o.length?[this._renderItemTooltips(o),this._renderItems(o)]:this._renderNoItems())}_renderItemTooltip(e){const{_tooltipReferenceMap:t,messages:i}=this;return e?(0,M.u)("calcite-tooltip",{key:"tooltip-".concat(e.layer.uid),referenceElement:t.get(e.layer.uid)},i.layerIncompatibleTooltip):null}_renderItemTooltipNodes(e){var t;return e.incompatible?this._renderItemTooltip(e):null===(t=e.children)||void 0===t?void 0:t.filter((e=>!e.hidden)).toArray().map((e=>this._renderItemTooltipNodes(e)))}_renderItemTooltips(e){return null===e||void 0===e?void 0:e.toArray().map((e=>this._renderItemTooltipNodes(e)))}_renderNoItemsMessage(){return(0,M.u)("div",{slot:"message"},this.messages.noItemsToDisplay)}_renderNoItems(){return(0,M.u)("div",{class:g.itemMessage,key:"esri-layer-list__no-items"},(0,M.u)("calcite-notice",{icon:"information",kind:"info",open:!0,width:"full"},this._renderNoItemsMessage()))}_destroyCatalog(){var e;null!==(e=this.catalogLayerList)&&void 0!==e&&e.destroy(),this._set("catalogLayerList",null)}_destroyTableList(){var e;null!==(e=this.tableList)&&void 0!==e&&e.destroy(),this._set("tableList",null)}async _createCatalog(){var e;this._destroyCatalog();const{default:t}=await i.e(97145).then(i.bind(i,97145)),{headingLevel:l,catalogOptions:o,view:n,filterPlaceholder:s,listItemCreatedFunction:a,minFilterItems:r,selectionMode:c,visibilityAppearance:d}=this,u=null===(e=this.openCatalogItem)||void 0===e?void 0:e.layer;this._set("catalogLayerList",new t({headingLevel:l,view:n,filterPlaceholder:s,listItemCreatedFunction:a,minFilterItems:r,selectionMode:c,visibilityAppearance:d,...o,catalogLayer:u}))}_getTableListParams(e){const t=null===e||void 0===e?void 0:e.layer;return"knowledge-graph"===(null===t||void 0===t?void 0:t.type)?{...this.knowledgeGraphOptions,tables:null===t||void 0===t?void 0:t.tables}:null}async _createTableList(){var e;this._destroyTableList();const{default:t}=await i.e(35434).then(i.bind(i,58904)),l=this._getTableListParams(this.openTableListItem);if(null===l||void 0===l||null===(e=l.tables)||void 0===e||!e.length)return;const{headingLevel:o,selectionMode:n,dragEnabled:s}=this;this._set("tableList",new t({headingLevel:o,selectionMode:n,dragEnabled:s,...l}))}_renderCatalogFlowItem(){var e;const{openCatalogItem:t,messages:i}=this;if(!t)return null;const l=this._getLayerTitle(t);return(0,M.u)("calcite-flow-item",{afterCreate:this._focusCatalogFlowItemNode,afterUpdate:this._focusCatalogFlowItemNode,bind:this,description:l,heading:i.catalogLayers,headingLevel:this.headingLevel,key:"flow-catalog-".concat(t.uid),onCalciteFlowItemBack:e=>{e.preventDefault(),this.openCatalogItem=null,this._focusRootFlowItem=!0}},null===(e=this.catalogLayerList)||void 0===e?void 0:e.render())}_renderTableListFlowItem(){var e;const{openTableListItem:t,messages:i}=this;if(!t)return null;const l=this._getLayerTitle(t);return(0,M.u)("calcite-flow-item",{afterCreate:this._focusTableListFlowItemNode,afterUpdate:this._focusTableListFlowItemNode,bind:this,description:l,heading:i.tables,headingLevel:this.headingLevel,key:"flow-table-list-".concat(t.uid),onCalciteFlowItemBack:e=>{e.preventDefault(),this.openTableListItem=null,this._focusRootFlowItem=!0}},null===(e=this.tableList)||void 0===e?void 0:e.render())}_renderPanelFlowItems(e){return e?e.flatten((e=>e.children)).filter((e=>{let{hidden:t,panel:i}=e;return!t&&(null===i||void 0===i?void 0:i.open)&&!i.disabled&&i.flowEnabled})).toArray().map((e=>{let{title:t,panel:i}=e;const l=()=>this._handlePanelFlowItemBack(i);return(0,M.u)("calcite-flow-item",{afterCreate:this._focusPanelFlowItemNode,afterUpdate:this._focusPanelFlowItemNode,bind:this,description:t,heading:i.title,headingLevel:this.headingLevel,key:"flow-panel-".concat(i.uid),onCalciteFlowItemBack:e=>{e.preventDefault(),l()}},i.render(),(0,M.u)("calcite-button",{appearance:"transparent",onclick:l,slot:"footer-actions",width:"full"},this.messagesCommon.back))})):[]}_handlePanelFlowItemBack(e){e.open=!1,this._focusRootFlowItem=!0}_focusRootFlowItemNode(e){this._focusRootFlowItem&&(this._focusRootFlowItem=!1,requestAnimationFrame((()=>null===e||void 0===e?void 0:e.setFocus())))}_focusCatalogFlowItemNode(e){this._focusCatalogFlowItem&&(this._focusCatalogFlowItem=!1,requestAnimationFrame((()=>null===e||void 0===e?void 0:e.setFocus())))}_focusTableListFlowItemNode(e){this._focusTableListFlowItem&&(this._focusTableListFlowItem=!1,requestAnimationFrame((()=>null===e||void 0===e?void 0:e.setFocus())))}_focusPanelFlowItemNode(e){this._focusPanelFlowItem&&(this._focusPanelFlowItem=!1,requestAnimationFrame((()=>null===e||void 0===e?void 0:e.setFocus())))}_renderItems(e){const{visible:t,collapsed:i,_filterEnabled:l,_rootGroupUid:o,visibleElements:{closeButton:n,collapseButton:s,heading:a,flow:r},_dragEnabled:c,selectionMode:d,filterText:u,filterPlaceholder:m,messages:h}=this,p=[(0,M.u)("calcite-flow-item",{afterCreate:this._focusRootFlowItemNode,afterUpdate:this._focusRootFlowItemNode,bind:this,closable:n,closed:!t,collapsed:i,collapsible:s,heading:a?h.widgetLabel:void 0,headingLevel:this.headingLevel,key:"root-flow-item",onCalciteFlowItemClose:()=>this.visible=!1},(0,M.u)("calcite-list",{afterCreate:e=>{e.addEventListener("focusin",this._setActiveItem),e.addEventListener("focusout",this._clearActiveItem)},afterRemoved:e=>{e.removeEventListener("focusin",this._setActiveItem),e.removeEventListener("focusout",this._clearActiveItem)},canPull:e=>this._canMove(e,"pull"),canPut:e=>this._canMove(e,"put"),"data-layer-type":o,dragEnabled:c,filterEnabled:l,filterPlaceholder:m,filterText:l?u:"",group:o,key:"root-list",label:h.widgetLabel,onmouseleave:this._clearActiveItem,onmouseover:this._setActiveItem,selectionAppearance:"border",selectionMode:d,onCalciteListChange:e=>this._handleCalciteListChange(e),onCalciteListDragEnd:e=>this._handleCalciteListDragEnd(e.detail),onCalciteListFilter:e=>{var t,i;return this.filterText=null!==(t=null===(i=e.target)||void 0===i?void 0:i.filterText)&&void 0!==t?t:""},onCalciteListOrderChange:e=>this._onCalciteListOrderChange(e.detail)},null===e||void 0===e?void 0:e.toArray().map((e=>this._renderItem(e))),null!==e&&void 0!==e&&e.length&&l?(0,M.u)("div",{class:g.filterNoResults,slot:"filter-no-results"},(0,M.u)("calcite-notice",{kind:"info",open:!0,width:"full"},this._renderNoItemsMessage())):null)),this._renderPanelFlowItems(e),this._renderTableListFlowItem(),this._renderCatalogFlowItem()];return t?r?(0,M.u)("calcite-flow",{key:"root-flow"},p):p:null}_renderChildList(e){var t,i,l;let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const{_dragEnabled:n,_rootGroupUid:s,viewModel:{listModeDisabled:a},messages:r,selectionMode:c}=this,{children:d}=e,u="catalog-dynamic-group"!==(null===(t=e.layer)||void 0===t?void 0:t.type)&&(0,C.bB)(e),m=!(!a&&(0,C.Kf)(e.layer))&&!u&&n&&"group"===(null===(i=e.layer)||void 0===i?void 0:i.type);return u||m?(0,M.u)("calcite-list",{canPull:e=>this._canMove(e,"pull"),canPut:e=>this._canMove(e,"put"),"data-item":e,"data-layer-type":s,dragEnabled:!!n&&e.childrenSortable&&(0,C.xA)(e),group:"".concat(s,"-").concat(e.layer.uid),key:"child-list-".concat(e.layer.uid),selectionAppearance:"border",selectionMode:c},null===d||void 0===d?void 0:d.filter((e=>!e.hidden)).toArray().map((t=>this._renderItem(t,e,[...o,e.title]))),null!==(l=this._getTableListParams(e))&&void 0!==l&&null!==(l=l.tables)&&void 0!==l&&l.length?(0,M.u)("calcite-list-item",{class:g.item,"data-layer-id":e.layer.id,dragDisabled:!0,key:"list-item-table-list-tables-".concat(e.layer.uid),title:r.tables,onCalciteListItemSelect:()=>{this.openTableListItem=e,this._focusTableListFlowItem=!0}},(0,M.u)("div",{class:g.itemContent,slot:"content"},r.tables),(0,M.u)("calcite-icon",{class:g.itemTableIcon,icon:"table",scale:"s",slot:"content-start"}),(0,M.u)("calcite-icon",{flipRtl:!0,icon:"chevron-right",scale:"s",slot:"content-end"})):null):null}_renderItemMessage(e){return e.error?(0,M.u)("div",{class:g.itemMessage,key:"esri-layer-list__error",slot:"content-bottom"},(0,M.u)("calcite-notice",{icon:"exclamation-mark-triangle",kind:"warning",open:!0,scale:"s",width:"full"},(0,M.u)("div",{slot:"message"},this.messages.layerError))):e.incompatible?(0,M.u)("div",{class:g.itemMessage,key:"esri-layer-list__incompatible",slot:"content-bottom"},(0,M.u)("calcite-notice",{afterCreate:t=>this._setTooltipReference(t,e),afterRemoved:()=>this._removeTooltipReference(e),bind:this,icon:"exclamation-mark-triangle",kind:"warning",open:!0,scale:"s",tabIndex:0,width:"full"},(0,M.u)("div",{slot:"message"},this.messages.layerIncompatible))):null}_getLayerTitle(e){return e.title||this.messages.untitledLayer}_renderItem(e,t,i){var l,o,n;const{_activeItem:s,_selectedDragItemLayerUid:a,selectionMode:r,selectedItems:c,messages:d,visibleElements:u}=this,m=this._getLayerTitle(e),h=e.visibleAtCurrentTimeExtent?e.visibleAtCurrentScale?m:"".concat(m," (").concat(d.layerInvisibleAtScale,")"):"".concat(m," (").concat(d.layerInvisibleAtTime,")"),p=this._filterActions(e.actionsSections),v=this._countActions(p),_="catalog"===(null===(l=e.parent)||void 0===l||null===(l=l.layer)||void 0===l?void 0:l.type),b="catalog-footprint"===(null===(o=e.layer)||void 0===o?void 0:o.type),y="catalog-dynamic-group"===(null===(n=e.layer)||void 0===n?void 0:n.type),I=b?(0,M.u)("calcite-icon",{class:g.itemCatalogIcon,icon:"footprint",key:"footprint",scale:"s",slot:"content-start"}):null,f=y?(0,M.u)("calcite-icon",{class:g.itemCatalogIcon,icon:"catalog-dataset",key:"catalog-dataset",scale:"s",slot:"content-start"}):null,C=u.catalogLayerList&&y?(0,M.u)("calcite-action",{appearance:"transparent",disabled:!e.layer.visible,icon:"chevron-right",iconFlipRtl:!0,onclick:()=>{this.openCatalogItem=t,this._focusCatalogFlowItem=!0},scale:"s",slot:"actions-end",text:m}):null;return(0,M.u)("calcite-list-item",{afterCreate:t=>this._focusSelectedDragEl(t,e),afterUpdate:t=>this._focusSelectedDragEl(t,e),class:this.classes(g.item,{[g.itemActive]:s===e}),"data-item":e,"data-layer-id":e.layer.id,dragDisabled:!e.sortable||_,dragSelected:e.layer.uid===a,id:e.layer.uid,key:"list-item-".concat(e.layer.uid),label:m,metadata:{parentTitles:i,title:m},open:e.open,selected:"none"!==r&&c.includes(e),title:h,value:e.layer.uid,onCalciteListItemDragHandleChange:t=>this._handleCalciteListItemDragHandleChange(t,e),onCalciteListItemSelect:i=>this._handleCalciteListItemSelect(i,e,t),onCalciteListItemToggle:t=>this._handleCalciteListItemToggle(t,e)},I,f,(0,M.u)("div",{class:this.classes({[g.itemContent]:!0,[g.itemInvisible]:!e.visibleAtCurrentScale||!e.visibleAtCurrentTimeExtent}),slot:"content"},m),this._renderItemStatus(e,t),this._renderItemToggle(e,t),C,this._renderItemTemporaryIcon(e),this._renderChildList(e,i),this._renderItemMessage(e),this._renderPanel(e.panel),this._renderPanelAction(e.panel),v>1?this._renderActionsSections(e,p):1===v?this._renderAction({item:e,action:this._getSingleAction(p),textEnabled:!1}):null)}_renderItemStatus(e,t){const{visibleElements:i}=this;if(!i.statusIndicators)return null;const{connectionStatus:l,publishing:o,updating:n}=e,s=n&&!t,a=!!l;return(0,M.u)("calcite-icon",{class:this.classes({[g.statusIndicator]:!0,[g.publishing]:o,[g.updating]:s,[g.connectionStatus]:a,[g.connectionStatusConnected]:a&&"connected"===l}),icon:(0,C.XO)({connectionStatus:l,publishing:o}),key:"layer-item-status",scale:"s",slot:"actions-end"})}_renderItemTemporaryIcon(e){return this.visibleElements.temporaryLayerIndicators&&"persistenceEnabled"in e.layer&&!e.layer.persistenceEnabled?(0,M.u)("calcite-icon",{class:g.itemTemporaryIcon,icon:"temporary",key:"temporary-icon",scale:"s",slot:"actions-start",title:this.messages.temporary}):null}_renderItemToggle(e,t){const{messages:i,visibilityAppearance:l}=this,{visible:o}=e,n=null===t||void 0===t?void 0:t.visibilityMode;if("inherited"===n)return null;const s=(0,C.gk)({visible:o,exclusive:"exclusive"===n,visibilityAppearance:l}),a="checkbox"===l,r=i.layerVisibility;return(0,M.u)("calcite-action",{appearance:"transparent",class:g.visibleToggle,icon:a?s:void 0,key:"visibility-toggle",onclick:()=>this._toggleVisibility(e,t),scale:"s",slot:a?"actions-start":"actions-end",text:r,title:r},a?null:(0,M.u)("calcite-icon",{class:this.classes({[g.visibleIcon]:"exclusive"!==n&&o}),icon:s,scale:"s"}))}_renderPanel(e){return null===e||void 0===e||!e.open||e.disabled||e.flowEnabled?null:(0,M.u)("div",{class:g.itemContentBottom,key:"content-panel-".concat(e.uid),slot:"content-bottom"},e.render())}_renderPanelAction(e){if(null===e||void 0===e||!e.visible)return null;const{open:t,title:i,disabled:l}=e;return(0,M.u)("calcite-action",{active:t,appearance:"transparent",disabled:l,icon:(0,m.mR)(e),key:"action-".concat(e.uid),onclick:()=>this._togglePanel(e),scale:"s",slot:"actions-end",text:null!==i&&void 0!==i?i:"",title:null!==i&&void 0!==i?i:void 0},this._renderFallbackIcon(e))}_renderActionsSections(e,t){const i=this.messagesCommon.options;return(0,M.u)("calcite-action-menu",{appearance:"transparent",class:g.actionMenu,key:"item-action-menu",label:this.messagesCommon.menu,open:e.actionsOpen,overlayPositioning:"fixed",placement:"bottom-end",scale:"s",slot:"actions-end",onCalciteActionMenuOpen:t=>e.actionsOpen=t.target.open},(0,M.u)("calcite-action",{appearance:"transparent",icon:"ellipsis",scale:"s",slot:"trigger",text:i,title:i}),t.toArray().map(((t,i)=>this._renderActionSection(e,t,i))))}_renderActionSection(e,t,i){return(0,M.u)("calcite-action-group",{class:g.actionGroup,key:"action-section-".concat(i)},t.toArray().map((t=>this._renderAction({item:e,action:t,textEnabled:!0}))))}_renderFallbackIcon(e){const{className:t,icon:i}=e;if(i)return null;const l="image"in e?e.image:void 0,o={[g.itemActionIcon]:!!t,[g.itemActionImage]:!!l};return t&&(o[t]=!0),l||t?(0,M.u)("span",{"aria-hidden":"true",class:this.classes(g.itemActionIcon,o),key:"icon",styles:(0,m.uS)(l)}):null}_renderAction(e){const{item:t,action:i,textEnabled:l}=e;if(!i)return null;const{active:o,disabled:n,title:s,type:a,indicator:r}=i;return(0,M.u)("calcite-action",{active:"toggle"===a&&i.value,appearance:"transparent",disabled:n,icon:(0,m.mR)(i),indicator:r,key:"action-".concat(i.uid),loading:o,onclick:()=>this._triggerAction(t,i),scale:"s",slot:l?void 0:"actions-end",text:null!==s&&void 0!==s?s:"",textEnabled:l,title:null!==s&&void 0!==s?s:void 0},this._renderFallbackIcon(i))}_setTooltipReference(e,t){this._tooltipReferenceMap.set(t.layer.uid,e)}_removeTooltipReference(e){this._tooltipReferenceMap.delete(e.layer.uid)}_moveLayerFromChildList(e){let{toEl:t,fromEl:i,dragEl:l,newIndex:o}=e;const n=(0,C.rV)(l),s=(0,C.rV)(t),a=(0,C.rV)(i);this.viewModel.moveListItem(n,a,s,o)}_handleCalciteListDragEnd(e){const{fromEl:t,dragEl:i,oldIndex:l}=e;t.insertBefore(i,t.children[l])}_sortLayers(e,t){var i;if(e)if(e.group===this._rootGroupUid)(0,C.Cl)(null===(i=this.view)||void 0===i||null===(i=i.map)||void 0===i?void 0:i.layers,t);else{const i=(0,C.rV)(e);if(!i)return;(0,C.YO)(i,t)}}_getSingleAction(e){return e.reduce((e=>e)).find((e=>e&&("button"===e.type||"toggle"===e.type)))}_filterActions(e){return e.map((e=>e.filter((e=>e.visible))))}_countActions(e){return e.reduce(((e,t)=>e+t.length),0)}_triggerAction(e,t){t&&e&&("toggle"===t.type&&(t.value=!t.value),this.triggerAction(t,e))}_handleCalciteListChange(e){const{selectionMode:t,selectedItems:i}=this;if("none"===t)return;const l=e.target.selectedItems.map((e=>(0,C.rV)(e))).filter(Boolean);i.removeAll(),i.addMany(l)}_handleCalciteListItemToggle(e,t){e.stopPropagation(),t.open=e.target.open}_focusSelectedDragEl(e,t){this._selectedDragItemLayerUid===t.layer.uid&&requestAnimationFrame((()=>null===e||void 0===e?void 0:e.setFocus()))}_handleCalciteListItemDragHandleChange(e,t){e.stopPropagation();const i=e.target.dragSelected;this._selectedDragItemLayerUid=i?t.layer.uid:null}_handleCalciteListItemSelect(e,t,i){(0,C.rV)(e.target)===t&&"none"===this.selectionMode&&"inherited"!==(null===i||void 0===i?void 0:i.visibilityMode)&&this._toggleVisibility(t,i)}_togglePanel(e){e.open=!e.open,e.open&&(this._focusPanelFlowItem=!0)}_toggleVisibility(e,t){if(!e)return;"exclusive"===(null===t||void 0===t?void 0:t.visibilityMode)&&e.visible||(e.visible=!e.visible)}};(0,l._)([(0,d.Cb)()],T.prototype,"_activeItem",void 0),(0,l._)([(0,d.Cb)()],T.prototype,"_tooltipReferenceMap",void 0),(0,l._)([(0,d.Cb)()],T.prototype,"_focusRootFlowItem",void 0),(0,l._)([(0,d.Cb)()],T.prototype,"_focusPanelFlowItem",void 0),(0,l._)([(0,d.Cb)()],T.prototype,"_focusTableListFlowItem",void 0),(0,l._)([(0,d.Cb)()],T.prototype,"_focusCatalogFlowItem",void 0),(0,l._)([(0,d.Cb)()],T.prototype,"_totalItems",null),(0,l._)([(0,d.Cb)()],T.prototype,"_dragEnabled",null),(0,l._)([(0,d.Cb)()],T.prototype,"_filterEnabled",null),(0,l._)([(0,d.Cb)({readOnly:!0})],T.prototype,"catalogLayerList",void 0),(0,l._)([(0,d.Cb)()],T.prototype,"catalogOptions",void 0),(0,l._)([(0,d.Cb)()],T.prototype,"collapsed",void 0),(0,l._)([(0,d.Cb)()],T.prototype,"dragEnabled",void 0),(0,l._)([(0,d.Cb)()],T.prototype,"filterPlaceholder",void 0),(0,l._)([(0,d.Cb)()],T.prototype,"filterText",void 0),(0,l._)([(0,d.Cb)()],T.prototype,"headingLevel",void 0),(0,l._)([(0,d.Cb)()],T.prototype,"icon",null),(0,l._)([(0,d.Cb)()],T.prototype,"knowledgeGraphOptions",void 0),(0,l._)([(0,d.Cb)()],T.prototype,"label",null),(0,l._)([(0,d.Cb)()],T.prototype,"listItemCanGiveFunction",void 0),(0,l._)([(0,d.Cb)()],T.prototype,"listItemCanReceiveFunction",void 0),(0,l._)([(0,d.Cb)()],T.prototype,"listItemCreatedFunction",null),(0,l._)([(0,d.Cb)(),(0,E.H)("esri/widgets/LayerList/t9n/LayerList")],T.prototype,"messages",void 0),(0,l._)([(0,d.Cb)(),(0,E.H)("esri/t9n/common")],T.prototype,"messagesCommon",void 0),(0,l._)([(0,d.Cb)()],T.prototype,"minDragEnabledItems",void 0),(0,l._)([(0,d.Cb)()],T.prototype,"minFilterItems",void 0),(0,l._)([(0,d.Cb)()],T.prototype,"multipleSelectionEnabled",null),(0,l._)([(0,d.Cb)()],T.prototype,"openCatalogItem",void 0),(0,l._)([(0,d.Cb)()],T.prototype,"openTableListItem",void 0),(0,l._)([(0,d.Cb)()],T.prototype,"operationalItems",null),(0,l._)([(0,d.Cb)()],T.prototype,"selectionEnabled",null),(0,l._)([(0,d.Cb)()],T.prototype,"selectedItems",void 0),(0,l._)([(0,d.Cb)()],T.prototype,"selectionMode",void 0),(0,l._)([(0,d.Cb)({readOnly:!0})],T.prototype,"tableList",void 0),(0,l._)([(0,d.Cb)()],T.prototype,"view",null),(0,l._)([(0,F.s)("trigger-action"),(0,d.Cb)({type:_.Z})],T.prototype,"viewModel",void 0),(0,l._)([(0,d.Cb)()],T.prototype,"visibilityAppearance",void 0),(0,l._)([(0,d.Cb)({type:I,nonNullable:!0})],T.prototype,"visibleElements",void 0),T=(0,l._)([(0,u.j)("esri.widgets.LayerList")],T);const k=T},69735:(e,t,i)=>{i.d(t,{Z:()=>b});var l=i(27366),o=i(80987),n=i(91505),s=i(94172),a=i(49861),r=(i(93169),i(32718),i(84936),i(69912)),c=i(89500),d=i(9309);const u="view",m="view-layers",h="map-layers",p="layer-views",v="layer-list-mode",g=o.Z.ofType(c.Z);let _=class extends n.Z.EventedAccessor{constructor(e){super(e),this.checkPublishStatusEnabled=!1,this.listItemCreatedFunction=null,this.listModeDisabled=!1,this.operationalItems=new g,this.view=null}initialize(){this.addHandles([(0,s.watch)((()=>{var e;return!0===(null===(e=this.view)||void 0===e?void 0:e.ready)}),(()=>this._viewHandles()),s.initial),(0,s.watch)((()=>[this.listItemCreatedFunction,this.checkPublishStatusEnabled,this.listModeDisabled]),(()=>this._recompileList()))],u)}destroy(){this._removeAllItems(),this.view=null}get state(){const{view:e}=this;return null!==e&&void 0!==e&&e.ready?"ready":e?"loading":"disabled"}get totalItems(){return this.operationalItems.flatten((e=>e.children)).length}triggerAction(e,t){e&&!e.disabled&&this.emit("trigger-action",{action:e,item:t})}moveListItem(e,t,i,l){var o;const n=null===e||void 0===e?void 0:e.layer;if(!n||"subtype-sublayer"===n.type||"sublayer"===n.type)return;const s=null===(o=this.view)||void 0===o||null===(o=o.map)||void 0===o?void 0:o.layers,a=t?(0,d.Hh)(t):s,r=i?(0,d.Hh)(i):s;if(!a||!r)return;const{operationalItems:c}=this,u=(null===t||void 0===t?void 0:t.children)||c,m=(null===i||void 0===i?void 0:i.children)||c,h=r.length-l;e.parent=i||null,u.remove(e),a.remove(n),m.includes(e)||m.add(e,h),r.includes(n)||r.add(n,h),this._compileList()}_createLayerViewHandles(e){this.removeHandles(p),this._compileList(),e&&this.addHandles(e.on("change",(()=>this._compileList())),p)}_createMapLayerHandles(e){this.removeHandles(h),this._compileList(),e&&this.addHandles(e.on("change",(()=>this._compileList())),h)}_createListItem(e){const{view:t,listItemCreatedFunction:i,checkPublishStatusEnabled:l,listModeDisabled:o}=this;return new c.Z({checkPublishStatusEnabled:l,listModeDisabled:o,layer:e,listItemCreatedFunction:i,view:t})}_removeAllItems(){this.operationalItems.destroyAll()}_getViewableLayers(e){return e?this.listModeDisabled?e:e.filter((e=>"hide"!==(0,d.aV)(e))):void 0}_watchLayersListMode(e){this.removeHandles(v),e&&!this.listModeDisabled&&this.addHandles((0,s.watch)((()=>e.filter((e=>"listMode"in e)).map((e=>e.listMode)).toArray()),(()=>this._compileList())),v)}_compileList(){var e;const t=null===(e=this.view)||void 0===e||null===(e=e.map)||void 0===e?void 0:e.layers;this._watchLayersListMode(t);const i=this._getViewableLayers(t);null!==i&&void 0!==i&&i.length?(this._createNewItems(i),this._removeItems(i),this._sortItems(i)):this._removeAllItems()}_createNewItems(e){const{operationalItems:t}=this;e.forEach((e=>{t.some((t=>t.layer===e))||t.add(this._createListItem(e))}))}_removeItems(e){const{operationalItems:t}=this,i=[];t.forEach((t=>{t&&e&&e.includes(t.layer)||i.push(t)})),t.destroyMany(i)}_sortItems(e){const{operationalItems:t}=this;t.sort(((t,i)=>{const l=e.indexOf(t.layer),o=e.indexOf(i.layer);return l>o?-1:l<o?1:0}))}_recompileList(){this._removeAllItems(),this._compileList()}_viewHandles(){const{view:e}=this;this.removeHandles([h,p,m]),null!==e&&void 0!==e&&e.ready?this.addHandles([(0,s.watch)((()=>{var e;return null===(e=this.view)||void 0===e||null===(e=e.map)||void 0===e?void 0:e.allLayers}),(e=>this._createMapLayerHandles(e)),s.initial),(0,s.watch)((()=>{var e;return null===(e=this.view)||void 0===e?void 0:e.allLayerViews}),(e=>this._createLayerViewHandles(e)),s.initial)],m):this._removeAllItems()}};(0,l._)([(0,a.Cb)()],_.prototype,"checkPublishStatusEnabled",void 0),(0,l._)([(0,a.Cb)()],_.prototype,"listItemCreatedFunction",void 0),(0,l._)([(0,a.Cb)({nonNullable:!0})],_.prototype,"listModeDisabled",void 0),(0,l._)([(0,a.Cb)({type:g})],_.prototype,"operationalItems",void 0),(0,l._)([(0,a.Cb)({readOnly:!0})],_.prototype,"state",null),(0,l._)([(0,a.Cb)()],_.prototype,"totalItems",null),(0,l._)([(0,a.Cb)()],_.prototype,"view",void 0),_=(0,l._)([(0,r.j)("esri.widgets.LayerList.LayerListViewModel")],_);const b=_}}]);
//# sourceMappingURL=52955.b7e8aa0e.chunk.js.map