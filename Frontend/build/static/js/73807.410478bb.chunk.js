"use strict";(self.webpackChunknorthwind=self.webpackChunknorthwind||[]).push([[73807],{97942:(t,e,n)=>{function a(t){let e,n,a=[],i=!1;return function(){for(var l=arguments.length,r=new Array(l),o=0;o<l;o++)r[o]=arguments[o];return i&&e===this&&function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0}(r,a)||(n=t.apply(this,r),e=this,a=r,i=!0),n}}n.d(e,{H:()=>a})},45900:(t,e,n)=>{n.d(e,{m:()=>c});var a=n(27366),i=n(7138),l=(n(93169),n(32718),n(66978)),r=n(49861),o=(n(84936),n(69912)),s=n(99034),u=n(92853);let c=class extends i.default{constructor(t){super(t),this.manipulators=new u.D,this.automaticManipulatorSelection=!0,this.hasGrabbedManipulators=!1,this.hasHoveredManipulators=!1,this.firstGrabbedManipulator=null,this.created=!1,this.removeIncompleteOnCancel=!0,this._editableFlags=new Map([[s.bH.MANAGER,!0],[s.bH.USER,!0]]),this._creationFinishedResolver=(0,l.hh)()}get active(){return null!=this.view&&this.view.activeTool===this}set visible(t){this._get("visible")!==t&&(this._set("visible",t),this._syncVisible())}get editable(){return this.getEditableFlag(s.bH.USER)}set editable(t){this.setEditableFlag(s.bH.USER,t)}get updating(){return!1}get cursor(){return null}get hasFocusedManipulators(){return this.hasGrabbedManipulators||this.hasHoveredManipulators}destroy(){this.manipulators.destroy(),this._set("view",null)}onAdd(){this._syncVisible()}activate(){null!=this.view&&(this.view.focus(),this.onActivate())}deactivate(){this.onDeactivate()}handleInputEvent(t){this.onInputEvent(t)}handleInputEventAfter(t){this.onInputEventAfter(t)}setEditableFlag(t,e){this._editableFlags.set(t,e),this.manipulators.isToolEditable=this.internallyEditable,this._updateManipulatorAttachment(),t===s.bH.USER&&this.notifyChange("editable"),this.onEditableChange(),this.onManipulatorSelectionChanged()}getEditableFlag(t){var e;return null!==(e=this._editableFlags.get(t))&&void 0!==e&&e}whenCreated(){return this._creationFinishedResolver.promise}onManipulatorSelectionChanged(){}onActivate(){}onDeactivate(){}onShow(){}onHide(){}onEditableChange(){}onInputEvent(t){}onInputEventAfter(t){}get internallyEditable(){return this.getEditableFlag(s.bH.USER)&&this.getEditableFlag(s.bH.MANAGER)}finishToolCreation(){this.created||this._creationFinishedResolver.resolve(this),this._set("created",!0)}_syncVisible(){if(this.initialized)if(this.visible)this._show();else if(this._hide(),this.active)return void(this.view.activeTool=null)}_show(){this._updateManipulatorAttachment(),this.onShow()}_hide(){this._updateManipulatorAttachment(),this.onHide()}_updateManipulatorAttachment(){this.visible?this.manipulators.attach():this.manipulators.detach()}};(0,a._)([(0,r.Cb)({constructOnly:!0})],c.prototype,"view",void 0),(0,a._)([(0,r.Cb)({readOnly:!0})],c.prototype,"active",null),(0,a._)([(0,r.Cb)({value:!0})],c.prototype,"visible",null),(0,a._)([(0,r.Cb)({value:!0})],c.prototype,"editable",null),(0,a._)([(0,r.Cb)({readOnly:!0})],c.prototype,"manipulators",void 0),(0,a._)([(0,r.Cb)({readOnly:!0})],c.prototype,"updating",null),(0,a._)([(0,r.Cb)()],c.prototype,"cursor",null),(0,a._)([(0,r.Cb)({readOnly:!0})],c.prototype,"automaticManipulatorSelection",void 0),(0,a._)([(0,r.Cb)()],c.prototype,"hasFocusedManipulators",null),(0,a._)([(0,r.Cb)()],c.prototype,"hasGrabbedManipulators",void 0),(0,a._)([(0,r.Cb)()],c.prototype,"hasHoveredManipulators",void 0),(0,a._)([(0,r.Cb)()],c.prototype,"firstGrabbedManipulator",void 0),(0,a._)([(0,r.Cb)({readOnly:!0})],c.prototype,"created",void 0),(0,a._)([(0,r.Cb)({readOnly:!0})],c.prototype,"removeIncompleteOnCancel",void 0),c=(0,a._)([(0,o.j)("esri.views.interactive.InteractiveToolBase")],c)},92853:(t,e,n)=>{n.d(e,{D:()=>r});var a,i,l=n(80987);(i=a||(a={}))[i.WhenToolEditable=0]="WhenToolEditable",i[i.WhenToolNotEditable=1]="WhenToolNotEditable",i[i.Always=2]="Always";class r{constructor(){this._isToolEditable=!0,this._manipulators=new l.Z,this._resourceContexts={manipulator3D:{}},this._attached=!1}set isToolEditable(t){this._isToolEditable=t}get length(){return this._manipulators.length}add(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.WhenToolEditable;this.addMany([t],e)}addMany(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.WhenToolEditable;for(const n of t){const t={manipulator:n,visibilityPredicate:e,attached:!1};this._manipulators.add(t),this._attached&&this._updateManipulatorAttachment(t)}}remove(t){for(let e=0;e<this._manipulators.length;e++)if(this._manipulators.at(e).manipulator===t){const t=this._manipulators.splice(e,1)[0];this._detachManipulator(t);break}}removeAll(){this._manipulators.forEach((t=>{this._detachManipulator(t)})),this._manipulators.removeAll()}attach(){this._manipulators.forEach((t=>{this._updateManipulatorAttachment(t)})),this._attached=!0}detach(){this._manipulators.forEach((t=>{this._detachManipulator(t)})),this._attached=!1}destroy(){this.detach(),this._manipulators.forEach((t=>{let{manipulator:e}=t;return e.destroy()})),this._manipulators.destroy(),this._resourceContexts=null}on(t,e){return this._manipulators.on(t,(t=>{e(t)}))}forEach(t){for(const e of this._manipulators.items)t(e)}some(t){return this._manipulators.items.some(t)}toArray(){const t=[];return this.forEach((e=>t.push(e.manipulator))),t}intersect(t,e){let n=null,a=Number.MAX_VALUE;return this._manipulators.forEach((i=>{let{manipulator:l,attached:r}=i;if(!r||!l.interactive)return;const o=l.intersectionDistance(t,e);null!=o&&o<a&&(a=o,n=l)})),n}_updateManipulatorAttachment(t){this._isManipulatorItemVisible(t)?this._attachManipulator(t):this._detachManipulator(t)}_attachManipulator(t){t.attached||(t.manipulator.attach&&t.manipulator.attach(this._resourceContexts),t.attached=!0)}_detachManipulator(t){if(!t.attached)return;const e=t.manipulator;e.grabbing=!1,e.dragging=!1,e.hovering=!1,e.selected=!1,e.detach&&e.detach(this._resourceContexts),t.attached=!1}_isManipulatorItemVisible(t){return t.visibilityPredicate===a.Always||(this._isToolEditable?t.visibilityPredicate===a.WhenToolEditable:t.visibilityPredicate===a.WhenToolNotEditable)}}},74229:(t,e,n)=>{n.d(e,{$Q:()=>v,AN:()=>x,BS:()=>A,Cf:()=>g,M2:()=>h,Mz:()=>z,Xd:()=>p,dJ:()=>_,di:()=>b,fW:()=>y,hM:()=>C,kY:()=>M,uI:()=>E,zh:()=>S});var a=n(63780),i=(n(93169),n(84652)),l=n(16889),r=n(17842),o=n(79803),s=n(69048),u=n(37818),c=n(74509),d=n(17877);function p(t,e){return t.events.on("drag",function(t,e){let n=null,a=null;return i=>{if("cancel"===i.action)return void(null!=a&&(a.execute({action:"cancel"}),n=null,a=null));const l={action:i.action,screenStart:i.start,screenEnd:i.screenPoint};"start"===i.action&&null==n&&(n=new C,a=new C,e(t,n,a,i.pointerType,l)),null!=n&&n.execute(l),"end"===i.action&&null!=n&&(n=null,a=null)}}(t,e))}function h(t,e){var n;const a=[t.x,t.y,null!==(n=t.z)&&void 0!==n?n:0],i=e,l=[Math.cos(i),Math.sin(i)],r=Math.sqrt(l[0]*l[0]+l[1]*l[1]);if(0===r)return null;l[0]/=r,l[1]/=r;const o=t=>{const e=(t.x-a[0])*l[0]+(t.y-a[1])*l[1];t.x=a[0]+e*l[0],t.y=a[1]+e*l[1]};return t=>(o(t.mapStart),o(t.mapEnd),{...t,axis:l})}function v(t){let e=null;return n=>{var a,i;if("start"===n.action&&(e=function(t,e){const n=t.operations;if(!n)return null;const a=n.data.geometry,i=(0,u.D)(e);if(a.spatialReference.equals(i))return m(t,n,(()=>{}));if("mesh"!==a.type){const e=f(a,i);if(null==e)return null;const l=a.spatialReference;return m(t,d.c.fromGeometry(e,n.viewingMode),(()=>{const t=(0,o.project)(a,l);n.trySetGeometry(t)}))}if((0,s.QK)(a)){const e=f(a.origin,i);if(!e)return null;const l=a.spatialReference,r=d.c.fromGeometry(e,n.viewingMode);return m(t,n,(()=>{var t,e;const i=(0,o.project)(r.data.geometry,l),s=i.x-a.origin.x,u=i.y-a.origin.y,c=(null!==(t=i.z)&&void 0!==t?t:0)-(null!==(e=a.origin.z)&&void 0!==e?e:0);n.move(s,u,c)}))}return null}(t,n.mapStart.spatialReference)),null==e)return null;const l=n.mapEnd.x-n.mapStart.x,r=n.mapEnd.y-n.mapStart.y,c=(null!==(a=n.mapEnd.z)&&void 0!==a?a:0)-(null!==(i=n.mapStart.z)&&void 0!==i?i:0);return e.move(l,r,c,n.action),{...n,translationX:l,translationY:r,translationZ:c}}}function f(t,e){return null==t?null:t.spatialReference.equals(e)?t.clone():(0,o.project)(t,e)}function m(t,e,n){let a=0,i=0,l=0;return{move:(r,o,s,u)=>{var c;"start"===u&&(a=0,i=0,l=0);const d=r-a,p=o-i,h=s-l;e.move(d,p,h),a+=d,i+=p,l+=h,n(),"end"===u&&(null===(c=t.endInteraction)||void 0===c||c.call(t))}}}function g(t){var e;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2?arguments[2]:void 0,i=null;const l=null==n||null!==(e=t.spatialReference)&&void 0!==e&&e.equals(n)?t=>t:t=>null!=t?(0,o.project)(t,n):t,r={exclude:[],...a};return e=>{if("start"===e.action&&(i=l(t.toMap(e.screenStart,r))),null==i)return null;const n=l(t.toMap(e.screenEnd,r));return null!=n?{...e,mapStart:i,mapEnd:n}:null}}function y(t){const e=t.map((t=>v(t))).filter(a.pC);return t=>{const n=t.mapEnd.x-t.mapStart.x,a=t.mapEnd.y-t.mapStart.y,i=t.mapEnd.z-t.mapStart.z;return e.forEach((e=>e(t))),{...t,translationX:n,translationY:a,translationZ:i}}}function b(t,e){const n=new Map;for(const a of e)n.set(a,(0,i.d9)(t[a]));return e=>(n.forEach(((e,n)=>{t[n]=e})),e)}function E(t){var e;const n=null===(e=t.operations)||void 0===e?void 0:e.createResetState();return t=>(null!==n&&void 0!==n&&n.remove(),t)}function _(t){const e=t.map((t=>E(t))).filter((t=>null!=t));return t=>(e.forEach((e=>e(t))),t)}function x(){let t=0,e=0,n=0;return a=>{"start"===a.action&&(t=a.mapStart.x,e=a.mapStart.y,n=a.mapStart.z);const i=a.mapEnd.x-t,l=a.mapEnd.y-e,r=a.mapEnd.z-n;return t=a.mapEnd.x,e=a.mapEnd.y,n=a.mapEnd.z,{...a,mapDeltaX:i,mapDeltaY:l,mapDeltaZ:r,mapDeltaSpatialReference:a.mapStart.spatialReference}}}function S(){let t=0,e=0;return n=>{"start"===n.action&&(t=n.screenStart.x,e=n.screenStart.y);const a=n.screenEnd.x-t,i=n.screenEnd.y-e;return t=n.screenEnd.x,e=n.screenEnd.y,{...n,screenDeltaX:a,screenDeltaY:i}}}function M(t,e){let n=null,a=0,i=0;return o=>{var s;if("start"===o.action&&(n=null===(s=t.toScreen)||void 0===s?void 0:s.call(t,e),null!=n&&(n.x<0||n.x>t.width||n.y<0||n.y>t.height?n=null:(a=o.screenStart.x-n.x,i=o.screenStart.y-n.y))),null==n)return null;const u=(0,l.uZ)(o.screenEnd.x-a,0,t.width),c=(0,l.uZ)(o.screenEnd.y-i,0,t.height),d=(0,r.vW)(u,c);return o.screenStart=n,o.screenEnd=d,o}}const w=()=>{};class C{constructor(){this.execute=w}next(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new C;return null!=t&&(this.execute=n=>{const a=t(n);null!=a&&e.execute(a)}),e}}function A(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if("2d"===t.type)return t=>t;let a=null;return i=>{"start"===i.action&&(a=t.toMap(i.screenStart,{exclude:n}),null!=a&&(a.z=(0,c.Ou)(a,t,e)));const l=t.toMap(i.screenEnd,{exclude:n});null!=l&&(l.z=(0,c.Ou)(l,t,e));const r=null!=a&&null!=l?{sceneStart:a,sceneEnd:l}:null;return{...i,scenePoints:r}}}function P(t,e,n){var a,i;const l=null!==(a=e.elevationProvider.getElevation(t.x,t.y,null!==(i=t.z)&&void 0!==i?i:0,t.spatialReference,"scene"))&&void 0!==a?a:0,r=(0,u.WG)(t);return r.z=l,r.hasZ=!0,r.z=(0,c.Ou)(r,e,n),r}function z(t,e){if("2d"===t.type)return t=>t;let n=null;return a=>{"start"===a.action&&(n=P(a.mapStart,t,e));const i=P(a.mapEnd,t,e),l=null!=n&&null!=i?{sceneStart:n,sceneEnd:i}:null;return{...a,scenePoints:l}}}},34019:(t,e,n)=>{n.d(e,{N:()=>a});class a{constructor(t){this.vertexHandle=null,this.excludeFeature=null,this.visualizer=null,this.selfSnappingZ=null,this.drawConstraints=null,this.editGeometryOperations=t.editGeometryOperations,this.elevationInfo=t.elevationInfo,this.pointer=t.pointer,this.vertexHandle=t.vertexHandle,this.excludeFeature=t.excludeFeature,this.feature=t.feature,this.visualizer=t.visualizer,this.selfSnappingZ=t.selfSnappingZ,this.drawConstraints=t.drawConstraints}get coordinateHelper(){return this.editGeometryOperations.data.coordinateHelper}get spatialReference(){return this.coordinateHelper.spatialReference}}},80151:(t,e,n)=>{n.d(e,{W:()=>p});var a=n(92026),i=n(66978),l=n(94172),r=n(70178),o=n(37818),s=n(74509),u=n(74229),c=n(34019),d=n(93463);function p(t){let{predicate:e=(()=>!0),snappingManager:n,snappingContext:o,updatingHandles:p,useZ:g=!0}=t;const y=new u.hM;if(null==n)return{snappingStep:[m,y],cancelSnapping:m};let b,E=null,_=null,x=null;const S=()=>{var t;E=(0,a.IM)(E),n.doneSnapping(),null!==(t=_)&&void 0!==t&&t.frameTask.remove(),_=null,b=(0,a.hw)(b),x=null},M=(w=n,C=g,A=y,(0,i.Ds)((async(t,e)=>{let{frameTask:n,point:a,scenePoint:i,context:l,event:o,delta:s,getLastState:u}=t;const c=await n.schedule((()=>w.snap({point:a,scenePoint:i,context:l,signal:e})),e);if(c.valid){let t=await n.schedule((()=>c.apply()),e);const i=u();null!=i.point&&a!==i.point&&(t=w.update({point:i.point,scenePoint:i.scenePoint,context:l})),null!=i.updatePoint&&(0,r.kg)(t,i.updatePoint)||(f(o.mapEnd,t,s,C),A.execute(o))}})));var w,C,A;let P=null,z=null,T=null;return{snappingStep:[t=>{if(!e(t))return t;const{action:a}=t;if("start"===a){const{info:e}=t,a=function(t){return"3d"===t.type?t.resourceController.scheduler.registerTask(d.T8.SNAPPING):d.sq}(n.view);if(_=function(t,e,n){return{context:new c.N({editGeometryOperations:t.editGeometryOperations,elevationInfo:t.elevationInfo,pointer:t.pointer,vertexHandle:null!=e.info?e.info.handle:null,excludeFeature:t.excludeFeature,feature:t.feature,visualizer:t.visualizer}),originalPos:null!=e.snapOrigin?t.coordinateHelper.vectorToDehydratedPoint(e.snapOrigin):e.mapStart,originalScenePos:null!=e.scenePoints?e.scenePoints.sceneStart:null,frameTask:n}}(o,t,a),_.context.selfSnappingZ=null,!g&&null!=e){var r;const t=function(t,e){if(!t.hasZ())return null;const n=e.vertices;let a=null;for(const i of n){const e=t.getZ(i.pos);if(null!=a&&null!=e&&Math.abs(e-a)>1e-6)return null;null==a&&(a=e)}return a}(o.coordinateHelper,e.handle.component);null!=t&&(_.context.selfSnappingZ={value:t,elevationInfo:null!==(r=o.elevationInfo)&&void 0!==r?r:s.jG})}}if(null!=_){const{context:e,originalScenePos:r,originalPos:o}=_,{mapEnd:s,mapStart:u,scenePoints:c}=t,d=h(o,v(s,u)),m=v(u,o),y={...t,action:"update"},S=_.context,w=function(t,e){return null==t||null==e?null:h(t,v(e.sceneEnd,e.sceneStart))}(r,c),C=n.update({point:d,scenePoint:w,context:e});if(T=C,f(s,C,m,g),P=d,z=w,"end"!==a){const{frameTask:t}=_;null==E&&(E=new AbortController),x=e=>{p.addPromise((0,i.R8)(M({frameTask:t,event:y,context:S,point:d,scenePoint:w,delta:m,getLastState:()=>({point:P,scenePoint:z,updatePoint:e.forceUpdate?null:T})},E.signal)))},x({forceUpdate:!1}),null==b&&(b=(0,l.watch)((()=>n.options.effectiveEnabled),(()=>{var t;return null===(t=x)||void 0===t?void 0:t({forceUpdate:!0})})))}}return"end"===a&&S(),t},y],cancelSnapping:t=>(S(),t)}}function h(t,e){let[n,a,i]=e;const l=(0,o.WG)(t);return l.x+=n,l.y+=a,l.hasZ&&(l.z+=i),l}function v(t,e){const n=t.hasZ&&e.hasZ?t.z-e.z:0;return[t.x-e.x,t.y-e.y,n]}function f(t,e,n,a){let[i,l,r]=n;t.x=e.x+i,t.y=e.y+l,a&&t.hasZ&&e.hasZ&&(t.z=e.z+r)}function m(t){return t}}}]);
//# sourceMappingURL=73807.410478bb.chunk.js.map