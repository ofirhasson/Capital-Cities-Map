"use strict";(self.webpackChunknorthwind=self.webpackChunknorthwind||[]).push([[14434,10598],{10598:(e,t,i)=>{i.r(t),i.d(t,{default:()=>C});var a=i(27366),n=(i(59166),i(49861)),r=(i(93169),i(32718),i(84936),i(69912)),s=i(33565),o=i(7138);let l=class extends o.default{constructor(e){super(e),this.average=null,this.bins=null,this.max=null,this.min=null}get binRange(){const{bins:e}=this;return e&&e.length>1?e[e.length-1].maxValue-e[0].minValue:0}set labelFormatFunction(e){this._set("labelFormatFunction",e)}get range(){const{max:e,min:t}=this;return null!=e&&null!=t?e-t:0}get state(){const{bins:e,range:t}=this;return t>0&&null!==e&&void 0!==e&&e.length?"ready":"disabled"}};(0,a._)([(0,n.Cb)()],l.prototype,"average",void 0),(0,a._)([(0,n.Cb)()],l.prototype,"bins",void 0),(0,a._)([(0,n.Cb)({readOnly:!0})],l.prototype,"binRange",null),(0,a._)([(0,n.Cb)()],l.prototype,"labelFormatFunction",null),(0,a._)([(0,n.Cb)()],l.prototype,"max",void 0),(0,a._)([(0,n.Cb)()],l.prototype,"min",void 0),(0,a._)([(0,n.Cb)({readOnly:!0})],l.prototype,"range",null),(0,a._)([(0,n.Cb)({readOnly:!0})],l.prototype,"state",null),l=(0,a._)([(0,r.j)("esri.widgets.Histogram.HistogramViewModel")],l);const d=l;var u,h=i(7021),c=i(80975),g=i(80532),b=i(67005),_=i(8704);const p="esri-histogram",v={base:p,horizontalLayout:"".concat(p,"--horizontal"),verticalLayout:"".concat(p,"--vertical"),content:"".concat(p,"__content"),svg:"".concat(p,"__svg"),bar:"".concat(p,"__bar"),bars:"".concat(p,"__bars"),label:"".concat(p,"__label"),dataLines:"".concat(p,"__data-lines"),dataLinesSubgroup:"".concat(p,"__data-lines-subgroup"),dataLine:"".concat(p,"__data-line"),averageLabel:"".concat(p,"__average-label"),averageDataLine:"".concat(p,"__average-data-line"),averageSymbol:"".concat(p,"__average-symbol")};let m=u=class extends s.Z{constructor(e,t){super(e,t),this._bgFillId="".concat(this.id,"-bg-fill"),this._containerNode=null,this._containerDimensions={width:0,height:0},this._defaultBarColor="#d8d8d8",this.barCreatedFunction=null,this.dataLines=null,this.dataLineCreatedFunction=null,this.dataLineUpdatedFunction=null,this.messages=null,this.viewModel=new d}get average(){return this.viewModel.average}set average(e){this.viewModel.average=e}get bins(){return this.viewModel.bins}set bins(e){this.viewModel.bins=e}get icon(){return"graph-histogram"}set icon(e){this._overrideIfSome("icon",e)}get label(){var e,t;return null!==(e=null===(t=this.messages)||void 0===t?void 0:t.widgetLabel)&&void 0!==e?e:""}set label(e){this._overrideIfSome("label",e)}get labelFormatFunction(){return this.viewModel.labelFormatFunction}set labelFormatFunction(e){this.viewModel.labelFormatFunction=e}set layout(e){"vertical"!==e&&(e="horizontal"),this._set("layout",e)}get max(){return this.viewModel.max}set max(e){this.viewModel.max=e}get min(){return this.viewModel.min}set min(e){this.viewModel.min=e}get state(){return this.viewModel.state}static fromHistogramResult(e){const{bins:t,maxValue:i,minValue:a}=e;return new u({bins:t,max:i,min:a})}render(){const{label:e,layout:t,state:i}=this,a=this.classes(v.base,h.z.widget,"horizontal"===t?v.horizontalLayout:v.verticalLayout,"disabled"===i?h.z.disabled:null);return(0,b.u)("div",{afterCreate:this._afterContainerNodeCreate,"aria-label":e,bind:this,class:a},"ready"===i?this._renderContent():null)}_renderContent(){if(!this._containerNode)return;const e=this._bgFillId,t="clip-path: url(#".concat(e,")");return(0,b.u)("div",{class:v.content},(0,b.u)("svg",{class:v.svg,xmlns:"http://www.w3.org/2000/svg"},(0,b.u)("defs",null,this._renderFillDefinition(e)),(0,b.u)("g",{style:t},this._renderBarsGroup()),this._renderLinesGroup()))}_renderBarsGroup(){return(0,b.u)("g",{class:this.classes(v.bars)},this._renderBars())}_renderBars(){const{layout:e,viewModel:{binRange:t,range:i}}=this;if(!t||!i)return;const a=t/i,{width:n,height:r}=this._containerDimensions;if(0===r&&0===n)return;if(0===r&&0!==n)return void this.scheduleRender();const[s,o]="vertical"===e?[r*a,n]:[r,n*a];return this._getBarDimensions(s,o).map(((e,t)=>{let[i,a]=e;return this._renderBar(t,i,a)}))}_renderBar(e,t,i){const{bins:a,layout:n,max:r,messages:s,viewModel:{range:o}}=this;if(!a||null==r)return;const{width:l,height:d}=this._containerDimensions,u=a.slice()[e],{count:h,maxValue:c,minValue:g}=u,p=r-c,[m,C]="vertical"===n?[0,p*(d/o)]:[l-i-p*(l/o),d-t],y=(0,_.n)(s.barLabel,{count:h,maxValue:c,minValue:g});return(0,b.u)("rect",{afterCreate:this._afterBarCreate,"aria-label":y,bind:this,class:v.bar,"data-index":e,fill:this._defaultBarColor,height:t,role:"img","shape-rendering":"crispEdges","stroke-width":"0",width:i,x:m,y:C})}_renderLinesGroup(){return(0,b.u)("g",{class:this.classes(v.dataLines)},this._renderAverageLine(),this._renderCustomLines())}_renderAverageLine(){const{average:e}=this;if(null==e)return;const t=[(0,b.u)("tspan",{class:this.classes(v.averageSymbol)},"x\u0304 "),(0,b.u)("tspan",{class:this.classes(v.averageLabel)},this.labelFormatFunction?this.labelFormatFunction(e,"average"):e)];return(0,b.u)("g",{afterCreate:this._afterLinesSubgroupCreate,afterUpdate:this._afterLinesSubgroupUpdate,bind:this,class:this.classes(v.dataLinesSubgroup)},(0,b.u)("title",{key:"title"},e),this._renderLine(e,this.classes(v.averageDataLine)),this._renderLabel({label:t,value:e}))}_renderCustomLines(){var e;if(null!==(e=this.dataLines)&&void 0!==e&&e.length)return this.dataLines.map(((e,t)=>this._renderLineSubgroup(e,t)))}_renderLineSubgroup(e,t){const{value:i}=e;return(0,b.u)("g",{afterCreate:this._afterLinesSubgroupCreate,afterUpdate:this._afterLinesSubgroupUpdate,bind:this,class:this.classes(v.dataLinesSubgroup),"data-index":t},(0,b.u)("title",{key:"title"},i),this._renderLine(i),this._renderLabel(e))}_renderLine(e,t){const[i,a,n,r]=this._getLinePosition(e);return(0,b.u)("line",{class:this.classes(v.dataLine,t),"shape-rendering":"crispEdges",x1:i,x2:a,y1:n,y2:r})}_renderLabel(e,t){const{label:i,value:a}=e,[n,r]=this._getLabelPosition(a);return(0,b.u)("text",{class:this.classes(v.label,t),"text-anchor":"end",transform:"horizontal"===this.layout?"rotate(270)":null,x:n,y:r-2},null!==i&&void 0!==i?i:"")}_renderFillDefinition(e){const{width:t,height:i}=this._containerDimensions;return(0,b.u)("clipPath",{id:e},(0,b.u)("rect",{height:i,width:t,x:"0",y:"0"}))}_afterContainerNodeCreate(e){this._containerNode=e,this.addHandles((0,c.ib)(e,(e=>{const{width:t,height:i}=e.contentRect;this._containerDimensions={width:t,height:i}})))}_getIndexFromElement(e){var t;const i=null===(t=e.dataset)||void 0===t?void 0:t.index,a=e.getAttribute("data-index");return null!=i?parseInt(i,10):null!=a?parseInt(a,10):null}_afterBarCreate(e){if(this.barCreatedFunction){var t;const i=null!==(t=this._getIndexFromElement(e))&&void 0!==t?t:-1;this.barCreatedFunction(i,e)}}_afterLinesSubgroupCreate(e){if(this.dataLineCreatedFunction){const t=this._getIndexFromElement(e),i=e.childNodes[1],a=e.childNodes[2]?e.childNodes[2]:null;this.dataLineCreatedFunction(i,a,t)}}_afterLinesSubgroupUpdate(e){if(this.dataLineUpdatedFunction){const t=this._getIndexFromElement(e),i=e.childNodes[1],a=e.childNodes[2]?e.childNodes[2]:null;this.dataLineUpdatedFunction(i,a,t)}}_getBarDimensions(e,t){const{bins:i,layout:a}=this,n=i?i.map((e=>e.count)):[],r=Math.max.apply(Math,n);return n.map((i=>"vertical"===a?[e/n.length,0!==r?i/r*t:0]:[0!==r?i/r*e:0,t/n.length]))}_getLinePosition(e){const{layout:t,min:i,viewModel:{range:a}}=this;if(null==i)return[0,0,0,0];const n=Math.round((e-i)/a*100)/100,{width:r,height:s}=this._containerDimensions,[o,l]=[n*r||1,s-n*s||1];return"vertical"===t?[0,"100%",l,l]:[o,o,"100%",0]}_getLabelPosition(e){const{layout:t,min:i,viewModel:{range:a}}=this;if(null==i)return[0,0];const n=Math.round((e-i)/a*100)/100,{width:r,height:s}=this._containerDimensions;return"vertical"===t?[r,s-n*s]:[0,n*r]}};(0,a._)([(0,n.Cb)()],m.prototype,"_bgFillId",void 0),(0,a._)([(0,n.Cb)()],m.prototype,"_containerNode",void 0),(0,a._)([(0,n.Cb)()],m.prototype,"_containerDimensions",void 0),(0,a._)([(0,n.Cb)()],m.prototype,"_defaultBarColor",void 0),(0,a._)([(0,n.Cb)()],m.prototype,"average",null),(0,a._)([(0,n.Cb)()],m.prototype,"barCreatedFunction",void 0),(0,a._)([(0,n.Cb)()],m.prototype,"dataLines",void 0),(0,a._)([(0,n.Cb)()],m.prototype,"dataLineCreatedFunction",void 0),(0,a._)([(0,n.Cb)()],m.prototype,"dataLineUpdatedFunction",void 0),(0,a._)([(0,n.Cb)()],m.prototype,"icon",null),(0,a._)([(0,n.Cb)()],m.prototype,"label",null),(0,a._)([(0,n.Cb)()],m.prototype,"labelFormatFunction",null),(0,a._)([(0,n.Cb)({value:"horizontal"})],m.prototype,"layout",null),(0,a._)([(0,n.Cb)()],m.prototype,"max",null),(0,a._)([(0,n.Cb)(),(0,g.H)("esri/widgets/Histogram/t9n/Histogram")],m.prototype,"messages",void 0),(0,a._)([(0,n.Cb)()],m.prototype,"min",null),(0,a._)([(0,n.Cb)({readOnly:!0})],m.prototype,"state",null),(0,a._)([(0,n.Cb)()],m.prototype,"viewModel",void 0),m=u=(0,a._)([(0,r.j)("esri.widgets.Histogram")],m);const C=m},14434:(e,t,i)=>{i.r(t),i.d(t,{default:()=>F});var a=i(27366),n=i(51995),r=i(94172),s=i(49861),o=i(25243),l=(i(84936),i(93169),i(69912)),d=i(10598),u=i(88350),h=i(33565),c=(i(32718),i(84908)),g=i(89773);let b=class extends c.Z{constructor(e){super(e),this.average=null,this.bins=null,this.hasTimeData=!1,this.labelFormatFunction=e=>{if(this.hasTimeData)return(0,g.YR)(e);const{max:t,min:i,precision:a}=this,n=t-i>10?2:a;return(0,g.P5)(parseFloat(e.toFixed(n)))},this.rangeType="equal",this.standardDeviation=null}generateWhereClause(e){const{rangeType:t,state:i,values:a}=this;if("ready"!==i||null===a||void 0===a||!a.length||null==e)return null;const n=a[0],r=a.length>1?a[a.length-1]:null;switch(t){case"equal":return"".concat(e," = ").concat(n);case"not-equal":return"".concat(e," <> ").concat(n);case"less-than":return"".concat(e," < ").concat(n);case"greater-than":return"".concat(e," > ").concat(n);case"at-least":return"".concat(e," >= ").concat(n);case"at-most":return"".concat(e," <= ").concat(n);case"between":return"".concat(e," BETWEEN ").concat(n," AND ").concat(r);case"not-between":return"".concat(e," NOT BETWEEN ").concat(n," AND ").concat(r);default:return null}}};(0,a._)([(0,s.Cb)()],b.prototype,"average",void 0),(0,a._)([(0,s.Cb)()],b.prototype,"bins",void 0),(0,a._)([(0,s.Cb)()],b.prototype,"hasTimeData",void 0),(0,a._)([(0,s.Cb)()],b.prototype,"labelFormatFunction",void 0),(0,a._)([(0,s.Cb)()],b.prototype,"rangeType",void 0),(0,a._)([(0,s.Cb)()],b.prototype,"standardDeviation",void 0),b=(0,a._)([(0,l.j)("esri.widgets.HistogramRangeSlider.HistogramRangeSliderViewModel")],b);const _=b;var p=i(7021),v=(i(80975),i(80532)),m=i(67005);const C="esri-histogram-range-slider",y={base:C,sliderContainer:"".concat(C,"__slider-container"),histogramContainer:"".concat(C,"__histogram-container"),rangeTypePrefix:"".concat(C,"__range-type--")};let w=class extends h.Z{constructor(e,t){super(e,t),this._barElements=[],this._histogram=null,this._slider=null,this.barCreatedFunction=null,this.dataLines=null,this.dataLineCreatedFunction=null,this.excludedBarColor=new n.Z("#d7e5f0"),this.includedBarColor=new n.Z("#599dd4"),this.messages=null,this.standardDeviationCount=1,this.viewModel=new _}initialize(){const{average:e,bins:t,hasTimeData:i,max:a,min:n,viewModel:s}=this;this._updateBarFill=this._updateBarFill.bind(this),this._histogram=new d.default({average:e,bins:t,barCreatedFunction:(e,t)=>{0===e&&(this._barElements=[]),this._barElements.push(t),this._updateBarFill(e,t),this.barCreatedFunction&&this.barCreatedFunction(e,t)},dataLines:this._getDataLines(),dataLineCreatedFunction:(e,t)=>{this.dataLineCreatedFunction&&this.dataLineCreatedFunction(e,t)},labelFormatFunction:this.labelFormatFunction,layout:"horizontal",max:a,min:n}),this._slider=new u.default({labelFormatFunction:this.labelFormatFunction,layout:"horizontal",visibleElements:{labels:!0,rangeLabels:!0},rangeLabelInputsEnabled:!i,viewModel:s}),this.addHandles([this._slider.on("max-change",(e=>this.emit("max-change",e))),this._slider.on("min-change",(e=>this.emit("min-change",e))),this._slider.on("segment-drag",(e=>{this._updateBarFills(),this.emit("segment-drag",e)})),this._slider.on("thumb-change",(e=>{this._updateBarFills(),this.emit("thumb-change",e)})),this._slider.on("thumb-drag",(e=>{this._updateBarFills(),this.emit("thumb-drag",e)})),(0,r.watch)((()=>this.bins),(e=>{if(e&&this._histogram.bins){const t=this._histogram.bins.length-e.length;this._barElements.splice(-t,t)}else this._barElements=[];this._histogram.set({bins:e}),this._updateBarFills(),this.scheduleRender()})),(0,r.watch)((()=>[this.max,this.min,this.rangeType,this.values]),(e=>{let[t,i]=e;this._histogram.set({max:t,min:i}),this._updateBarFills(),this.scheduleRender()})),(0,r.watch)((()=>[this.average,this.dataLines,this.standardDeviation,this.standardDeviationCount]),(e=>{let[t]=e;this._histogram.set({average:t,dataLines:this._getDataLines()})})),(0,r.watch)((()=>this.labelFormatFunction),(e=>{this._histogram.set({labelFormatFunction:e})})),(0,r.watch)((()=>this.hasTimeData),(e=>{this._slider.set({rangeLabelInputsEnabled:!e})}))])}get average(){return this.viewModel.average}set average(e){this.viewModel.average=e}get bins(){return this.viewModel.bins}set bins(e){this.viewModel.bins=e}get hasTimeData(){return this.viewModel.hasTimeData}set hasTimeData(e){this.viewModel.hasTimeData=e}get icon(){return"arrow-double-horizontal"}set icon(e){this._overrideIfSome("icon",e)}get label(){var e,t;return null!==(e=null===(t=this.messages)||void 0===t?void 0:t.widgetLabel)&&void 0!==e?e:""}set label(e){this._overrideIfSome("label",e)}get labelFormatFunction(){return this.viewModel.labelFormatFunction}set labelFormatFunction(e){this.viewModel.labelFormatFunction=e}get max(){return this.viewModel.max}set max(e){this.viewModel.max=e}get min(){return this.viewModel.min}set min(e){this.viewModel.min=e}get precision(){return this.viewModel.precision}set precision(e){this.viewModel.precision=e}get rangeType(){return this.viewModel.rangeType}set rangeType(e){this.viewModel.rangeType=e}get standardDeviation(){return this.viewModel.standardDeviation}set standardDeviation(e){this.viewModel.standardDeviation=e}get values(){return this.viewModel.values}set values(e){this.viewModel.values=e}generateWhereClause(e){return this.viewModel.generateWhereClause(e)}render(){const{rangeType:e,viewModel:t,label:i}=this,a=this.classes(y.base,p.z.widget,"".concat(y.rangeTypePrefix).concat(e),"disabled"===t.state?p.z.disabled:null);return(0,m.u)("div",{"aria-label":i,class:a},"disabled"===t.state?null:this._renderContent())}_renderContent(){return[this._renderHistogram(),this._renderSlider()]}_renderSlider(){return(0,m.u)("div",{class:y.sliderContainer,key:"".concat(this.id,"-slider-container")},this._slider.render())}_renderHistogram(){return(0,m.u)("div",{class:y.histogramContainer},this._histogram.render())}_getDataLines(){return[...this._getStandardDeviationDataLines(),...this.dataLines||[]]}_getStandardDeviationDataLines(){const{average:e,standardDeviation:t,standardDeviationCount:i}=this;return(0,g.jK)(t,e,i).map((e=>({value:e})))}_updateBarFills(){this._barElements.forEach(((e,t)=>this._updateBarFill(t,e)))}_updateBarFill(e,t){var i,a;t.setAttribute("fill",null!==(i=null===(a=this._getFillForBar(e))||void 0===a?void 0:a.toHex())&&void 0!==i?i:"")}_getFillForBar(e){const{bins:t,rangeType:i,values:a}=this;if(-1===e||null===t||void 0===t||!t.length||!i||null===a||void 0===a||!a.length)return null;const n=t[e];if(!n)return null;const{maxValue:r,minValue:s}=n,o=r-s,l=a[0]>s&&a[0]<r;switch(i){case"equal":case"not-equal":return this.includedBarColor;case"less-than":case"at-most":return l?this._getBlendedColor((a[0]-s)/o):r<=a[0]?this.includedBarColor:this.excludedBarColor;case"greater-than":case"at-least":return l?this._getBlendedColor(1-(a[0]-s)/o):s>=a[0]?this.includedBarColor:this.excludedBarColor;case"between":if(2===a.length)return a[0]>s&&a[0]<r?this._getBlendedColor(1-(a[0]-s)/o):a[1]>s&&a[1]<r?this._getBlendedColor((a[1]-s)/o):s>=a[0]&&r<=a[1]?this.includedBarColor:this.excludedBarColor;break;case"not-between":if(2===a.length)return a[0]>s&&a[0]<r?this._getBlendedColor((a[0]-s)/o):a[1]>s&&a[1]<r?this._getBlendedColor(1-(a[1]-s)/o):s>a[0]&&r<a[1]?this.excludedBarColor:this.includedBarColor}return this.includedBarColor}_getBlendedColor(e){return n.Z.blendColors(this.excludedBarColor,this.includedBarColor,e)}};(0,a._)([(0,s.Cb)()],w.prototype,"average",null),(0,a._)([(0,s.Cb)()],w.prototype,"barCreatedFunction",void 0),(0,a._)([(0,s.Cb)()],w.prototype,"bins",null),(0,a._)([(0,s.Cb)()],w.prototype,"dataLines",void 0),(0,a._)([(0,s.Cb)()],w.prototype,"dataLineCreatedFunction",void 0),(0,a._)([(0,s.Cb)({type:n.Z,json:{type:[o.z8],write:!0}})],w.prototype,"excludedBarColor",void 0),(0,a._)([(0,s.Cb)()],w.prototype,"hasTimeData",null),(0,a._)([(0,s.Cb)({type:n.Z,json:{type:[o.z8],write:!0}})],w.prototype,"includedBarColor",void 0),(0,a._)([(0,s.Cb)()],w.prototype,"icon",null),(0,a._)([(0,s.Cb)()],w.prototype,"label",null),(0,a._)([(0,s.Cb)()],w.prototype,"labelFormatFunction",null),(0,a._)([(0,s.Cb)()],w.prototype,"max",null),(0,a._)([(0,s.Cb)(),(0,v.H)("esri/widgets/HistogramRangeSlider/t9n/HistogramRangeSlider")],w.prototype,"messages",void 0),(0,a._)([(0,s.Cb)()],w.prototype,"min",null),(0,a._)([(0,s.Cb)()],w.prototype,"precision",null),(0,a._)([(0,s.Cb)()],w.prototype,"rangeType",null),(0,a._)([(0,s.Cb)()],w.prototype,"standardDeviation",null),(0,a._)([(0,s.Cb)()],w.prototype,"standardDeviationCount",void 0),(0,a._)([(0,s.Cb)()],w.prototype,"values",null),(0,a._)([(0,s.Cb)()],w.prototype,"viewModel",void 0),w=(0,a._)([(0,l.j)("esri.widgets.HistogramRangeSlider")],w);const F=w}}]);
//# sourceMappingURL=14434.e0f4d9c7.chunk.js.map