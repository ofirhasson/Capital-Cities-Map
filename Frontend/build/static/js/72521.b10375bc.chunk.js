"use strict";(self.webpackChunknorthwind=self.webpackChunknorthwind||[]).push([[72521],{72521:(e,t,l)=>{l.r(t),l.d(t,{default:()=>M});var n=l(27366),i=l(94172),r=l(49861),o=(l(93169),l(32718),l(84936),l(69912)),s=l(37933),a=l(33565),d=l(73238),u=l(26138),c=l(63535),p=l(59238),m=l(7138);let h=class extends m.default{constructor(e){super(e),this.filter=!0}};(0,n._)([(0,r.Cb)({type:Boolean,nonNullable:!0})],h.prototype,"filter",void 0),h=(0,n._)([(0,o.j)("esri.widgets.FeatureTemplates.VisibleElements")],h);const v=h;var y=l(8905),b=l(7021),f=(l(80975),l(80532)),_=l(28907),g=l(67005);const I="esri-feature-templates";function C(e){return e.id}let w=class extends a.Z{constructor(e,t){super(e,t),this.enableListScroll=!0,this.filterText="",this.headingLevel=4,this.messages=null,this.messagesCommon=null,this.selectionMode="none",this.viewModel=new u.Z,this.visibleElements=new v,this.renderCustomItem=e=>null,this.renderCustomGroupContent=e=>null,this.renderItemLabel=()=>null,this.renderItemDescription=()=>null,this.renderItemContent=e=>null,this.renderItemContentEnd=e=>null,this._iconIntersectionObserver=new IntersectionObserver(((e,t)=>{e.forEach((async e=>{if(e.isIntersecting){const l=e.target;if(function(e){return!(null===e||void 0===e||!e["data-has-icon"])}(l))return void t.unobserve(l);const n=function(e){return null===e||void 0===e?void 0:e["data-item"]}(l),{layer:i,template:r}=n;F(l,!0);const o=await p.Z.fetchThumbnail(i,r).catch((()=>(F(l,!1),null)));if(null==o)return;l.appendChild(o)}}))})),this._renderItemIcon=e=>(0,s.wb)(e.layer)?(0,g.u)("span",{"data-has-icon":!0,"data-item":e,key:"icon"},(0,g.u)("calcite-icon",{icon:"table"})):(0,g.u)("span",{afterCreate:this._afterItemCreateOrUpdate,afterRemoved:this._afterItemRemoved,afterUpdate:this._afterItemCreateOrUpdate,"data-has-icon":!1,"data-item":e,key:"icon"}),this._afterItemCreateOrUpdate=e=>{var t;null===(t=this._iconIntersectionObserver)||void 0===t||t.observe(e)},this._afterItemRemoved=e=>{var t;null===(t=this._iconIntersectionObserver)||void 0===t||t.unobserve(e)}}initialize(){const e=e=>{let{label:t}=e;return!this.filterText||!(null===t||void 0===t||!t.toLowerCase().includes(this.filterText.toLowerCase()))};this.addHandles((0,i.watch)((()=>this.viewModel),((t,l)=>{t&&!t.filterFunction&&(this.filterFunction=e),l&&l!==t&&l.filterFunction===e&&(l.filterFunction=null)}),i.initial))}destroy(){var e;null!==(e=this._iconIntersectionObserver)&&void 0!==e&&e.disconnect(),this._iconIntersectionObserver=null}loadDependencies(){return(0,y.h)({icon:()=>Promise.all([l.e(92358),l.e(87474)]).then(l.bind(l,87474)),loader:()=>l.e(92382).then(l.bind(l,92382)),input:()=>Promise.all([l.e(92358),l.e(46895),l.e(54438),l.e(8715),l.e(16746)]).then(l.bind(l,75655)),list:()=>Promise.all([l.e(92358),l.e(46895),l.e(54438),l.e(34504),l.e(8715),l.e(38782)]).then(l.bind(l,38782)),"list-item":()=>Promise.all([l.e(92358),l.e(46895),l.e(65138),l.e(21340)]).then(l.bind(l,67994)),notice:()=>Promise.all([l.e(92358),l.e(46895),l.e(15669)]).then(l.bind(l,15669))})}get disabled(){return this.viewModel.disabled}set disabled(e){this.viewModel.disabled=e}get filterFunction(){return this.viewModel.filterFunction}set filterFunction(e){this.viewModel.filterFunction=e}get groupBy(){return this.viewModel.groupBy}set groupBy(e){this.viewModel.groupBy=e}get icon(){return"list-rectangle"}set icon(e){this._overrideIfSome("icon",e)}get label(){var e,t;return null!==(e=null===(t=this.messages)||void 0===t?void 0:t.widgetLabel)&&void 0!==e?e:""}set label(e){this._overrideIfSome("label",e)}get layers(){return this.viewModel.layers}set layers(e){this.viewModel.layers=e}get selectedItem(){return this.viewModel.selectedItem}select(e,t){return this.viewModel.select(e,t)}render(){var e;const{disabled:t,enableListScroll:l,filterText:n,headingLevel:i,messages:r,viewModel:{items:o,numberOfFeatureTemplates:s,selectedItem:a,state:p}}=this,m=this.visibleElements.filter&&s>1;if(function(e){return e.length>0&&(0,d.$R)(e[0])}(o)){const e=o.find((e=>e.label===u.Z.nullGroupBy.label));e&&(e.label=r.other)}return(0,g.u)("div",{"aria-label":r.widgetLabel,class:this.classes(I,b.z.widget)},"loading"===p?(0,g.u)("calcite-loader",{key:"loader",label:this.messagesCommon.loading,type:"indeterminate"}):"ready"===p?(0,g.u)(c.sr,{disabled:t,enableListScroll:l,filterEnabled:m,filterText:n,headingLevel:i,id:this.id,identify:C,items:o,messages:{filterPlaceholder:r.filterPlaceholder,noItems:r.noItems,noMatches:r.noMatches},renderCustomGroupContent:this.renderCustomGroupContent,renderCustomItem:this.renderCustomItem,renderIcon:this._renderItemIcon,renderItemContent:this.renderItemContent,renderItemContentEnd:this.renderItemContentEnd,renderItemDescription:this.renderItemDescription,renderItemLabel:this.renderItemLabel,selectedItem:null!==a&&void 0!==a?a:void 0,selectionMode:null!==(e=this.selectionMode)&&void 0!==e?e:void 0,onFilterChange:e=>{this.filterText=e,this.viewModel.refresh()},onItemSelect:e=>!(0,d.$R)(e)&&this.viewModel.select(e)}):null)}};function F(e,t){e&&(e["data-has-icon"]=t)}(0,n._)([(0,r.Cb)()],w.prototype,"disabled",null),(0,n._)([(0,r.Cb)()],w.prototype,"enableListScroll",void 0),(0,n._)([(0,r.Cb)()],w.prototype,"filterFunction",null),(0,n._)([(0,r.Cb)()],w.prototype,"filterText",void 0),(0,n._)([(0,r.Cb)()],w.prototype,"groupBy",null),(0,n._)([(0,r.Cb)()],w.prototype,"headingLevel",void 0),(0,n._)([(0,r.Cb)()],w.prototype,"icon",null),(0,n._)([(0,r.Cb)()],w.prototype,"label",null),(0,n._)([(0,r.Cb)()],w.prototype,"layers",null),(0,n._)([(0,r.Cb)(),(0,f.H)("esri/widgets/FeatureTemplates/t9n/FeatureTemplates")],w.prototype,"messages",void 0),(0,n._)([(0,r.Cb)(),(0,f.H)("esri/t9n/common")],w.prototype,"messagesCommon",void 0),(0,n._)([(0,r.Cb)({readOnly:!0})],w.prototype,"selectedItem",null),(0,n._)([(0,r.Cb)()],w.prototype,"selectionMode",void 0),(0,n._)([(0,r.Cb)(),(0,_.s)("select")],w.prototype,"viewModel",void 0),(0,n._)([(0,r.Cb)({type:v,nonNullable:!0})],w.prototype,"visibleElements",void 0),(0,n._)([(0,r.Cb)()],w.prototype,"renderCustomItem",void 0),(0,n._)([(0,r.Cb)()],w.prototype,"renderCustomGroupContent",void 0),(0,n._)([(0,r.Cb)()],w.prototype,"renderItemLabel",void 0),(0,n._)([(0,r.Cb)()],w.prototype,"renderItemDescription",void 0),(0,n._)([(0,r.Cb)()],w.prototype,"renderItemContent",void 0),(0,n._)([(0,r.Cb)()],w.prototype,"renderItemContentEnd",void 0),w=(0,n._)([(0,o.j)("esri.widgets.FeatureTemplates")],w);const M=w},26138:(e,t,l)=>{l.d(t,{Z:()=>g});var n=l(27366),i=l(91505),r=l(13005),o=l(94172),s=l(49861),a=(l(93169),l(32718),l(84936),l(69912)),d=l(37933),u=l(59238),c=l(7138),p=l(79056);let m=class extends((0,p.IG)(c.default)){constructor(e){super(e),this.items=null,this.label=null}get id(){return this.label}findByTemplate(e){return this.items.find((t=>t.template===e))}};(0,n._)([(0,s.Cb)()],m.prototype,"items",void 0),(0,n._)([(0,s.Cb)()],m.prototype,"label",void 0),(0,n._)([(0,s.Cb)()],m.prototype,"id",null),m=(0,n._)([(0,a.j)("esri.widgets.FeatureTemplates.TemplateItemGroup")],m);const h=m;var v,y=l(36571);const b=e=>{var t;let{layer:l}=e;return{key:l,label:null!==(t=l.title)&&void 0!==t?t:""}},f=e=>{var t;let{layer:l}=e;return{key:l.geometryType,label:null!==(t=l.geometryType)&&void 0!==t?t:""}};let _=v=class extends i.Z.EventedAccessor{constructor(e){super(e),this._groupPool=new r.Z(h),this._itemPool=new r.Z(u.Z),this.disabled=!1,this.disabledItemFunction=null,this.filterFunction=null,this.selectedItem=null}initialize(){this._get("groupBy")||(this.groupBy="layer")}get _featureTemplatesByLayer(){if(!this.layers)return new Map;const e=new Map;for(const t of this.layers)if("subtype-group"===t.type)for(const l of t.sublayers)e.set(l,(0,y.J)(l));else e.set(t,(0,y.J)(t));return e}set groupBy(e){if(this._set("groupBy",e),"function"!=typeof e)switch(e){case"layer":this._groupByFunction=b;break;case"geometry":this._groupByFunction=f;break;default:this._groupByFunction=null}else this._groupByFunction=t=>this._ensureGroupByObject(e(t))}set layers(e){const t="layers";if(this.removeHandles(t),e){const l=()=>this.notifyChange("state");this.addHandles(e.map((e=>(0,o.when)((()=>e.loadStatus),l))),t)}this._set("layers",e)}get layers(){return this._get("layers")}get state(){const{layers:e}=this;return e&&0!==e.length?e.some((e=>"loading"===e.loadStatus||"not-loaded"===e.loadStatus))?"loading":"ready":"disabled"}get numberOfFeatureTemplates(){return Array.from(this._featureTemplatesByLayer.values()).reduce(((e,t)=>e+t.length),0)}get items(){if(0===this.numberOfFeatureTemplates)return this._releasePreviousItems(),[];const e=this._featureTemplatesByLayer,t=[],l=null!=this.filterFunction?this.filterFunction:v._nullFilterFunction;for(const[a,u]of e){var n;if(a.loaded||"subtype-sublayer"===a.type&&null!==(n=a.parent)&&void 0!==n&&n.loaded){var i;const e=null===(i=(0,d.S1)(a))||void 0===i?void 0:i.operations;if(null!==e&&void 0!==e&&e.supportsEditing&&null!==e&&void 0!==e&&e.supportsAdd)for(const n of u)t.push({layer:a,template:n,matchesFilter:l({label:n.name})})}}if(null==this._groupByFunction){const e=t.filter((e=>{let{matchesFilter:t}=e;return t})).map((e=>{let{template:t,layer:l}=e;return this._createItem(t,l)}));return this._releasePreviousItems(),e}const r=new Map;for(const a of t){var o;const{template:e,layer:t}=a,l=this._groupByFunction({template:e,layer:t}),{key:n,label:i}=null!=l.key?l:v.nullGroupBy;r.has(n)||r.set(n,{label:i,templateItemInfos:[]}),null===(o=r.get(n))||void 0===o||o.templateItemInfos.push(a)}const s=[];for(const a of r.values()){const{label:e,templateItemInfos:t}=a,n=t.filter((e=>{let{matchesFilter:t}=e;return t})),i=l({label:e})?t:t.length>0?n:[];if(i.length>0){const t=i.map((e=>{let{template:t,layer:l}=e;return this._createItem(t,l)}));s.push(this._createGroup(e,t))}}return 1===s.length&&s[0].label===v.nullGroupBy.label?(this._releasePreviousItems(),s[0].items):(this._releasePreviousItems(),s)}refresh(){this.notifyChange("items")}select(e){var t;let{emit:l=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=this.selectedItem,i=(null===e||void 0===e?void 0:e.clone())||null;this._set("selectedItem",i),l&&this.emit("select",{item:i,oldItem:n,template:null!==(t=null===i||void 0===i?void 0:i.template)&&void 0!==t?t:null})}_createItem(e,t){var l,n;const i=this._itemPool.acquire(),r=null!==(l=null===(n=this.disabledItemFunction)||void 0===n?void 0:n.call(this,{template:e,layer:t}))&&void 0!==l&&l;return i.set({disabled:r,layer:t,template:e}),i}_createGroup(e,t){const l=this._groupPool.acquire();return l.set("label",e),l.items=t,l}_releasePreviousItems(){this._destroyItems(this._get("items"))}_destroyItems(e){e&&(e[0]instanceof u.Z?e.forEach((e=>this._destroyItem(e))):e.forEach((e=>this._destroyGroup(e))))}_destroyGroup(e){e.items.forEach((e=>this._destroyItem(e))),e.items.length=0,this._groupPool.release(e)}_destroyItem(e){e.layer=null,e.template=null,this._itemPool.release(e)}_ensureGroupByObject(e){return"string"==typeof e?{key:e,label:e}:e}};_.nullGroupBy={key:Symbol(),label:"Other\u200b"},_._nullFilterFunction=e=>!0,(0,n._)([(0,s.Cb)()],_.prototype,"_featureTemplatesByLayer",null),(0,n._)([(0,s.Cb)()],_.prototype,"_groupByFunction",void 0),(0,n._)([(0,s.Cb)()],_.prototype,"disabled",void 0),(0,n._)([(0,s.Cb)()],_.prototype,"disabledItemFunction",void 0),(0,n._)([(0,s.Cb)()],_.prototype,"filterFunction",void 0),(0,n._)([(0,s.Cb)()],_.prototype,"groupBy",null),(0,n._)([(0,s.Cb)()],_.prototype,"layers",null),(0,n._)([(0,s.Cb)()],_.prototype,"state",null),(0,n._)([(0,s.Cb)({readOnly:!0})],_.prototype,"numberOfFeatureTemplates",null),(0,n._)([(0,s.Cb)({readOnly:!0})],_.prototype,"items",null),(0,n._)([(0,s.Cb)({readOnly:!0})],_.prototype,"selectedItem",void 0),_=v=(0,n._)([(0,a.j)("esri.widgets.FeatureTemplates.FeatureTemplatesViewModel")],_);const g=_},63535:(e,t,l)=>{l.d(t,{sr:()=>u,x1:()=>m});var n=l(96919),i=l(80975),r=l(67005);const o="esri-item-list",s="".concat(o,"__list-item"),a={base:o,filterContainerSticky:"".concat(o,"__filter-container--sticky"),group:"".concat(o,"__group"),groupHeader:"".concat(o,"__group__header"),item:s,itemDisabled:"".concat(s,"--disabled"),itemIcon:"".concat(s,"-icon"),itemContentEnd:"".concat(s,"-content-end"),noMatchesMessage:"".concat(o,"__no-matches-message"),scroller:"".concat(o,"__scroller"),scrollerEnabled:"".concat(o,"__scroller--enabled")},d=4;function u(e){var t,l;const{disabled:n,filterText:i="",id:o,messages:s,onFilterChange:a,...d}=e;return(0,r.u)("div",{key:o},null===(t=e.filterEnabled)||void 0===t||t?p({disabled:n,filterText:i,id:o,messages:s,onFilterChange:a}):null,c({...d,disabled:n,enableListScroll:null===(l=e.enableListScroll)||void 0===l||l,filterText:i,messages:s}))}function c(e){const{headingLevel:t,items:l,...n}=e;return 0===l.length?(0,r.u)("div",{class:a.noMatchesMessage,key:"no-matches"},e.messages.noMatches):(0,r.u)("div",{class:(0,i.Sh)({[a.scroller]:!0,[a.scrollerEnabled]:!!e.enableListScroll}),key:"item-container"},l.map((e=>function(e){return!!e.items}(e)?y({...n,group:e,headingLevel:t}):m({...n,grouped:!0,item:e}))))}function p(e){const{disabled:t,messages:l,filterText:n,enableListScroll:i}=e;return(0,r.u)("div",{class:i?void 0:a.filterContainerSticky,key:"filter"},(0,r.u)("calcite-input",{disabled:t,placeholder:l.filterPlaceholder,type:"search",value:n,onCalciteInputInput:t=>{const l=t.currentTarget;e.onFilterChange&&e.onFilterChange(l.value)}}))}function m(e){var t,l,n;const{disabled:o,grouped:s,identify:d,item:u,onItemMouseEnter:c,onItemMouseLeave:p,onItemSelect:m,renderIcon:y,renderCustomItem:b,renderItemContent:f,renderItemContentEnd:_,renderItemLabel:g,renderItemDescription:I,selectedItem:C}=e,w=h(u,d),F=w===h(C,d),M=null===b||void 0===b?void 0:b(e);if(M)return M;const T=null===f||void 0===f?void 0:f(u),L=null===_||void 0===_?void 0:_(u),B=!(!u.disabled&&!o);return(0,r.u)("calcite-list-item",{afterUpdate:e=>{e.selected=F},"aria-level":s?"2":"",class:(0,i.Sh)({[a.item]:!0,[a.itemDisabled]:B}),"data-item":u,description:T?void 0:null!==(t=null===I||void 0===I?void 0:I(u))&&void 0!==t?t:void 0,disabled:B,key:w,label:T?void 0:null!==(l=null!==(n=null===g||void 0===g?void 0:g(u))&&void 0!==n?n:u.label)&&void 0!==l?l:void 0,onmouseenter:e=>null===c||void 0===c?void 0:c(v(e)),onmouseleave:e=>null===p||void 0===p?void 0:p(v(e)),selected:F,tabIndex:B?-1:0,onCalciteListItemSelect:e=>{e.preventDefault(),null===m||void 0===m||m(v(e))}},(0,r.u)("div",{class:a.itemIcon,key:"content-start",slot:"content-start"},null===y||void 0===y?void 0:y(u)),T?(0,r.u)("div",{key:"content",slot:"content"},T):null,L?(0,r.u)("div",{class:a.itemContentEnd,key:"content-end",slot:"content-end"},L):null)}function h(e,t){return e?"".concat((null===t||void 0===t?void 0:t(e))||e.id,"__").concat(e.label):""}function v(e){return e.currentTarget["data-item"]}function y(e){var t;const{disabled:l,group:i,headingLevel:o=d,selectionMode:s="none",renderCustomGroupContent:u,...c}=e,p=null===u||void 0===u?void 0:u(e);return(0,r.u)("div",{class:a.group,key:null!==(t=i.label)&&void 0!==t?t:void 0},(0,r.u)(n.X,{class:a.groupHeader,level:o},i.label),p||(0,r.u)("calcite-list",{disabled:l,selectionAppearance:"border",selectionMode:s},i.items.map((e=>m({...c,disabled:l,item:e,grouped:!0})))))}},59238:(e,t,l)=>{l.d(t,{Z:()=>p});var n,i=l(27366),r=l(52639),o=l(7138),s=l(94172),a=l(49861),d=(l(93169),l(32718),l(84936),l(69912)),u=l(86828);let c=n=class extends o.default{constructor(e){super(e),this._activeFetchInfo={id:null,request:null},this.disabled=!1,this.layer=null,this.template=null,this.thumbnail=null}initialize(){this.addHandles((0,s.watch)((()=>{const{layer:e}=this;return[e&&"renderer"in e?e.renderer:null,this.template]}),(()=>{this._activeFetchInfo.id=null,this._activeFetchInfo.request=null,this._set("thumbnail",null)}),s.initial))}get description(){var e;return null===(e=this.template)||void 0===e?void 0:e.description}set description(e){this.template&&(this.template.description=e)}get label(){var e;return null===(e=this.template)||void 0===e?void 0:e.name}set label(e){this.template&&(this.template.name=e)}get id(){var e,t;return"".concat(null!==(e=this.label)&&void 0!==e?e:"","\u2013").concat(null===(t=this.layer)||void 0===t?void 0:t.id)}get supportsUpload(){var e;return"scene"===(null===(e=this.layer)||void 0===e?void 0:e.type)}clone(){const e=null!=this.thumbnail?this.thumbnail.cloneNode(!0):null,t=new n({layer:this.layer,template:this.template});return t._set("thumbnail",e),t}static async fetchThumbnail(e,t){var n,i,o;const s=await async function(e,t){const{renderer:n}=e;if(n){const e=new r.Z({attributes:t.prototype.attributes}),l=await n.getSymbolAsync(e);if(l)return l}return async function(e){const{geometryType:t}=e,n="point"===t||"multipoint"===t?await Promise.resolve().then(l.bind(l,16072)):"polyline"===t?await Promise.resolve().then(l.bind(l,14404)):"polygon"===t||"mesh"===t||"multipatch"===t?await Promise.resolve().then(l.bind(l,61459)):null;return n?new n.default:null}(e)}(e,t);if(null==s)return null;const a={maxSize:36};return"dictionary"===(null===(n=e.renderer)||void 0===n?void 0:n.type)&&(a.fieldMap=null!==(i=e.renderer.fieldMap)&&void 0!==i?i:void 0,a.feature={attributes:null!==(o=t.prototype.attributes)&&void 0!==o?o:{}}),await(0,u.l3)(s,a)}};(0,i._)([(0,a.Cb)()],c.prototype,"description",null),(0,i._)([(0,a.Cb)()],c.prototype,"disabled",void 0),(0,i._)([(0,a.Cb)()],c.prototype,"label",null),(0,i._)([(0,a.Cb)()],c.prototype,"layer",void 0),(0,i._)([(0,a.Cb)()],c.prototype,"template",void 0),(0,i._)([(0,a.Cb)({readOnly:!0})],c.prototype,"thumbnail",void 0),(0,i._)([(0,a.Cb)()],c.prototype,"id",null),(0,i._)([(0,a.Cb)()],c.prototype,"supportsUpload",null),c=n=(0,i._)([(0,d.j)("esri.widgets.FeatureTemplates.TemplateItem")],c);const p=c},36571:(e,t,l)=>{l.d(t,{J:()=>n});const n=e=>null==e||"object"!=typeof e?[]:[..."templates"in e&&Array.isArray(e.templates)?e.templates:[],..."types"in e&&Array.isArray(e.types)?e.types.flatMap((e=>e.templates)):[]]}}]);
//# sourceMappingURL=72521.b10375bc.chunk.js.map