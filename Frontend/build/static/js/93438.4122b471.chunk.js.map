{"version":3,"file":"static/js/93438.4122b471.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/views/2d/engine/BitmapContainer.js","../node_modules/@arcgis/core/views/2d/engine/webgl/collisions/BoundingBox.js","../node_modules/@arcgis/core/views/2d/layers/BaseDynamicLayerView2D.js","../node_modules/@arcgis/core/views/2d/viewStateUtils.js","../node_modules/@arcgis/core/views/2d/layers/support/ExportStrategy.js","../node_modules/@arcgis/core/views/layers/RefreshableLayerView.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{brushes as e}from\"./brushes.js\";import{WGLDrawPhase as r}from\"./webgl/enums.js\";import s from\"./webgl/WGLContainer.js\";class a extends s{constructor(){super(...arguments),this._hasCrossfade=!1}get requiresDedicatedFBO(){return super.requiresDedicatedFBO||this._hasCrossfade}beforeRender(e){super.beforeRender(e),this._manageFade()}prepareRenderPasses(s){const a=s.registerRenderPass({name:\"bitmap\",brushes:[e.bitmap],target:()=>this.children,drawPhase:r.MAP});return[...super.prepareRenderPasses(s),a]}_manageFade(){this.children.reduce(((e,r)=>e+(r.inFadeTransition?1:0)),0)>=2?(this.children.forEach((e=>e.blendFunction=\"additive\")),this._hasCrossfade=!0):(this.children.forEach((e=>e.blendFunction=\"standard\")),this._hasCrossfade=!1)}}export{a as BitmapContainer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{fromValues as t,create as h}from\"../../../../../core/libs/gl-matrix-2/factories/vec2f32.js\";class i{constructor(i,e,s,r){this.computedX=0,this.computedY=0,this.center=t(i,e),this.centerT=h(),this.halfWidth=s/2,this.halfHeight=r/2,this.width=s,this.height=r}get x(){return this.center[0]}get y(){return this.center[1]}get blX(){return this.center[0]+this.halfWidth}get blY(){return this.center[1]+this.halfHeight}get trX(){return this.center[0]-this.halfWidth}get trY(){return this.center[1]-this.halfHeight}get xmin(){return this.x-this.halfWidth}get xmax(){return this.x+this.halfWidth}get ymin(){return this.y-this.halfHeight}get ymax(){return this.y+this.halfHeight}set x(t){this.center[0]=t}set y(t){this.center[1]=t}clone(){return new i(this.x,this.y,this.width,this.height)}serialize(t){return t.writeF32(this.center[0]),t.writeF32(this.center[1]),t.push(this.width),t.push(this.height),t}findCollisionDelta(t,h=4){const i=Math.abs(t.centerT[0]-this.centerT[0]),e=Math.abs(t.centerT[1]-this.centerT[1]),s=(t.halfWidth+this.halfWidth+h)/i,r=(t.halfHeight+this.halfHeight+h)/e,n=Math.min(s,r);return Math.log2(n)}extend(t){const h=Math.min(this.xmin,t.xmin),i=Math.min(this.ymin,t.ymin),e=Math.max(this.xmax,t.xmax)-h,s=Math.max(this.ymax,t.ymax)-i,r=h+e/2,n=i+s/2;this.width=e,this.height=s,this.halfWidth=e/2,this.halfHeight=s/2,this.x=r,this.y=n}static deserialize(t){const h=t.readF32(),e=t.readF32(),s=t.readInt32(),r=t.readInt32();return new i(h,e,s,r)}}export{i as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../chunks/tslib.es6.js\";import e from\"../../../core/Logger.js\";import{isAbortError as r}from\"../../../core/promiseUtils.js\";import{property as s}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/RandomLCG.js\";import{subclass as i}from\"../../../core/accessorSupport/decorators/subclass.js\";import{BitmapContainer as a}from\"../engine/BitmapContainer.js\";import{LayerView2DMixin as o}from\"./LayerView2D.js\";import p from\"./support/ExportStrategy.js\";import n from\"../../layers/LayerView.js\";import h from\"../../layers/RefreshableLayerView.js\";let m=class extends(h(o(n))){update(t){this._strategy.update(t).catch((t=>{r(t)||e.getLogger(this).error(t)})),this.notifyChange(\"updating\")}attach(){this._bitmapContainer=new a,this.container.addChild(this._bitmapContainer),this._strategy=new p({container:this._bitmapContainer,fetchSource:this.fetchBitmapData.bind(this),requestUpdate:this.requestUpdate.bind(this)})}detach(){this._strategy.destroy(),this._strategy=null,this.container.removeChild(this._bitmapContainer),this._bitmapContainer.removeAllChildren()}viewChange(){}moveEnd(){this.requestUpdate()}fetchBitmapData(t,e,r){return this.layer.fetchImageBitmap(t,e,r)}async doRefresh(){this.requestUpdate()}isUpdating(){return this._strategy.updating||this.updateRequested}};t([s()],m.prototype,\"_strategy\",void 0),t([s()],m.prototype,\"updating\",void 0),m=t([i(\"esri.views.2d.layers.BaseDynamicLayerView2D\")],m);const d=m;export{d as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nconst t=Math.PI/180;function n(n){return n*t}function o(t,o){const a=n(o.rotation),r=Math.abs(Math.cos(a)),s=Math.abs(Math.sin(a)),[u,c]=o.size;return t[0]=Math.round(c*s+u*r),t[1]=Math.round(c*r+u*s),t}function a(t,n,o,a){const[r,s]=n,[u,c]=a,h=.5*o;return t[0]=r-h*u,t[1]=s-h*c,t[2]=r+h*u,t[3]=s+h*c,t}export{a as getBBox,o as getOuterSize};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../../chunks/tslib.es6.js\";import e from\"../../../../core/Accessor.js\";import\"../../../../core/has.js\";import{debounce as i,throwIfAborted as o,throwIfAbortError as r,eachAlways as s}from\"../../../../core/promiseUtils.js\";import{property as a}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/Logger.js\";import\"../../../../core/RandomLCG.js\";import{subclass as n}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{create as p,toExtent as m}from\"../../../../geometry/support/aaBoundingRect.js\";import{getInfo as h}from\"../../../../geometry/support/spatialReferenceUtils.js\";import l from\"../../../../layers/support/TileInfo.js\";import{getOuterSize as d,getBBox as c}from\"../../viewStateUtils.js\";import{Bitmap as u}from\"../../engine/Bitmap.js\";import g from\"../../tiling/TileInfoView.js\";import f from\"../../tiling/TileKey.js\";const y=p(),x=[0,0],S=new f(0,0,0,0),w={container:null,fetchSource:null,requestUpdate:null,imageMaxWidth:2048,imageMaxHeight:2048,imageRotationSupported:!1,imageNormalizationSupported:!1,hidpi:!1};let M=class extends e{constructor(t){super(t),this._imagePromise=null,this.bitmaps=[],this.hidpi=w.hidpi,this.imageMaxWidth=w.imageMaxWidth,this.imageMaxHeight=w.imageMaxHeight,this.imageRotationSupported=w.imageRotationSupported,this.imageNormalizationSupported=w.imageNormalizationSupported,this.update=i((async(t,e)=>{if(o(e),!t.stationary||this.destroyed)return;const i=t.state,s=h(i.spatialReference),a=this.hidpi?t.pixelRatio:1,n=i.worldScreenWidth>0,p=n&&this.imageNormalizationSupported&&i.worldScreenWidth<i.size[0],m=Math.round((this.imageMaxWidth??0)/a),l=Math.round((this.imageMaxHeight??0)/a);p?(x[0]=i.worldScreenWidth,x[1]=i.size[1]):this.imageRotationSupported?(x[0]=i.size[0],x[1]=i.size[1]):d(x,i);const c=Math.floor(x[0])>m||Math.floor(x[1])>l,u=s&&(i.extent.xmin<s.valid[0]||i.extent.xmax>s.valid[1]),g=!this.imageNormalizationSupported&&u,f=!c&&!g,y=this.imageRotationSupported?i.rotation:0,S=this.container.children.slice();if(f){const t=p?i.paddedViewState.center:i.center;this._imagePromise=this._singleExport(i,x,t,i.resolution,y,a,e)}else{let t=Math.min(m,l);n&&(t=Math.min(i.worldScreenWidth,t),t=Math.round(i.worldScreenWidth/Math.ceil(i.worldScreenWidth/t))),this._imagePromise=this._tiledExport(i,t,a,e)}try{const t=await this._imagePromise??[];o(e);const i=[];if(this._imagePromise=null,this.destroyed)return;this.bitmaps=t;for(const e of S)t.includes(e)||i.push(e.fadeOut().then((()=>{e.remove(),e.destroy()})));for(const e of t)i.push(e.fadeIn());await Promise.all(i)}catch(w){this._imagePromise=null,r(w)}}),5e3),this.updateExports=i((async t=>{const e=[];for(const i of this.container.children){if(!i.visible||!i.stage)return;e.push(t(i).then((()=>{i.invalidateTexture(),i.requestRender()})))}this._imagePromise=s(e).then((()=>this._imagePromise=null)),await this._imagePromise}))}destroy(){this.bitmaps.forEach((t=>t.destroy())),this.bitmaps=[]}get updating(){return!this.destroyed&&null!==this._imagePromise}async _export(t,e,i,r,s,a){const n=await this.fetchSource(t,Math.floor(e*s),Math.floor(i*s),{rotation:r,pixelRatio:s,signal:a});o(a);const p=new u(null,!0);return p.x=t.xmin,p.y=t.ymax,p.resolution=t.width/e,p.rotation=r,p.pixelRatio=s,p.opacity=0,this.container.addChild(p),await p.setSourceAsync(n,a),o(a),p}async _singleExport(t,e,i,o,r,s,a){c(y,i,o,e);const n=m(y,t.spatialReference);return[await this._export(n,e[0],e[1],r,s,a)]}_tiledExport(t,e,i,o){const r=l.create({size:e,spatialReference:t.spatialReference,scales:[t.scale]}),s=new g(r),a=s.getTileCoverage(t);if(!a)return null;const n=[];return a.forEach(((r,a,p,h)=>{S.set(r,a,p,0),s.getTileBounds(y,S);const l=m(y,t.spatialReference);n.push(this._export(l,e,e,0,i,o).then((t=>(0!==h&&(S.set(r,a,p,h),s.getTileBounds(y,S),t.x=y[0],t.y=y[3]),t))))})),Promise.all(n)}};t([a()],M.prototype,\"_imagePromise\",void 0),t([a()],M.prototype,\"bitmaps\",void 0),t([a()],M.prototype,\"container\",void 0),t([a()],M.prototype,\"fetchSource\",void 0),t([a()],M.prototype,\"hidpi\",void 0),t([a()],M.prototype,\"imageMaxWidth\",void 0),t([a()],M.prototype,\"imageMaxHeight\",void 0),t([a()],M.prototype,\"imageRotationSupported\",void 0),t([a()],M.prototype,\"imageNormalizationSupported\",void 0),t([a()],M.prototype,\"requestUpdate\",void 0),t([a()],M.prototype,\"updating\",null),M=t([n(\"esri.views.2d.layers.support.ExportStrategy\")],M);const _=M;export{_ as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import e from\"../../core/Logger.js\";import{isAbortError as s}from\"../../core/promiseUtils.js\";import{on as o}from\"../../core/reactiveUtils.js\";import\"../../core/has.js\";import\"../../core/RandomLCG.js\";import\"../../core/Error.js\";import{subclass as t}from\"../../core/accessorSupport/decorators/subclass.js\";const i=i=>{let a=class extends i{initialize(){this.addHandles(o((()=>this.layer),\"refresh\",(r=>{this.doRefresh(r.dataChanged).catch((r=>{s(r)||e.getLogger(this).error(r)}))})),\"RefreshableLayerView\")}};return a=r([t(\"esri.views.layers.RefreshableLayerView\")],a),a};export{i as default};\n"],"names":["a","s","constructor","super","arguments","this","_hasCrossfade","requiresDedicatedFBO","beforeRender","e","_manageFade","prepareRenderPasses","registerRenderPass","name","brushes","bitmap","target","children","drawPhase","r","MAP","reduce","inFadeTransition","forEach","blendFunction","i","computedX","computedY","center","t","centerT","h","halfWidth","halfHeight","width","height","x","y","blX","blY","trX","trY","xmin","xmax","ymin","ymax","clone","serialize","writeF32","push","findCollisionDelta","length","undefined","Math","abs","n","min","log2","extend","max","deserialize","readF32","readInt32","m","o","update","_strategy","catch","getLogger","error","notifyChange","attach","_bitmapContainer","container","addChild","p","fetchSource","fetchBitmapData","bind","requestUpdate","detach","destroy","removeChild","removeAllChildren","viewChange","moveEnd","layer","fetchImageBitmap","doRefresh","isUpdating","updating","updateRequested","prototype","d","PI","rotation","cos","sin","u","c","size","round","S","f","w","M","_imagePromise","bitmaps","hidpi","imageMaxWidth","imageMaxHeight","imageRotationSupported","imageNormalizationSupported","async","_this$imageMaxWidth","_this$imageMaxHeight","stationary","destroyed","state","spatialReference","pixelRatio","worldScreenWidth","l","floor","extent","valid","g","slice","paddedViewState","_singleExport","resolution","ceil","_tiledExport","_await$this$_imagePro","includes","fadeOut","then","remove","fadeIn","Promise","all","updateExports","visible","stage","invalidateTexture","requestRender","_export","signal","opacity","setSourceAsync","create","scales","scale","getTileCoverage","set","getTileBounds","_","initialize","addHandles","dataChanged"],"sourceRoot":""}