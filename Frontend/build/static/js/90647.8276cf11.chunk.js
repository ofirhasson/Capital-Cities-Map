"use strict";(self.webpackChunknorthwind=self.webpackChunknorthwind||[]).push([[90647],{68859:(e,n,t)=>{t.d(n,{K:()=>o,U:()=>l});var i=t(12400),a=t(79803),r=t(50628);function o(e,n,t,i){var o,l;if((0,a.canProjectWithoutEngine)(e.spatialReference,t)){var s;c[0]=e.x,c[1]=e.y;const a=e.z;return c[2]=null!==(s=null!==a&&void 0!==a?a:i)&&void 0!==s?s:0,(0,r.projectBuffer)(c,e.spatialReference,0,n,t,0,1)}const u=(0,a.tryProjectWithZConversion)(e,t);return!!u&&(n[0]=null===u||void 0===u?void 0:u.x,n[1]=null===u||void 0===u?void 0:u.y,n[2]=null!==(o=null!==(l=null===u||void 0===u?void 0:u.z)&&void 0!==l?l:i)&&void 0!==o?o:0,!0)}async function l(e,n,t,i,r){return await(0,a.initializeProjection)(e.spatialReference,t,null,r),o(e,n,t,i)}const c=(0,i.Ue)()},5986:(e,n,t)=>{t.d(n,{S:()=>r});t(79803);var i=t(78952),a=t(68859);function r(e,n,t,i,r){return!(null==n||null==i||e.length<2)&&(o.x=e[0],o.y=e[1],o.z=e[2],o.spatialReference=n,(0,a.K)(o,t,i,r))}const o=(0,t(55946).T)(0,0,0,i.Z.WGS84)},55946:(e,n,t)=>{function i(e,n,t,i){return{x:e,y:n,z:t,hasZ:null!=t,hasM:!1,spatialReference:i,type:"point"}}function a(e,n,t,i,a){e.x=n,e.y=t,e.z=i,e.hasZ=null!=i,e.spatialReference=a}t.d(n,{T:()=>i,y:()=>a})},87532:(e,n,t)=>{t.d(n,{dP:()=>u,lM:()=>c,wH:()=>s});var i=t(32035),a=t(12400),r=t(83448),o=t(65156),l=t(88153);function c(e,n,t,i){return null!=e.renderCoordsHelper.fromRenderCoords(n.eye,m,i)&&(0,o.BD)(t,m)}function s(e,n){var t;return e.elevationProvider&&null!==(t=e.elevationProvider.getElevation(n[0],n[1],n[2],e.renderCoordsHelper.spatialReference,"ground"))&&void 0!==t?t:0}function u(e,n,t,a){const o=e.state.camera.clone();n&&t&&a&&(o.eye=n,o.center=t,o.up=a),function(e,n,t){let a=d[e.viewingMode];a||(a=(0,l.Z8)(e.state.viewingMode),a.options.backfacesTerrain=!e.state.isGlobal,a.options.invisibleTerrain=!0,d[e.viewingMode]=a);const{isGlobal:o}=e.state;return!(!e.sceneIntersectionHelper.intersectRay(n,a,t)||f(e,n.origin,t))||!(!e.renderCoordsHelper.intersectManifold(n,0,t)||f(e,n.origin,t))||!!o&&function(e,n,t){const a=(0,i.m)(e.origin,e.origin)-t*t,r=a>0?Math.sqrt(a)/3:1;return(0,i.j)(n,e.direction,r/(0,i.l)(e.direction)),(0,i.g)(n,n,e.origin),!0}(n,t,(0,r.Iu)(e.spatialReference).radius)}(e,o.ray,p)||(0,i.c)(p,o.center);const c=e.state.constraints,s=c.minimumPoiDistance;if((0,i.a)(o.eye,p)<s){const n=c.collision.enabled;(0,i.c)(h,o.viewForward),(0,i.j)(h,h,s),n?o.eye=(0,i.f)(m,p,h):(0,i.g)(p,o.eye,h);const t=e.renderCoordsHelper,a=t.getAltitude(o.eye),r=c.collision.elevationMargin;n&&a<r&&((0,i.f)(h,p,o.eye),o.eye=t.setAltitude(m,r,o.eye),(0,i.g)(p,o.eye,h))}return o.center=p,o}function f(e,n,t){if(!e.state.isGlobal||!e.stateManager.constraintsManager)return!1;const a=s(e,n),r=e.stateManager.constraintsManager.nearFarHeuristic,{far:o}=r.compute(n,t,e.renderDataExtent,a,g),l=o*o;return(0,i.a)(n,t)>l}const d={},m=(0,a.Ue)(),p=(0,a.Ue)(),h=(0,a.Ue)(),g={near:0,far:0}},60084:(e,n,t)=>{t.d(n,{Q8:()=>le,ZN:()=>He,t_:()=>xe,Xt:()=>ge,n3:()=>de,gL:()=>we,Hm:()=>ve,UI:()=>ye,Ic:()=>Pe,S9:()=>ke,P$:()=>Re,h5:()=>se,kE:()=>fe,l0:()=>pe,_U:()=>he,sO:()=>De,HH:()=>Ve,EO:()=>_e});var i=t(63665),a=t(17768),r=t(32718),o=t(16889),l=t(66978),c=t(32035),s=t(12400),u=t(83448),f=t(848),d=t(79803),m=t(78952),p=t(68859),h=t(5629),g=t(5986),y=t(29691),v=t(92975),w=t(72619);var x=t(50951),M=t(87532),R=t(29134),Z=t(7025),b=t(53866),S=t(71917);const T=(0,s.al)(0,1,0),U=(0,s.al)(0,0,1),z=(0,Z.Ue)(),C=(0,s.Ue)(),G=(0,s.Ue)();function j(e,n,t){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:(0,S.d)();const{direction:a,up:r}=i;return(0,R.QO)(z,-(0,o.Vl)(n)),(0,R.lM)(z,z,(0,o.Vl)(t)),(0,c.h)(a,U,z),(0,c.j)(a,a,-1),(0,c.h)(r,T,z),i}function P(e,n,t,i,a){const r=e.renderSpatialReference,o=e.map&&e.spatialReference||n.spatialReference;return(0,p.K)(n,C,r),(0,p.K)(n,G,r),C[0]-=t/2,G[0]+=t/2,C[1]-=i/2,G[1]+=i/2,(0,g.S)(C,r,C,o),(0,g.S)(G,r,G,o),a?(a.xmin=C[0],a.ymin=C[1],a.xmax=G[0],a.ymax=G[1],a.spatialReference=o):a=new b.Z(C[0],C[1],G[0],G[1],o),a}const k=Object.freeze(Object.defineProperty({__proto__:null,directionToHeadingTilt:function(e,n,t,i){return(0,S.t)(n,t,i,U,T)},eyeForCenterWithHeadingTilt:function(e,n,t,i){const a=j(e,t,i),r=(0,s.Ue)();return(0,c.j)(r,a.direction,-n),(0,c.g)(r,r,e),{up:a.up,eye:r,heading:t,tilt:i}},eyeTiltToLookAtTilt:function(e){return(0,o.Vl)(e)},headingTiltToDirectionUp:j,lookAtTiltToEyeTilt:function(e){return(0,o.BV)(e)},toExtent:P},Symbol.toStringTag,{value:"Module"}));var V=t(81753),A=t(696);const O=(0,s.al)(0,0,1),B=(0,c.n)((0,s.Ue)(),(0,s.al)(1,1,1)),E=new a.pE(-180,180),I=(0,Z.Ue)(),D=(0,s.Ue)(),_=(0,s.Ue)();function H(e,n,t){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:(0,S.d)();(0,c.b)(D,e,O),0===(0,c.m)(D,D)&&(0,c.b)(D,e,B),(0,R.Us)(I,-(0,o.Vl)(n),e),(0,R.U1)(I,I,-(0,o.Vl)(t),D);const{up:a,direction:r}=i;return(0,c.b)(a,D,e),(0,c.n)(a,a),(0,c.h)(a,a,I),(0,c.n)(r,e),(0,c.k)(r,r),(0,c.h)(r,r,I),i}function F(e){const n=e[1];e[1]=-e[2],e[2]=n}function W(e,n){const t=H(n,e.heading,e.tilt);return e.up=t.up,e}function K(e,n,t,i,r){let l,c,s,f;const d=n.latitude,p=(0,u.Iu)(e.spatialReference).radius,h=n.longitude,g=(0,A.Be)(d,t,p)/2;l=h-g,c=h+g;const y=(0,o.Vl)(d),v=(1+Math.sin(y))/(1-Math.sin(y)),w=(v+1)*Math.tan(i/p/2),x=w*w;function M(e){const n=Math.PI/2;return(e=a.c5.normalize(e,-n))>n&&(e=Math.PI-e),e}if(s=1.5*Math.PI-2*Math.atan(.5*(w+Math.sqrt(4*v+x))),f=s+i/p,s=M(s),f=M(f),f<s){const e=f;f=s,s=e}if(s=Math.max((0,o.BV)(s),-90),f=Math.min((0,o.BV)(f),90),c=E.monotonic(l,c),c-l>180){const e=(c-l-180)/2;l+=e,c-=e}const R=e.spatialReference&&e.spatialReference.isGeographic?e.spatialReference:m.Z.WGS84;return r?(r.xmin=l,r.ymin=s,r.xmax=c,r.ymax=f,r.spatialReference=R):r=new b.Z(l,s,c,f,R),e.spatialReference&&e.spatialReference.isWebMercator&&(0,V.$)(r,!1,r),r}const L=Object.freeze(Object.defineProperty({__proto__:null,directionToHeadingTilt:function(e,n,t,i){const a=D,r=_;return(0,c.n)(a,e),(0,c.b)(_,a,O),0===(0,c.m)(_,_)&&(0,c.b)(_,a,B),(0,c.b)(r,_,a),(0,S.t)(n,t,i,a,r)},eyeForCenterWithHeadingTilt:function(e,n,t,i){const a={eye:(0,s.Ue)(),up:null,tilt:i,heading:t},r=D;r[0]=e[0],r[1]=e[2],r[2]=-e[1];const l=n,u=(0,o.Vl)(t),f=(0,o.Vl)(i),d=Math.sin(u),m=Math.cos(u),p=Math.sin(f),h=Math.cos(f),g=(0,c.l)(r);let y;if(Math.abs(f)<1e-8)y=l+g;else{const e=g/p,n=(0,o.Kt)(l/e),t=Math.PI-f-n;y=e*Math.sin(t)}const v=h*l,w=l*l*(p*p),x=m*m*w,M=y-v,R=M*M,Z=x*(x+R-r[1]*r[1]);if(Z<0)return(0,c.j)(a.eye,r,y/g),a.tilt=0,W(a,e);const b=Math.sqrt(Z),S=r[1]*M,T=x+R;let U;if(U=m>0?-b+S:b+S,Math.abs(T)<1e-8)return g<1e-8?(a.eye[0]=0,a.eye[1]=0,a.eye[2]=l):(0,c.j)(a.eye,r,y/g),a.tilt=0,F(a.eye),W(a,e);a.eye[1]=U/T;const z=d*d*w,C=p*l,G=m*C*a.eye[1],j=a.eye[1]*a.eye[1],P=1-j,k=Math.sqrt(P),V=x*j+z-2*G*k*M+P*R;return Math.abs(V)<1e-8?((0,c.j)(a.eye,r,y/g),a.tilt=0,F(a.eye),W(a,e)):(a.eye[0]=(P*(y*r[0]-v*r[0])-C*k*(r[0]*a.eye[1]*m+r[2]*d))/V,a.eye[2]=(P*(y*r[2]-v*r[2])-C*k*(r[2]*a.eye[1]*m-r[0]*d))/V,(0,c.j)(a.eye,a.eye,y),F(a.eye),W(a,e))},eyeTiltToLookAtTilt:function(e,n,t){const i=(0,o.Vl)(e),a=(0,c.l)(n);return(0,o.Kt)(t/(a/Math.sin(i)))+i},headingTiltToDirectionUp:H,lookAtTiltToEyeTilt:function(e,n,t){const i=(0,c.l)(n),a=Math.sqrt(t*t+i*i-2*t*i*Math.cos(Math.PI-e)),r=(0,o.Kt)(t/(a/Math.sin(e)));return(0,o.BV)(e-r)},toExtent:K},Symbol.toStringTag,{value:"Module"}));var q=t(77648),Q=t(92028);const J=()=>r.Z.getLogger("esri.views.3d.support.cameraUtils"),N=39.37,X=96,Y=1,$=8,ee=5,ne=1,te=(0,s.Ue)(),ie={heading:0,tilt:0},ae=(0,s.Ue)(),re=new a.pE(-20037508.342788905,20037508.342788905),oe=new a.pE(-180,180);var le,ce;function se(e){var n;return null!==(n=e.spatialReference)&&void 0!==n?n:m.Z.WGS84}function ue(e){return"global"===e.viewingMode?L:k}function fe(e,n,t,i,a){return ue(e).headingTiltToDirectionUp(n,t,i,a)}function de(e,n){if(null==n)return null;const t=e.renderSpatialReference,i=ue(e).headingTiltToDirectionUp,a=(0,s.Ue)();if(!(0,p.K)(n.position,a,t))return null;const r=i(a,n.heading,n.tilt);(0,c.j)(r.direction,r.direction,e.state.camera.distance),(0,c.g)(r.direction,r.direction,a);const l=(0,M.dP)(e,a,r.direction,r.up);return l.fov=(0,o.Vl)(n.fov),l.row=n.layout.row,l.rows=n.layout.rows,l.column=n.layout.column,l.columns=n.layout.columns,l}(ce=le||(le={}))[ce.LOCKED=0]="LOCKED",ce[ce.ADJUST=1]="ADJUST";const me=(0,s.Ue)();function pe(e,n,t){const a=e.renderSpatialReference,r=xe(e,n.eye,n.viewForward,n.up,ie);let l=se(e);return(0,g.S)(n.eye,a,me,l)||(l=m.Z.WGS84,(0,g.S)(n.eye,a,me,l)),null==t?t=new i.Z(new f.Z(me,l),r.heading,r.tilt,(0,o.BV)(n.fov)):(t.position.x=me[0],t.position.y=me[1],t.position.z=me[2],t.position.spatialReference=l,t.heading=r.heading,t.tilt=r.tilt,t.fov=(0,o.BV)(n.fov)),t.layout.row=n.row,t.layout.rows=n.rows,t.layout.column=n.column,t.layout.columns=n.columns,t}function he(e,n,t){const i=e.state.camera,a=i.width/2/i.pixelRatio;return e.renderCoordsHelper.viewingMode===x.JY.Global&&null!=t&&(n*=Math.cos((0,o.Vl)(t))),n/=e.renderCoordsHelper.unitInMeters,a/(X*N/n)/Math.tan(i.fovX/2)}function ge(e,n,t){const i=e.state.camera,a=n*Math.tan(i.fovX/2),r=i.width/2/i.pixelRatio;let l=X*N/(r/a);return e.renderCoordsHelper.viewingMode===x.JY.Global&&null!=t&&(l/=Math.cos((0,o.Vl)(t))),l*e.renderCoordsHelper.unitInMeters}async function ye(e,n,t,i,a,r){return we(e,n,he(e,t,n.latitude),i,a,r)}function ve(e,n,t,i,a,r){return Ee(e,Re(e,i.heading,i.tilt,n,t,a),i.fov,r)}async function we(e,n,t,i,a,r){const o=await Ze(e,i.heading,i.tilt,n,t,a,r);return(0,l.k_)(r),Ie(e,o,i.fov,r)}function xe(e,n,t,i,a){return ue(e).directionToHeadingTilt(n,t,i,a)}function Me(e,n){var t;return!!(e.basemapTerrain&&e.renderCoordsHelper.fromRenderCoords(n,ae,e.spatialReference)&&e.elevationProvider&&(null!==(t=(0,q.KO)(e.elevationProvider,ae))&&void 0!==t?t:0)>ae[2]-ne)}function Re(e,n,t,i,a,r){return be(e,n,t,i instanceof f.Z?i:null,function(e,n){const t=(0,s.Ue)();if(null==n)return(0,c.c)(t,e.state.camera.center);if(n instanceof f.Z){if(!(0,p.K)(n,t,e.renderSpatialReference))return null;const{basemapTerrain:i,elevationProvider:a}=e;if(null==n.z&&null!=i&&null!=a){const i=(0,q.KO)(a,n);null!=i&&e.renderCoordsHelper.setAltitude(t,i)}return t}return(0,c.c)(t,n)}(e,i),a,r)}async function Ze(e,n,t,i,a,r,o){const u=i instanceof f.Z?i:null,d=await async function(e,n,t){const i=(0,s.Ue)();if(null==n)return(0,c.c)(i,e.state.camera.center);if(n instanceof f.Z){const{renderSpatialReference:r,basemapTerrain:o,elevationProvider:c}=e,s=n.spatialReference;if(await(0,p.U)(n,i,r,0,{signal:t}),(0,l.k_)(t),null==n.z&&null!=o&&null!=c){var a;const r=await c.queryElevation(n.x,n.y,null!==(a=n.z)&&void 0!==a?a:0,s,"ground",t);(0,l.k_)(t),null!=r&&e.renderCoordsHelper.setAltitude(i,r)}return i}return(0,c.c)(i,n)}(e,i,o);return(0,l.k_)(o),Se(e,n,t,u,d,a,r,o)}function be(e,n,t,i,a,r,o){if(null==a)return null;if(!i&&(i=new f.Z({spatialReference:se(e)}),!(0,h.f)(a,e.renderSpatialReference,i)))return null;const l=Te(e,n,t,a,r,o);if(Ue(e,t,o)&&Me(e,l.eye)){const{tilt:o,mode:l}=ze(e,t,a,r);return be(e,n,o,i,a,r,l)}return Ce(l,a)}async function Se(e,n,t,i,a,r,o,c){i||(i=new f.Z({spatialReference:se(e)}),await(0,h.A)(a,e.renderSpatialReference,i,{signal:c})||(i=null)),(0,l.k_)(c);const s=Te(e,n,t,a,r,o);if(Ue(e,t,o)&&await async function(e,n,t){var i;if(Me(e,n))return!0;const{elevationProvider:a,spatialReference:r,renderCoordsHelper:o}=e;if(null==a||!o.fromRenderCoords(n,ae,r))return!1;const[c,s,u]=ae,f=null!==(i=await a.queryElevation(c,s,u,r,"ground",t))&&void 0!==i?i:0;return(0,l.k_)(t),f>u-ne}(e,s.eye,c)){(0,l.k_)(c);const{tilt:o,mode:s}=ze(e,t,a,r);return Se(e,n,o,i,a,r,s,c)}return Ce(s,a)}function Te(e,n,t,i,a,r){const o=function(e,n,t,i,a,r){let o=0;return r===le.ADJUST&&function(e,n,t){const i=e.pointsOfInterest.centerOnSurfaceFrequent.distance;if(Math.log(t/i)/Math.LN2>$)return!0;const a=n,r=e.pointsOfInterest.centerOnSurfaceFrequent.renderLocation;return(0,c.p)(a,r)/(Math.tan(.5*e.state.camera.fov)*i)>ee}(e,i,a)?(n=0,o=function(e,n,t,i){const a=Be(e,i,n,t);if(!e.state.constraints.tilt)return a;const r=e.state.constraints.tilt(n);r.max=Math.min(r.max,.5*Math.PI);const o=r.min*(1-Ae)+r.max*Ae;return Math.min(a,o)}(e,a,t,i)):o=Be(e,i,a,t),o=e.state.constraints.clampTilt(a,o),{heading:n,tilt:t=Oe(e,i,a,o)}}(e,n,t,i,a=Math.max(a,e.state.constraints.minimumPoiDistance),r);return(0,ue(e).eyeForCenterWithHeadingTilt)(i,a,o.heading,o.tilt)}function Ue(e,n,t){const i=e.map.ground.navigationConstraint;return t===le.ADJUST&&"global"===e.viewingMode&&n>0&&(null==i||"stay-above"===i.type)}function ze(e,n,t,i){const a=Oe(e,t,i,function(e,n,t,i){let a=Be(e,i,n,t);if(!e.state.constraints.tilt)return a;const r=e.state.constraints.tilt(n);return a=Math.min(a,.5*Math.PI),r.min*(1-Ae)+a*Ae}(e,i,n,t));return{tilt:a,mode:n-a<1?le.LOCKED:le.ADJUST}}function Ce(e,n){return{...e,center:(0,s.d9)(n)}}function Ge(e,n){const{state:t,spatialReference:i}=e,a=n.spatialReference;return t.isGlobal&&(0,Q.D)(a,x.JY.Global)||t.isLocal&&i.equals(a)}function je(e,n){let t,i,a;if(e.state.isGlobal){const e=new f.Z(n.xmin,n.ymin,n.spatialReference),r=new f.Z(n.xmax,n.ymax,n.spatialReference),o=n.spatialReference.isGeographic?oe:re;t=new f.Z({x:o.center(e.x,r.x),y:(r.y+e.y)/2,z:null!=n.zmax&&null!=n.zmin?(n.zmax+n.zmin)/2:void 0,spatialReference:n.spatialReference});const l=(0,u.Iu)(n.spatialReference),c=(0,A.Nf)(t,e,r);i=c.lon,a=c.lat,o.diff(e.x,r.x)>o.range/2&&(i+=l.halfCircumference),i=Math.min(i,l.halfCircumference),a=Math.min(a,l.halfCircumference)}else{var r;const o=null!==(r=e.renderSpatialReference)&&void 0!==r?r:n.spatialReference;o.equals(n.spatialReference)||(n=(0,d.project)(n,o)),i=n.xmax-n.xmin,a=n.ymax-n.ymin;const l=null!=n.zmax&&null!=n.zmin?(n.zmax+n.zmin)/2:void 0;t=new f.Z({x:n.xmin+.5*i,y:n.ymin+.5*a,z:l,spatialReference:o})}const o=null!=n.zmax&&null!=n.zmin?n.zmax-n.zmin:0,l=e.state.camera,c=1/Math.tan(l.fovX/2),s=1/Math.tan(l.fovY/2),m=1/Math.tan(l.fov/2);return{center:t,distance:Math.max(.5*i*c,.5*a*s,.5*o*m)/Y}}async function Pe(e,n,t,i,a,r){const o=Ge(e,n)?n:await(0,d.projectWithZConversion)(n,e.spatialReference,{signal:r});(0,l.k_)(r);const{center:c,distance:s}=je(e,o),u=await Ze(e,t,i,c,s,a,r);return(0,l.k_)(r),Ie(e,u,e.camera.fov,r)}function ke(e,n,t,i,a,r){let o;try{o=Ge(e,n)?n:(0,d.project)(n,e.spatialReference)}catch(u){return null}const{center:l,distance:c}=je(e,o),s=Re(e,t,i,l,c,a);return null==s?null:Ee(e,s,e.camera.fov,r)}function Ve(e,n,t){const i=e.renderSpatialReference,a=new f.Z({spatialReference:se(e)});if(!(0,h.f)(t,i,a))return null;const r=Math.tan(n.fovX/2),o=Math.tan(n.fovY/2),l=(0,c.F)(n.eye,t),s=2*l*r*Y,u=2*l*o*Y;return"global"===e.viewingMode?K(e,a,s,u):P(e,a,s,u)}const Ae=.7;function Oe(e,n,t,i){return ue(e).lookAtTiltToEyeTilt(i,n,t)}function Be(e,n,t,i){return ue(e).eyeTiltToLookAtTilt(i,n,t)}function Ee(e,n,t,a){var r;if(null==n)return null;const o=e.renderSpatialReference,l=new f.Z({spatialReference:se(e)});return(0,h.f)(n.eye,o,l)?(null!==(r=a)&&void 0!==r||(a=new i.Z),a.position=l,a.heading=n.heading,a.tilt=n.tilt,a.fov=t,a):null}async function Ie(e,n,t,a){const r=e.renderSpatialReference,o=new f.Z({spatialReference:se(e)});return await(0,h.A)(n.eye,r,o,{signal:a}),(0,l.k_)(a),new i.Z(o,n.heading,n.tilt,t)}function De(e,n){var t;const i=null===(t=e.basemapTerrain)||void 0===t?void 0:t.tilingScheme;if(i)return i.levelAtScale(n);J().error("#scaleToZoom()","Cannot compute zoom from scale without a tiling scheme")}function _e(e,n){var t;const i=null===(t=e.basemapTerrain)||void 0===t?void 0:t.tilingScheme;if(i)return i.scaleAtLevel(n);J().error("#zoomToScale()","Cannot compute scale from zoom without a tiling scheme")}function He(e,n){const{renderSpatialReference:t}=e,i=function(e){return(0,v.fS)(e,y.HQ)||(0,v.BZ)(e)?{wkid:w.W.GCSMARS2000}:(0,v.fS)(e,y.VY)||(0,v.V2)(e)?{wkid:w.W.GCSMOON2000}:m.Z.WGS84}(t);let a=null;try{(0,g.S)(n.center,t,te,i)&&(a=te[1])}catch{}return ge(e,n.distance,a)}},71917:(e,n,t)=>{t.d(n,{d:()=>c,t:()=>s});var i=t(16889),a=t(32035),r=t(12400);const o=(0,r.Ue)(),l=(0,r.Ue)();function c(){return{direction:(0,r.Ue)(),up:(0,r.Ue)()}}function s(e,n,t,r,c){let s=(0,a.n)(o,e),u=(0,a.m)(s,r);const f=u>0;u=Math.abs(u),u>.99&&(u=Math.abs((0,a.m)(n,r)),u<.99?((0,a.c)(s,n),f&&(0,a.j)(s,s,-1)):s=null);let d=0;if(s){(0,a.j)(l,r,(0,a.m)(r,s)),(0,a.f)(s,s,l);const e=(0,a.m)(s,c)/((0,a.l)(s)*(0,a.l)(c));(0,a.b)(l,s,c),d=((0,a.m)(l,r)>0?1:-1)*(0,i.BV)((0,i.ZF)(e))}const m=(0,i.BV)((0,i.ZF)(-(0,a.m)(r,e)/(0,a.l)(e)));return t?(t.heading=d,t.tilt=m,t):{heading:d,tilt:m}}},696:(e,n,t)=>{t.d(n,{Be:()=>c,Nf:()=>l,Sk:()=>s,dF:()=>u});var i=t(16889),a=t(83448),r=t(848);function o(e,n,t){if(null==n.longitude||null==n.latitude||null==t.longitude||null==t.latitude)throw new Error("Invalid points: no lon/lat");return function(e,n,t,a,r){const o=(0,i.Vl)(t),l=(0,i.Vl)(r),c=o-l,s=(0,i.Vl)(n)-(0,i.Vl)(a),u=Math.sin(c/2),f=Math.sin(s/2),d=2*(0,i.Kt)(Math.sqrt(u*u+Math.cos(o)*Math.cos(l)*f*f))*e;return Math.round(1e4*d)/1e4}(e,n.longitude,n.latitude,t.longitude,t.latitude)}function l(e,n,t){const i=n.spatialReference,l=(0,a.Iu)(i),c=new r.Z(n.x,e.y,i),s=new r.Z(t.x,e.y,i),u=new r.Z(e.x,n.y,i),f=new r.Z(e.x,t.y,i);return{lon:o(l.radius,c,s),lat:o(l.radius,u,f)}}function c(e,n,t){const a=n/t,r=(0,i.Vl)(e),o=Math.sin(a/2),l=Math.cos(r),c=2*(0,i.Kt)(Math.sqrt(o*o/(l*l)));return(0,i.BV)(c)}function s(e,n){let t=e/15;return n||(t=Math.round(t)),t}function u(e,n){const t=null===e||void 0===e?void 0:e[0];if(null==t)return null;n||(n={hours:0,minutes:0,seconds:0}),n.hours=s(t,!0);const i=n.hours%1;n.hours-=i,n.minutes=60*i;const a=n.minutes%1;return n.minutes-=a,n.seconds=Math.round(60*a),n}},90647:(e,n,t)=>{t.d(n,{Q8:()=>E,QI:()=>A,Ue:()=>I,toCameraAsync:()=>O});var i=t(63665),a=(t(59486),t(52639)),r=t(36721),o=t(14921),l=(t(93169),t(17768)),c=t(10064),s=t(66978),u=t(29303),f=t(21389),d=t(7025),m=t(32035),p=t(12400),h=t(79803),g=t(37998),y=t(68859),v=t(5629),w=t(5986),x=t(41414),M=t(65156),R=t(95773),Z=t(82582),b=t(87532),S=t(60084),T=t(77648),U=t(848),z=t(53866),C=t(78952),G=t(32238),j=t(77577);const P=.66;function k(e){return 360-l.BV.normalize(e)}function V(e){return l.BV.normalize(360-e)}function A(e,n,t){const i=n.camera;if(null!=i)return function(e,n){const t=e.position;let i;try{i=(0,h.tryProjectWithZConversion)(t,n)}catch(r){return null}if(!i)return null;const a=e.clone();return a.position=i.clone(),a}(i,(0,S.h5)(e));const{targetGeometry:a}=n;if(null==a)return null;const{camera:r,mode:o}=B(e,n.rotation,t);if("point"===a.type)return function(e,n,t,i,a){const r=e.spatialReference;let o;try{o=(0,h.tryProjectWithZConversion)(t.clone(),r)}catch(c){return null}if(!o)return null;const l=null!=n.scale?(0,S._U)(e,n.scale,o.latitude):e.state.camera.distance;return(0,S.Hm)(e,o,l,i,a)}(e,n,a,r,o);const l=a.extent;return null==l?null:(0,S.S9)(e,l,r.heading,r.tilt,o)}async function O(e,n,t,i){const a=n.camera;if(null!=a)return async function(e,n,t){const i=e.position,a=await(0,h.projectWithZConversion)(i,n,{signal:t});(0,s.k_)(t);const r=e.clone();return r.position=a.clone(),r}(a,(0,S.h5)(e),i);const{targetGeometry:r}=n;if(null==r)throw new Error("Viewpoint has no targetGeometry!");const{camera:o,mode:l}=B(e,n.rotation,t);if("point"===r.type)return async function(e,n,t,i,a,r){const o=e.spatialReference,l=await(0,h.projectWithZConversion)(t.clone(),o,{signal:r});(0,s.k_)(r);const c=null!=n.scale?(0,S._U)(e,n.scale,l.latitude):e.state.camera.distance;return(0,S.gL)(e,l,c,i,a,r)}(e,n,r,o,l,i);const c=r.extent;if(null==c)throw new Error("Target geometry has no extent!");return(0,S.Ic)(e,c,o.heading,o.tilt,l,i)}function B(e,n,t){const i=(0,S.l0)(e,e.state.camera);let a=S.Q8.ADJUST;return null!=n&&(i.heading=k(n),a=S.Q8.LOCKED),null!=t&&(i.tilt=t),{camera:i,mode:a}}function E(e,n){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return null==t&&(t=new r.Z),H(e,null,n.clone(),t)}async function I(e,n,t){const a=function(e,n){if(!n||!e.spatialReference)return null;const t={target:void 0};return"declaredClass"in n||Array.isArray(n)?t.target=n:(Object.assign(t,n),!t.target&&"center"in n&&n.center&&(t.target=n.center)),t}(e,n);if(!a)throw new c.Z("viewpointutils-create:no-target","Missing target for creating viewpoint");const o=new i.Z({fov:e.camera.fov}),l=new r.Z({camera:o});if(a.target instanceof r.Z)return q(await async function(e,n,t,i,a){if(n.camera)return K(e,n.camera,i,a);a.scale=n.scale,a.rotation=n.rotation,a.targetGeometry=null!=n.targetGeometry?n.targetGeometry.clone():null,a.camera=null,null!=t.heading?a.rotation=V(t.heading):null!=t.rotation&&(a.rotation=t.rotation);const r=D(e,t);return null!=r&&(a.scale=r),a.camera=await O(e,a,t.tilt,i),a}(e,a.target,a,t,l));if(a.target instanceof i.Z)return q(await K(e,a.target,t,l));const s=null!=a.scale||null!=a.zoom;if(a.target instanceof z.Z){const n=a.target.xmin===a.target.xmax||a.target.ymin===a.target.ymax;return q(s||n?await L(e,a,a.target.center,o,t,l):await async function(e,n,t,i,a,r){r.targetGeometry=t.clone();const o=(0,b.dP)(e);(0,S.l0)(e,o,i);const l=_(i,n)?S.Q8.LOCKED:S.Q8.ADJUST;return r.camera=await(0,S.Ic)(e,t,i.heading,i.tilt,l,a),r}(e,a,a.target,o,t,l))}const f=new Q,d=s?function(e,n){const t=D(e,n);return t?(0,Z.DE)(t):void 0}(e,a):void 0;if(await W(e,a.target,d,f,t),isFinite(f.boundingBox[0])){let n;if((0,x.be)(f.boundingBox,J),ae.x=J[0],ae.y=J[1],ae.z=J[2],ae.spatialReference=e.spatialReference,isFinite(ae.z)&&f.hasZ?n=(0,x.wp)(f.boundingBox):(ae.z=void 0,n=(0,M.wp)((0,x.y8)(f.boundingBox,$))),s||n)return q(await L(e,a,ae,o,t,l));const i=function(e,n){const t=P;if(!n.length)return t;let i=Number.NEGATIVE_INFINITY;for(let a=0;a<n.length;a++){const e=n[a].screenSpaceBoundingRect;i=Math.max(i,Math.abs(e[0]),Math.abs(e[1]),Math.abs(e[2]),Math.abs(e[3]))}return t-i/Math.min(e.width,e.height)*2}(e,f.screenSpaceObjects);return q(await async function(e,n,t,i,a,r,o,l){l.targetGeometry=t.clone();const c=(0,b.dP)(e),s=function(e,n,t,i,a){let r=0;null!=t.z?r=t.z:e.basemapTerrain&&e.elevationProvider&&(r=(0,T.KO)(e.elevationProvider,t)),(0,m.s)(J,t.x,t.y,r),(0,g.B)(e.spatialReference,J,N,e.renderSpatialReference),(0,u.xO)(X,N),(0,u.p4)(X,X),(0,x.cS)(Y);const o=[[0,1,2],[3,1,2],[0,4,2],[3,4,2],[0,1,5],[3,1,5],[0,4,5],[3,4,5]];for(let u=0;u<o.length;u++){const n=o[u];let t=i[n[2]];isFinite(t)||(t=r),(0,m.s)(J,i[n[0]],i[n[1]],t),(0,w.S)(J,e.spatialReference,J,e.renderSpatialReference),(0,x.pp)(Y,(0,m.t)(J,J,X))}const l=(0,x.bf)(Y),c=(0,x.Cb)(Y),s=(0,x.Ye)(Y),f=1/Math.tan(n.fovX/2),d=1/Math.tan(n.fovY/2),p=.5*Math.sqrt(l*l+s*s)*Math.max(d,f)+.5*c,h=.5*c*d+.5*Math.max(l,s);return Math.max(p,h)/a}(e,c,t,i,a);(0,S.l0)(e,c,r);const f=_(r,n)?S.Q8.LOCKED:S.Q8.ADJUST;return l.scale=(0,S.Xt)(e,s,l.targetGeometry.latitude),l.camera=await(0,S.UI)(e,l.targetGeometry,l.scale,r,f,o),l}(e,a,ae,f.boundingBox,i,o,t,l))}return a.position?q(await async function(e,n,t,i,a){const r=(0,b.dP)(e);(0,m.c)(ee,r.viewForward),(0,S.t_)(e,r.eye,ee,r.up,ie);const o=e.spatialReference,{position:l}=n;if(l){const e=await(0,h.projectWithZConversion)(l,o,{signal:a});t.position=e}else t.position=new U.Z;return t.heading=null!=n.heading?n.heading:ie.heading,t.tilt=null!=n.tilt?n.tilt:ie.tilt,H(e,null,t,i)}(e,a,o,l,t)):q(await async function(e,n,t,i,a){if(null!=n.heading||null!=n.rotation||null!=n.scale||null!=n.tilt||null!=n.zoom||null!=n.zoomFactor){const r=(0,b.dP)(e),{spatialReference:o,renderSpatialReference:l}=e,c=new U.Z({spatialReference:o});return(0,v.f)(r.center,l,c)?L(e,n,c,t,i,a):a}return a.scale=e.scale,a.camera=e.camera.clone(),_(a.camera,n),a}(e,a,o,t,l))}function D(e,n){return null==n.scale&&null!=n.zoom?(0,S.EO)(e,n.zoom):n.scale}function _(e,n){let t=!1;return null!=n.heading?(e.heading=n.heading,t=!0):null!=n.rotation&&(e.heading=k(n.rotation),t=!0),null!=n.tilt&&(e.tilt=n.tilt,t=!0),null!=n.fov&&(e.fov=n.fov),t}function H(e,n,t,i){var a;const r=e.spatialReference||C.Z.WGS84;if(null!==(a=n)&&void 0!==a||(n=(0,S.n3)(e,t)),null==n)return i;const o=new U.Z({spatialReference:r});if(!(0,v.f)(n.center,e.renderSpatialReference,o))return i;i.targetGeometry=o;const{latitude:l}=o;return i.scale=null!=l?(0,S.Xt)(e,n.distance,l):(0,S.ZN)(e,n),i.rotation=V(t.heading),i.camera=t,i}async function F(e,n,t,i){var a;const r=()=>new c.Z("viewpointutils:invalid-geometry","The target is missing a valid geometry");if(!n)throw r();"mesh"===n.type&&(n=n.extent);const o=e.basemapTerrain.spatialReference;if(!n.hasZ&&e.basemapTerrain){var l;let t;switch(n.type){case"point":t=n;break;case"multipoint":case"polyline":t=null===(a=n.extent)||void 0===a?void 0:a.center;break;case"extent":t=n.center;break;case"polygon":t=n.centroid}null!=t&&o&&e.elevationProvider?(t=await(0,h.projectWithZConversion)(t,o,{signal:i}),J[2]=null!==(l=(0,T.KO)(e.elevationProvider,t))&&void 0!==l?l:0):J[2]=0}const s=re[n.type],u=new Array;if(s(n,n.hasZ?e=>{u.push([e[0],e[1],e[2]])}:e=>{u.push([e[0],e[1]])},J),0===u.length)throw r();const f=n.spatialReference,d=e.spatialReference,m=await(0,h.projectWithZConversion)(new j.Z({spatialReference:f,hasZ:n.hasZ,hasM:!1,points:u}),d,{signal:i});if(n.hasZ&&(t.hasZ=!0),n.hasZ)for(const[c,p,h]of m.points)J[0]=c,J[1]=p,J[2]=h,(0,x.pp)(t.boundingBox,J);else for(const[c,p]of m.points)J[0]=c,J[1]=p,(0,x.pp)(t.boundingBox,J)}async function W(e,n,t,i,r){if(Array.isArray(n)&&2===n.length){var l;const t=n[0],a=n[1];if("number"==typeof t&&"number"==typeof a)return ae.x=t,ae.y=a,ae.z=void 0,ae.spatialReference=null!==(l=e.spatialReference)&&void 0!==l&&l.isGeographic?e.spatialReference:C.Z.WGS84,void await F(e,ae,i,r)}n&&"map"in n&&"function"==typeof n.map?await Promise.allSettled(n.map((n=>W(e,n,t,i,r)))):n instanceof G.Z?await F(e,n,i,r):n instanceof a.Z&&await async function(e,n,t,i,a){const r=await(0,o.q6)(e.whenViewForGraphic(n));if(!1===r.ok||null==r.value||!("whenGraphicBounds"in r.value))return void await F(e,n.geometry,i,a);const l=r.value,c=await(0,o.q6)(l.whenGraphicBounds(n,{minDemResolution:t}));if(!1===c.ok||!c.value)return void await F(e,n.geometry,i,a);const{screenSpaceObjects:s,boundingBox:u}=c.value;(0,x.TC)(i.boundingBox,u),s&&s.forEach((e=>{i.screenSpaceObjects.push(e)})),isFinite(u[2])&&(i.hasZ=!0)}(e,n,t,i,r)}async function K(e,n,t,i){const a=e.spatialReference,r=await(0,h.projectWithZConversion)(n.position,a,{signal:t}),o=n.clone();return o.position=r,H(e,null,o,i)}async function L(e,n,t,i,a,r){r.targetGeometry=t.clone();const o=(0,b.dP)(e);if(n.position)return async function(e,n,t,i,a,r,o){const l=e.renderSpatialReference;return await(0,y.U)(n,te,l,0,{signal:o}),await(0,y.U)(t,ne,l,0,{signal:o}),r.targetGeometry=new U.Z(n),a.position=new U.Z(t),(0,m.f)(ee,te,ne),(0,S.t_)(e,ne,ee,i.up,a),r.scale=(0,S.Xt)(e,(0,m.p)(ne,te),r.targetGeometry.latitude),r.rotation=V(a.heading),r.camera=a,r}(e,r.targetGeometry,n.position,o,i,r,a);if(n.zoomFactor){const i=o.distance/n.zoomFactor,a=(0,m.j)(J,o.viewForward,-i);o.eye=(0,m.g)(J,o.center,a),r.scale=(0,S.Xt)(e,i,t.latitude)}(0,S.l0)(e,o,i);const l=_(i,n)?S.Q8.LOCKED:S.Q8.ADJUST;if(!n.zoomFactor){const c=D(e,n);null==c?(await(0,y.U)(t,J,e.renderSpatialReference,0,{signal:a}),(0,R.g8)(o.frustum,J)?r.scale=(0,S.Xt)(e,(0,m.p)(o.eye,J),t.latitude):r.scale=(0,S.ZN)(e,o)):r.scale=c,r.camera=await(0,S.UI)(e,r.targetGeometry,r.scale,i,l,a)}return r}function q(e){return null!=(null===e||void 0===e?void 0:e.camera)&&(e.rotation=V(e.camera.heading)),e}class Q{constructor(){this.hasZ=!1,this.boundingBox=(0,x.cS)(),this.screenSpaceObjects=new Array}}const J=(0,p.Ue)(),N=(0,d.Ue)(),X=(0,f.Ue)(),Y=(0,x.Ue)(),$=(0,M.Ue)(),ee=(0,p.Ue)(),ne=(0,p.Ue)(),te=(0,p.Ue)(),ie={heading:0,tilt:0},ae=new U.Z,re={point(e,n,t){t[0]=e.x,t[1]=e.y,null!=e.z&&(t[2]=e.z),n(t)},polygon(e,n,t){const i=e.hasZ;for(let a=0;a<e.rings.length;a++){const r=e.rings[a];for(let e=0;e<r.length;e++)t[0]=r[e][0],t[1]=r[e][1],i&&(t[2]=r[e][2]),n(t)}},polyline(e,n,t){const i=e.hasZ;for(let a=0;a<e.paths.length;a++){const r=e.paths[a];for(let e=0;e<r.length;e++)t[0]=r[e][0],t[1]=r[e][1],i&&(t[2]=r[e][2]),n(t)}},multipoint(e,n,t){const i=e.points,a=e.hasZ;for(let r=0;r<i.length;r++)t[0]=i[r][0],t[1]=i[r][1],a&&(t[2]=i[r][2]),n(t)},extent(e,n,t){null!=e.zmin&&null!=e.zmax?(n((0,m.s)(t,e.xmin,e.ymin,e.zmin)),n((0,m.s)(t,e.xmax,e.ymin,e.zmin)),n((0,m.s)(t,e.xmin,e.ymax,e.zmin)),n((0,m.s)(t,e.xmax,e.ymax,e.zmin)),n((0,m.s)(t,e.xmin,e.ymin,e.zmax)),n((0,m.s)(t,e.xmax,e.ymin,e.zmax)),n((0,m.s)(t,e.xmin,e.ymax,e.zmax)),n((0,m.s)(t,e.xmax,e.ymax,e.zmax))):(n((0,m.s)(t,e.xmin,e.ymin,t[2])),n((0,m.s)(t,e.xmax,e.ymin,t[2])),n((0,m.s)(t,e.xmin,e.ymax,t[2])),n((0,m.s)(t,e.xmax,e.ymax,t[2])))}}}}]);
//# sourceMappingURL=90647.8276cf11.chunk.js.map