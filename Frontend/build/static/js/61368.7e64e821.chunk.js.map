{"version":3,"file":"static/js/61368.7e64e821.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/views/3d/layers/LayerView3D.js","../node_modules/@arcgis/core/views/3d/layers/TiledLayerView3D.js","../node_modules/@arcgis/core/views/2d/engine/vectorTiles/SchemaHelper.js","../node_modules/@arcgis/core/views/2d/engine/vectorTiles/TileHandler3D.js","../node_modules/@arcgis/core/views/2d/engine/vtlBrushes.js","../node_modules/@arcgis/core/views/2d/engine/vectorTiles/VTLPainter3D.js","../node_modules/@arcgis/core/views/3d/layers/VectorTileLayerView3D.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{_ as o}from\"../../../chunks/tslib.es6.js\";import{makeHandle as s}from\"../../../core/handleUtils.js\";import{throwIfAborted as e}from\"../../../core/promiseUtils.js\";import{whenOnce as t}from\"../../../core/reactiveUtils.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/RandomLCG.js\";import{subclass as i}from\"../../../core/accessorSupport/decorators/subclass.js\";import{supportsHeightModelInfo as p,rejectLayerError as a}from\"../../../geometry/support/heightModelInfoUtils.js\";const l=l=>{let n=class extends l{constructor(){super(...arguments),this.slicePlaneEnabled=!1,this.supportsHeightUnitConversion=!1}postscript(){super.postscript(),p(this.layer)&&this.addResolvingPromise(this._validateHeightModelInfo())}async _validateHeightModelInfo(){const o=new AbortController,r=o.signal;this.addHandles(s((()=>o.abort()))),await t((()=>this.view.defaultsFromMap?.heightModelInfoReady),r),e(r);const i=a(this.layer,this.view.heightModelInfo,this.supportsHeightUnitConversion);if(i)throw i}};return o([r()],n.prototype,\"view\",void 0),o([r()],n.prototype,\"slicePlaneEnabled\",void 0),n=o([i(\"esri.views.3d.layers.LayerView3D\")],n),n};export{l as LayerView3D};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../core/Error.js\";import{whenOnce as i}from\"../../../core/reactiveUtils.js\";import{property as a}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/RandomLCG.js\";import{subclass as r}from\"../../../core/accessorSupport/decorators/subclass.js\";import{LayerViewPerformanceInfo as l}from\"./support/LayerViewPerformanceInfo.js\";import{updatingProgress as s,updatingProgressValue as n}from\"../support/updatingProperties.js\";import{checkIfTileInfoSupportedForView as o}from\"../terrain/terrainUtils.js\";import{isScaleRangeActive as c,validateScaleRange as h}from\"../../support/layerViewUtils.js\";const p=p=>{let m=class extends p{constructor(){super(...arguments),this.hasMixedImageFormats=!0}get imageFormatIsOpaque(){return!1}get fullExtent(){return this.layer.fullExtent}get isOpaque(){return this.fullOpacity>=1&&this.imageFormatIsOpaque}get visibleAtCurrentScale(){if(!c(this.layer.minScale,this.layer.maxScale)||!this.view.terrainScale)return!0;const e=Math.round(this.view.basemapTerrain.tilingScheme.levelAtScale(this.view.terrainScale));return e>=this.displayLevelRange.minLevel&&e<=this.displayLevelRange.maxLevel}get dataScaleRange(){const e=this.tileInfo.lods;let t=e[0].scale,i=e[e.length-1].scale;if(\"tilemapCache\"in this.layer&&this.layer.tilemapCache){const{effectiveMinLOD:e,effectiveMaxLOD:a}=this.layer.tilemapCache;t=this.tileInfo.lodAt(e).scale,i=this.tileInfo.lodAt(a).scale}return{minScale:t,maxScale:i}}canResume(){const e=this.layer&&\"effectiveScaleRange\"in this.layer?this.layer.effectiveScaleRange:null;return this.visible&&this.layer?.loaded&&!this.parent?.suspended&&this.view?.ready&&h(e)&&this.visibleAtCurrentTimeExtent||!1}get dataLevelRange(){const{minScale:e,maxScale:t}=this.dataScaleRange;return this.levelRangeFromScaleRange(e,t)}get displayLevelRange(){const e=this.layer.minScale||this.dataScaleRange.minScale,t=this.layer.maxScale||this.dataScaleRange.maxScale,i=this.levelRangeFromScaleRange(e,t);return this.layer.maxScale&&i.maxLevel++,i}get performanceInfo(){return new l(this.view.basemapTerrain.getUsedMemoryForLayerView(this))}getTileUrl(e){return this.layer.getTileUrl(e[0],e[1],e[2])}_addTilingSchemeMatchPromise(){if(null==this.fullExtent)return this.addResolvingPromise(Promise.reject(new t(\"tilingscheme:extent-not-defined\",\"This layer doesn't define a fullExtent.\")));const e=this._getTileInfoSupportError(this.tileInfo,this.fullExtent);if(e)return this.addResolvingPromise(Promise.reject(e));this.addResolvingPromise(i((()=>this.view?.basemapTerrain?.tilingSchemeLocked)).then((()=>{const e=this.view.basemapTerrain.tilingScheme,t=\"tilemapCache\"in this.layer?this.layer.tilemapCache?.effectiveMaxLOD:void 0,i=this._getTileInfoCompatibilityError(this.tileInfo,e,t);if(i)throw i})))}_getTileInfoSupportError(e,i){const a=o(e,i,this.view.spatialReference,this.view.state.viewingMode,\"tilemapCache\"in this.layer?this.layer.tilemapCache?.effectiveMaxLOD:void 0);if(!a)return;const r={layer:this.layer,error:a};switch(a.name){case\"tilingscheme:spatial-reference-mismatch\":case\"tilingscheme:global-unsupported-spatial-reference\":case\"tilingscheme:local-unsupported-spatial-reference\":return new t(\"layerview:spatial-reference-incompatible\",\"The spatial reference of this layer does not meet the requirements of the view\",r);default:return new t(\"layerview:tiling-scheme-unsupported\",\"The tiling scheme of this layer is not supported by SceneView\",r)}}_getTileInfoCompatibilityError(e,i,a){return null!=e&&i.compatibleWith(e,a)?null:new t(\"layerview:tiling-scheme-incompatible\",\"The tiling scheme of this layer is incompatible with the tiling scheme of the surface\")}levelRangeFromScaleRange(e,t){const i={minLevel:0,maxLevel:1/0},a=this.view&&this.view.basemapTerrain&&this.view.basemapTerrain.tilingScheme;if(!a)return i;const r=a.levels[0],l=e=>{const t=Math.log(r.scale/e)/Math.LN2;return.5-Math.abs(.5-t%1)<1e-9?Math.round(t):Math.ceil(t)};return null!=e&&e>0&&(i.minLevel=Math.max(0,l(e))),null!=t&&t>0&&(i.maxLevel=Math.max(0,l(t))),i}isUpdating(){return!!(this.view&&this.view.basemapTerrain&&this.view.basemapTerrain.updating)}};return e([a({readOnly:!0})],m.prototype,\"imageFormatIsOpaque\",null),e([a({readOnly:!0})],m.prototype,\"updating\",void 0),e([a(s)],m.prototype,\"updatingProgress\",void 0),e([a(n)],m.prototype,\"updatingProgressValue\",void 0),e([a()],m.prototype,\"hasMixedImageFormats\",void 0),e([a()],m.prototype,\"fullExtent\",null),e([a({readOnly:!0})],m.prototype,\"isOpaque\",null),e([a({readOnly:!0})],m.prototype,\"visibleAtCurrentScale\",null),e([a()],m.prototype,\"dataScaleRange\",null),e([a({readOnly:!0})],m.prototype,\"dataLevelRange\",null),e([a({readOnly:!0})],m.prototype,\"displayLevelRange\",null),e([a()],m.prototype,\"layer\",void 0),m=e([r(\"esri.views.3d.layers.TiledLayerView3D\")],m),m};export{p as TiledLayerView3D};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nclass t{constructor(t,e,s){this._scale=t,this._shift=e,this._levelShift=s}getLevelRowColumn(t){const e=this.getLevelShift(t[0]),s=this._shift+e;return s?[t[0]-e,t[1]>>s,t[2]>>s]:t}getLevelShift(t){return Math.min(t,this._levelShift)}getOffset(t,e){let s=0,i=0;const h=this._shift+this.getLevelShift(t[0]);if(h){const l=(1<<h)-1,f=e/(this._scale*(1<<h-1));s=(t[2]&l)*f,i=(t[1]&l)*f}return[s,i]}getScale(t){return this._scale*(1<<this._shift+this.getLevelShift(t))}}export{t as SchemaHelper};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{MinPriority as e}from\"../../../../core/MemCache.js\";import{throwIfAborted as t}from\"../../../../core/promiseUtils.js\";import{fromValues as o}from\"../../../../core/libs/gl-matrix-2/factories/mat3f32.js\";import{create as i}from\"../../../../geometry/support/aaBoundingRect.js\";import{TileHandler as s}from\"./TileHandler.js\";import{VectorTile as r}from\"./VectorTile.js\";import n from\"../../tiling/TileInfoViewPOT.js\";import l from\"../../tiling/TileKey.js\";class a extends s{constructor(e,t,o,i){super(e,t,o,e.tileInfo.lods.length-1),this._memCache=i,this._ongoingTileRequests=new Map,this._ongoingRequestToController=new Map,this._tileInfoView=new n(e.tileInfo,e.fullExtent)}destroy(){super.destroy(),this._ongoingRequestToController.forEach((e=>e.abort())),this._ongoingRequestToController.clear(),this._ongoingTileRequests.clear()}async getVectorTile(s,n){const a=new l(s[0],s[1],s[2],0);let g=this._memCache.get(a.id);if(null!=g)return g.retain(),g;const h=await this._getVectorTileData(a);if(t(n),!this._layer)return null;if(g=this._memCache.get(a.id),null!=g)return g.retain(),g;const u=this._layer.tileInfo.getTileBounds(i(),a),m=this._tileInfoView.getTileResolution(s[0]);return g=new r(a,m,u[0],u[3],512,512,this._styleRepository,this._memCache),g.setData(h),h&&(g.retain(),this._memCache.put(a.id,g,g.usedMemory,e)),g.neededForCoverage=!0,g.transforms.tileUnitsToPixels=o(1/8,0,0,0,1/8,0,0,0,1),g}_getVectorTileData(e){const t=e.id;if(this._ongoingTileRequests.has(t))return this._ongoingTileRequests.get(t);const o=new AbortController,i={signal:o.signal},s=this._getParsedVectorTileData(e,i).then((e=>(this._ongoingTileRequests.delete(t),this._ongoingRequestToController.delete(t),e))).catch((()=>(this._ongoingTileRequests.delete(t),this._ongoingRequestToController.delete(t),null)));return this._ongoingTileRequests.set(t,s),this._ongoingRequestToController.set(t,o),s}_getParsedVectorTileData(e,t){return this.fetchTileData(e,t).then((o=>this.parseTileData({key:e,data:o},t)))}}export{a as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{WGLBrushVTLBackground as r}from\"./webgl/brushes/WGLBrushVTLBackground.js\";import{WGLBrushVTLCircle as s}from\"./webgl/brushes/WGLBrushVTLCircle.js\";import{WGLBrushVTLFill as l}from\"./webgl/brushes/WGLBrushVTLFill.js\";import{WGLBrushVTLLine as o}from\"./webgl/brushes/WGLBrushVTLLine.js\";import{WGLBrushVTLSymbol as e}from\"./webgl/brushes/WGLBrushVTLSymbol.js\";const b={vtlBackground:r,vtlFill:l,vtlLine:o,vtlCircle:s,vtlSymbol:e};export{b as vtlBrushes};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{disposeMaybe as e}from\"../../../../core/maybe.js\";import{vtlBrushes as t}from\"../vtlBrushes.js\";import s from\"./shaders/VTLMaterialManager.js\";import{StyleLayerType as r,Visibility as a}from\"./style/StyleDefinition.js\";import{CompareFunction as n,BlendFactor as i}from\"../../../webgl/enums.js\";const o=1e-6;class l{constructor(e,t){this.spriteMosaic=e,this.glyphMosaic=t,this._brushCache=new Map,this._vtlMaterialManager=new s}dispose(){this._brushCache&&(this._brushCache.forEach((e=>e.dispose())),this._brushCache=null),this._vtlMaterialManager=e(this._vtlMaterialManager),this.spriteMosaic.dispose(),this.glyphMosaic.dispose()}get vectorTilesMaterialManager(){return this._vtlMaterialManager}drawSymbols(e,t,s){const n=s.layers;e.renderPass=\"translucent\";for(let i=0;i<n.length;i++){const s=n[i];if(s.type!==r.SYMBOL)continue;const l=s.getLayoutProperty(\"visibility\");if(l&&l.getValue()===a.NONE)continue;const c=e.displayLevel;void 0!==s.minzoom&&s.minzoom>c+o||void 0!==s.maxzoom&&s.maxzoom<=c-o||(e.styleLayerUID=s.uid,e.styleLayer=s,this._drawWithBrush(e,t,\"vtlSymbol\"))}}drawBackground(e,t,s){if(0===s.backgroundBucketIds.length)return;const{context:n,displayLevel:i,requiredLevel:l}=e;t.key.level=l,n.setBlendingEnabled(!0),n.setDepthTestEnabled(!1),n.setStencilTestEnabled(!1),e.renderPass=\"background\",s.backgroundBucketIds.forEach((n=>{const l=s.getLayerById(n);if(l.type!==r.BACKGROUND)return;const c=l.getLayoutProperty(\"visibility\");c&&c.getValue()===a.NONE||void 0!==l.minzoom&&l.minzoom>i+o||void 0!==l.maxzoom&&l.maxzoom<=i-o||(e.styleLayerUID=l.uid,e.styleLayer=l,this._drawWithBrush(e,t,\"vtlBackground\"))}))}drawTile(e,t,s,r){const{context:a}=e,o=s.layers;a.setBlendingEnabled(!1),a.setDepthTestEnabled(!0),a.setDepthWriteEnabled(!0),a.setDepthFunction(n.LEQUAL),e.renderPass=\"opaque\";for(let n=o.length-1;n>=0;n--){const s=o[n];null!=r&&r!==s.type||this._renderStyleLayer(s,e,t,!1)}a.setDepthWriteEnabled(!1),a.setBlendingEnabled(!0),a.setBlendFunctionSeparate(i.ONE,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA),e.renderPass=\"translucent\";for(let n=0;n<o.length;n++){const s=o[n];null!=r&&r!==s.type||this._renderStyleLayer(s,e,t,!1)}a.setDepthTestEnabled(!1),a.bindVAO()}_renderStyleLayer(e,t,s,n){if(!(n||e&&s.layerData.has(e.uid)))return;const i=e.getLayoutProperty(\"visibility\");if(i&&i.getValue()===a.NONE)return;const{renderPass:l}=t;let c;switch(e.type){case r.BACKGROUND:if(\"background\"!==l)return;c=\"vtlBackground\";break;case r.FILL:if(\"opaque\"!==l&&\"translucent\"!==t.renderPass)return;c=\"vtlFill\";break;case r.LINE:if(\"translucent\"!==l)return;c=\"vtlLine\";break;case r.CIRCLE:if(\"translucent\"!==l)return;c=\"vtlCircle\";break;case r.SYMBOL:if(\"translucent\"!==l)return;c=\"vtlSymbol\"}const d=t.displayLevel;if(void 0!==e.minzoom&&e.minzoom>d+o||void 0!==e.maxzoom&&e.maxzoom<=d-o)return;const{context:h}=t;h.setStencilTestEnabled(!1),h.setStencilWriteMask(0),t.styleLayerUID=e.uid,t.styleLayer=e,this._drawWithBrush(t,s,c)}_drawWithBrush(e,s,r){if(!this._brushCache.has(r)){const e=t[r];this._brushCache.set(r,new e)}this._brushCache.get(r).drawMany(e,[s])}}export{l as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../core/Error.js\";import has from\"../../../core/has.js\";import{disposeMaybe as i,abortMaybe as l,destroyMaybe as r}from\"../../../core/maybe.js\";import{isAborted as s}from\"../../../core/promiseUtils.js\";import{whenOnce as a,watch as o,syncAndInitial as n}from\"../../../core/reactiveUtils.js\";import{property as h}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/Logger.js\";import\"../../../core/RandomLCG.js\";import{subclass as c}from\"../../../core/accessorSupport/decorators/subclass.js\";import{SchemaHelper as m}from\"../../2d/engine/vectorTiles/SchemaHelper.js\";import d from\"../../2d/engine/vectorTiles/TileHandler3D.js\";import p from\"../../2d/engine/vectorTiles/VTLPainter3D.js\";import y from\"../../2d/engine/vectorTiles/style/StyleRepository.js\";import{LayerView3D as g}from\"./LayerView3D.js\";import{TiledLayerView3D as f}from\"./TiledLayerView3D.js\";import{vtlAssumes256PixelSizeAsDefault as u,test as v}from\"../terrain/terrainUtils.js\";import S from\"../../layers/LayerView.js\";let _=class extends(f(g(S))){constructor(){super(...arguments),this._tileHandlerController=null,this.type=\"vector-tile-3d\",this.levelShift=has(\"disable-feature:vtl-level-shift\")?0:1}initialize(){if(null==this.layer.fullExtent)return void this.addResolvingPromise(Promise.reject(new t(\"vectortilelayerview:full-extent-undefined\",\"This layer view's layer does not define a fullExtent.\")));const{basemapTerrain:e,spatialReference:i,state:l,viewingMode:r}=this.view,h=\"local\"===r&&!u(i)||v.force512VTL?this.layer.tileInfo:this.layer.tileInfo.getCompatibleForVTL(256),c=this._getTileInfoSupportError(h,this.layer.fullExtent);if(null!=c)return this.addResolvingPromise(Promise.reject(c));const g=a((()=>this.view?.basemapTerrain?.tilingSchemeLocked)).then((()=>{const t=e.tilingScheme,i=t.pixelSize,l=256===i?1:2,r=e.spatialReference?.isGeographic&&256===i?1:0,s=e.spatialReference?.isGeographic||256!==i?0:1;let a;this.schemaHelper=new m(l,r,this.levelShift+s),a=256===i||512===i?this.layer.tileInfo.getCompatibleForVTL(i):this.layer.tileInfo;const o=this._getTileInfoCompatibilityError(a,t);if(o)throw o;this.tileInfo=a}));this._tileHandlerController=new AbortController;const f=this.view.resourceController;this._memCache=f.memoryController.newCache(`vtl-${this.layer.uid}`,(e=>{e.release()})),this.addHandles(o((()=>this.view.qualitySettings.memoryLimit),(e=>this._memCache.maxSize=Math.ceil(e/10*1048576)),n));const S=new y(this.layer.currentStyleInfo.style);this._tileHandler=new d(this.layer,S,l.contentPixelRatio,this._memCache);const _=this._tileHandlerController.signal,C=H(f),w=this._tileHandler.start({signal:_,schedule:C}),R=this._tileHandler.spriteMosaic;R.then((e=>{!s(_)&&this._tileHandler&&(this.painter=new p(e,this._tileHandler.glyphMosaic))})),w.then((()=>this._tileHandlerController=null));const L=()=>{this._tileHandlerController&&this._tileHandlerController.abort(),this._tileHandlerController=new AbortController,this._memCache.clear();const e=this.layer.currentStyleInfo.style,t=this.view.state?.contentPixelRatio??1,i=new y(e),l=new d(this.layer,i,t,this._memCache),r=l.start({signal:this._tileHandlerController.signal,schedule:C}),s=l.spriteMosaic;r.then((()=>this._tileHandlerController=null)),this._updatingHandles.addPromise(Promise.all([r,s]).then((([,e])=>{const t=this._tileHandler,i=this.painter;this.painter=new p(e,l.glyphMosaic),this._tileHandler=l,this.emit(\"data-changed\"),t.destroy(),i&&i.dispose()})))};this._updatingHandles.add((()=>({style:this.layer.currentStyleInfo.style,pixelRatio:this.view.state?.contentPixelRatio})),L),this.addHandles([this.layer.on(\"paint-change\",(()=>this.emit(\"data-changed\"))),this.layer.on(\"style-layer-change\",L),this.layer.on(\"delete-style-layer\",L),this.layer.on(\"spriteSource-change\",(()=>this.emit(\"data-changed\"))),this.layer.on(\"layout-change\",(()=>this.emit(\"data-changed\"))),this.layer.on(\"style-layer-visibility-change\",(()=>this.emit(\"data-changed\")))]);const j=Promise.all([g,w,R]);this.addResolvingPromise(j)}destroy(){this.painter=i(this.painter),this._tileHandlerController=l(this._tileHandlerController),this._tileHandler=r(this._tileHandler),this._memCache=r(this._memCache)}get contentZoom(){return has(\"disable-feature:vtl-level-shift\")?1:this.view.qualitySettings.tiledSurface.vtlContentZoom}get displayLevelRange(){const e=this.tileInfo.lods,t=this.layer.minScale||e[0].scale,i=this.layer.maxScale||e[e.length-1].scale,l=this.levelRangeFromScaleRange(t,i);return this.layer.maxScale?l.maxLevel++:l.maxLevel+=this.levelShift,l}get dataScaleRange(){const e=this.tileInfo.lods;return{minScale:e[0].scale,maxScale:e[e.length-1].scale}}get dataLevelRange(){const{minScale:e,maxScale:t}=this.dataScaleRange,i=this.levelRangeFromScaleRange(e,t);return 1===i.minLevel&&256===this.tileInfo.size[0]&&(i.minLevel=0),i.maxLevel+=this.levelShift,i}async fetchTile(e,t){const i=this.schemaHelper.getLevelRowColumn(e);return this._tileHandler.getVectorTile(i,t)}};e([h()],_.prototype,\"layer\",void 0),e([h()],_.prototype,\"levelShift\",void 0),e([h()],_.prototype,\"contentZoom\",null),e([h()],_.prototype,\"displayLevelRange\",null),e([h()],_.prototype,\"tileInfo\",void 0),e([h()],_.prototype,\"dataScaleRange\",null),e([h()],_.prototype,\"dataLevelRange\",null),e([h()],_.prototype,\"updatingProgressValue\",void 0),_=e([c(\"esri.views.3d.layers.VectorTileLayerView3D\")],_);const C=_;function H(e){return t=>e.immediate.schedule(t)}export{C as default};\n"],"names":["l","n","constructor","super","arguments","this","slicePlaneEnabled","supportsHeightUnitConversion","postscript","p","layer","addResolvingPromise","_validateHeightModelInfo","o","AbortController","r","signal","addHandles","s","abort","t","_this$view$defaultsFr","view","defaultsFromMap","heightModelInfoReady","e","i","a","heightModelInfo","prototype","m","hasMixedImageFormats","imageFormatIsOpaque","fullExtent","isOpaque","fullOpacity","visibleAtCurrentScale","c","minScale","maxScale","terrainScale","Math","round","basemapTerrain","tilingScheme","levelAtScale","displayLevelRange","minLevel","maxLevel","dataScaleRange","tileInfo","lods","scale","length","tilemapCache","effectiveMinLOD","effectiveMaxLOD","lodAt","canResume","_this$layer","_this$parent","_this$view","effectiveScaleRange","visible","loaded","parent","suspended","ready","h","visibleAtCurrentTimeExtent","dataLevelRange","levelRangeFromScaleRange","performanceInfo","getUsedMemoryForLayerView","getTileUrl","_addTilingSchemeMatchPromise","Promise","reject","_getTileInfoSupportError","_this$view2","tilingSchemeLocked","then","_this$layer$tilemapCa","_getTileInfoCompatibilityError","_this$layer$tilemapCa2","spatialReference","state","viewingMode","error","name","compatibleWith","levels","log","LN2","abs","ceil","max","isUpdating","updating","readOnly","_scale","_shift","_levelShift","getLevelRowColumn","getLevelShift","min","getOffset","f","getScale","_memCache","_ongoingTileRequests","Map","_ongoingRequestToController","_tileInfoView","destroy","forEach","clear","getVectorTile","g","get","id","retain","_getVectorTileData","_layer","u","getTileBounds","getTileResolution","_styleRepository","setData","put","usedMemory","neededForCoverage","transforms","tileUnitsToPixels","has","_getParsedVectorTileData","delete","catch","set","fetchTileData","parseTileData","key","data","b","vtlBackground","vtlFill","vtlLine","vtlCircle","vtlSymbol","spriteMosaic","glyphMosaic","_brushCache","_vtlMaterialManager","dispose","vectorTilesMaterialManager","drawSymbols","layers","renderPass","type","SYMBOL","getLayoutProperty","getValue","NONE","displayLevel","minzoom","maxzoom","styleLayerUID","uid","styleLayer","_drawWithBrush","drawBackground","backgroundBucketIds","context","requiredLevel","level","setBlendingEnabled","setDepthTestEnabled","setStencilTestEnabled","getLayerById","BACKGROUND","drawTile","setDepthWriteEnabled","setDepthFunction","LEQUAL","_renderStyleLayer","setBlendFunctionSeparate","ONE","ONE_MINUS_SRC_ALPHA","bindVAO","layerData","FILL","LINE","CIRCLE","d","setStencilWriteMask","drawMany","_","S","_tileHandlerController","levelShift","initialize","v","force512VTL","getCompatibleForVTL","_e$spatialReference","_e$spatialReference2","pixelSize","isGeographic","schemaHelper","resourceController","memoryController","newCache","concat","release","qualitySettings","memoryLimit","maxSize","y","currentStyleInfo","style","_tileHandler","contentPixelRatio","C","immediate","schedule","H","w","start","R","painter","L","_this$view$state$cont","_this$view$state","_updatingHandles","addPromise","all","_ref","emit","add","_this$view$state2","pixelRatio","on","j","contentZoom","tiledSurface","vtlContentZoom","size","fetchTile"],"sourceRoot":""}