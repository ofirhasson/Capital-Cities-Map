/*! For license information please see 47196.7ef6cceb.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunknorthwind=self.webpackChunknorthwind||[]).push([[47196,70116,77671,55785],{70116:(e,t,n)=>{var o;n.d(t,{Y:()=>o}),function(e){e[e.KILOBYTES=1024]="KILOBYTES",e[e.MEGABYTES=1048576]="MEGABYTES",e[e.GIGABYTES=1073741824]="GIGABYTES"}(o||(o={}))},47898:(e,t,n)=>{n.d(t,{Fp:()=>u,GJ:()=>s,M1:()=>i,MQ:()=>p,Ww:()=>m,bA:()=>d,hw:()=>h,mE:()=>c,ne:()=>a,nn:()=>l,qF:()=>g,yG:()=>r,yP:()=>v});var o=n(68860);function i(e){return{value:e}}function r(e,t){return{type:(0,o.UF)(t),value:e,unit:t}}function a(e,t){return{type:(0,o.UF)(t),value:e,unit:t}}function s(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"arithmetic";return{type:(0,o.UF)(t),value:e,unit:t,rotationType:n}}function l(e,t){const n=c(e,t);return"angle"===e.type?s(n,t,e.rotationType):function(e,t){return{type:(0,o.UF)(t),value:e,unit:t}}(n,t)}function c(e,t){return(0,o.En)(e.value,e.unit,t)}function u(e,t){return null==e?t:null==t||e.value>(0,o.En)(t.value,t.unit,e.unit)?e:t}function d(e,t){return null==e?null:{...e,value:e.value*t}}function h(e,t,n){if(t===n)return e;switch(n){case"arithmetic":case"geographic":return 90-e}}const v=r(0,"meters"),p=a(0,"square-meters"),m=(s(0,"radians"),s(0,"degrees")),g=s(0,"degrees","geographic")},5163:(e,t,n)=>{n.d(t,{L4:()=>T,LO:()=>h,Qv:()=>u,Rd:()=>v,Ud:()=>f,VG:()=>d,Wv:()=>m,Zv:()=>b,_o:()=>D,aC:()=>y,h9:()=>g,ld:()=>w,mg:()=>p,q6:()=>_,sS:()=>k,yc:()=>S});var o=n(70116),i=n(17768),r=n(16889),a=n(47898),s=n(643),l=n(68860),c=n(6291);function u(e,t,n){return e.units[t][n]}function d(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr";return"".concat((0,c.uf)(t,{minimumFractionDigits:o,maximumFractionDigits:o,signDisplay:t>0?"never":"exceptZero"})," ").concat(u(e,n,i))}function h(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr";return"".concat((0,c.uf)(t,{minimumFractionDigits:o,maximumFractionDigits:o,signDisplay:"exceptZero"})," ").concat(u(e,n,i))}function v(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr";const r=(0,l.Y8)(t,n);return d(e,(0,l.En)(t,n,r),r,o,i)}function p(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr";const r=(0,l.Y8)(t,n);return h(e,(0,l.En)(t,n,r),r,o,i)}function m(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr";const r=(0,l.Dw)(t,n);return d(e,(0,l.En)(t,n,r),r,o,i)}function g(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr";const r=(0,l.Dw)(t,n);return h(e,(0,l.En)(t,n,r),r,o,i)}function f(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr";const r=(0,l.Q7)(t,n);return d(e,(0,l.En)(t,n,r),r,o,i)}function _(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr";const r=(0,l.Q7)(t,n);return h(e,(0,l.En)(t,n,r),r,o,i)}function b(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr";const r=(0,l.jl)(t,n);return d(e,(0,l.En)(t,n,r),r,o,i)}function y(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr";const r=(0,l.jl)(t,n);return h(e,(0,l.En)(t,n,r),r,o,i)}function w(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr";const r=(0,l.ZI)(t,n);return d(e,(0,l.En)(t,n,r),r,o,i)}function S(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr";const r=(0,l.LV)(t,n);return d(e,(0,l.En)(t,n,r),r,o,i)}const C=(e,t)=>({style:"unit",unitDisplay:"narrow",unit:"degree",maximumFractionDigits:t,minimumFractionDigits:t,signDisplay:e>0?"never":"exceptZero"});function T(e,t,n,o,r){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:i.BV,u=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],d=s.normalize((0,a.hw)((0,l.En)(e,t,"degrees"),n,o),0,u);const h=C(d,null!==r&&void 0!==r?r:2);return d=E(d,h),(0,c.uf)(d,h)}function D(e,t,n,o,i){var r;n!==o&&(e=-e);const a={style:"unit",unitDisplay:"narrow",unit:"degree",maximumFractionDigits:i=null!==(r=i)&&void 0!==r?r:2,minimumFractionDigits:i,signDisplay:"exceptZero"};let s=(0,l.En)(e,t,"degrees")%360;return s=E(s,a),(0,c.uf)(s,a)}const M=new Map;function E(e,t){const n=JSON.stringify(t);let o=M.get(n);return o||(o=new Intl.NumberFormat("en-US",t),M.set(n,o)),/^[-+]?360\.?0*\xb0?$/.test(o.format(e))?0:e}const I=["B","kB","MB","GB","TB"];function k(e,t){let n=0===(t=Math.round(t))?0:Math.floor(Math.log(t)/Math.log(o.Y.KILOBYTES));n=(0,r.uZ)(n,0,I.length-1);const i=(0,c.uf)(t/o.Y.KILOBYTES**n,{maximumFractionDigits:2});return(0,s.gx)(e.units.bytes[I[n]],{fileSize:i})}},77671:(e,t,n)=>{n.d(t,{Y:()=>i});var o=n(74177);const i={readOnly:!0,get(){return(0,o.R)(this.view)}}},74177:(e,t,n)=>{n.d(t,{R:()=>r});var o=n(68860),i=n(7575);function r(e){var t,n,r,a,s;const l="metric";if(null==e)return l;const c=e.map,u=null!==(t=c&&"portalItem"in c?null===(n=c.portalItem)||void 0===n?void 0:n.portal:null)&&void 0!==t?t:i.Z.getDefault();switch(null!==(r=null===(a=u.user)||void 0===a?void 0:a.units)&&void 0!==r?r:u.units){case l:return l;case"english":return"imperial"}return null!==(s=(0,o.yT)(e.spatialReference))&&void 0!==s?s:l}},47196:(e,t,n)=>{n.r(t),n.d(t,{default:()=>vn});var o=n(27366),i=(n(59166),n(98928)),r=n(42537),a=n(92026),s=n(94172),l=n(643),c=n(49861),u=n(89125),d=(n(84936),n(93169),n(69912)),h=n(77671),v=n(70491),p=n(16072),m=n(4951),g=n(33565);const f="esri-directions",_={base:f,addStopButton:"".concat(f,"__add-stop-button"),arrivalTime:"".concat(f,"__arrival-time"),arrivalTimeContainer:"".concat(f,"__arrival-time-container"),clearRouteButton:"".concat(f,"__clear-route-button"),collapsibleSection:"".concat(f,"__maneuver-section--collapsible"),contentTitle:"".concat(f,"__content-title"),costsDetails:"".concat(f,"__costs-details"),departureDateTimePickers:"".concat(f,"__departure-date-time-pickers"),departureTime:"".concat(f,"__departure-time"),departureTimeControls:"".concat(f,"__departure-time-controls"),departureTimeSelect:"".concat(f,"__departure-time-select"),directionCosts:"".concat(f,"__costs"),directionsSection:"".concat(f,"__directions-section"),horizontalSplitter:"".concat(f,"__horizontal-splitter"),interactiveStopIcon:"".concat(f,"__stop-icon--interactive"),intermediateCost:"".concat(f,"__cost--intermediate"),lastStopIconContainer:"".concat(f,"__stop-icon-container--last"),layerDetailsLink:"".concat(f,"__layer-details-link"),loader:"".concat(f,"__loader"),maneuver:"".concat(f,"__maneuver"),maneuverActive:"".concat(f,"__maneuver--active"),maneuverCosts:"".concat(f,"__maneuver-costs"),maneuverCostsContainer:"".concat(f,"__maneuver-costs-container"),maneuverIcon:"".concat(f,"__maneuver-icon"),maneuverList:"".concat(f,"__maneuver-list"),maneuverPlaceName:"".concat(f,"__maneuver-place-name"),maneuverSection:"".concat(f,"__maneuver-section"),maneuverSectionHeader:"".concat(f,"__maneuver-section-header"),maneuverSectionHeaderButton:"".concat(f,"__maneuver-section-header-toggle-button"),maneuverSectionTitle:"".concat(f,"__maneuver-section-title"),maneuverSectionToggle:"".concat(f,"__maneuver-section-toggle"),maneuvers:"".concat(f,"__maneuvers"),message:"".concat(f,"__message"),messageHeading:"".concat(f,"__message_heading"),panelContent:"".concat(f,"__panel-content"),panelContentError:"".concat(f,"__panel-content--error"),panelContentLoading:"".concat(f,"__panel-content--loading"),panelContentSignIn:"".concat(f,"__panel-content--sign-in"),primaryCosts:"".concat(f,"__costs-value"),printButton:"".concat(f,"__print-button"),removeStop:"".concat(f,"__remove-stop-icon"),removeStopButton:"".concat(f,"__remove-stop"),reverseStops:"".concat(f,"__reverse-stops"),routeActions:"".concat(f,"__route-actions"),saveAsButton:"".concat(f,"__save-as-button"),saveAsButtonPopover:"".concat(f,"__save-as-button-with-popover"),saveButton:"".concat(f,"__save-button"),saveButtons:"".concat(f,"__save-buttons"),savePopover:"".concat(f,"__save-popover"),saveSection:"".concat(f,"__save-section"),scroller:"".concat(f,"__scroller"),secondaryCosts:"".concat(f,"__other-costs-total"),section:"".concat(f,"__section"),sectionSplitter:"".concat(f,"__section-splitter"),signInButton:"".concat(f,"__sign-in-button"),signInContent:"".concat(f,"__sign-in-content"),stopHandle:"".concat(f,"__stop-handle"),stopHandleIcon:"".concat(f,"__stop-handle-icon"),stopIcon:"".concat(f,"__stop-icon"),stopIconContainer:"".concat(f,"__stop-icon-container"),stopInput:"".concat(f,"__stop-input"),stopOptions:"".concat(f,"__stop-options"),stopRow:"".concat(f,"__stop-row"),stopRowGhost:"".concat(f,"__stop-row-ghost"),stops:"".concat(f,"__stops"),summary:"".concat(f,"__summary"),toolbarButtons:"".concat(f,"__toolbar-buttons"),toolbarSection:"".concat(f,"__toolbar-section"),travelMode:"".concat(f,"__travel-modes"),travelModeSelect:"".concat(f,"__travel-modes-select"),validStopRow:"".concat(f,"__stop-row--valid"),verticalSplitter:"".concat(f,"__vertical-splitter"),warningCard:"".concat(f,"__warning-card"),warningHeader:"".concat(f,"__warning-header"),warningHeading:"".concat(f,"__warning-heading"),warningMessage:"".concat(f,"__warning-message")};var b=n(80987),y=n(10064),w=n(91505),S=n(66978),C=(n(32718),n(76969)),T=n(36257),D=n(75980),M=n(26213),E=n(77279),I=n(6701),k=n(47898),P=n(5163),A=n(6291);const x=new Map([["arrive","route-to"],["bear-left","bear-left"],["bear-right","bear-right"],["boundary-crossing","blank"],["central-fork","fork-middle"],["clockwise-roundabout","round-about-right"],["counter-clockwise-roundabout","round-about"],["depart","route-from"],["door","walk-through-door"],["down-elevator","elevator-down"],["down-escalator","escalator-down"],["down-stairs","stairs-down"],["elevator","elevator"],["escalator","escalator"],["general-event","information"],["header","blank"],["landmark","map-pin"],["lane","blank"],["left-fork","fork-left"],["left-handed-u-turn","u-turn"],["left-ramp","ramp-left"],["left-turn","left"],["left-turn-and-immediate-left-turn","left-left"],["left-turn-and-immediate-right-turn","left-right"],["off-ferry","disembark"],["on-ferry","embark"],["pedestrian-ramp","take-pedestrian-ramp"],["restriction-violation","exclamation-mark-triangle"],["right-fork","fork-right"],["right-handed-u-turn","u-turn-right"],["right-ramp","ramp-right"],["right-turn","right"],["right-turn-and-immediate-left-turn","right-left"],["right-turn-and-immediate-right-turn","right-right"],["roundabout","round-about"],["scaled-cost-barrier-event","blank"],["sharp-left","sharp-left"],["sharp-right","sharp-right"],["stairs","stairs"],["straight","straight"],["time-zone-change","clock"],["traffic-event","exclamation-mark-triangle"],["u-turn","u-turn"],["up-elevator","elevator-up"],["up-escalator","escalator-up"],["up-stairs","stairs-up"]]);var R;function O(e,t){return(0,A.uf)(e,{style:"unit",unit:t,unitDisplay:"short"})}function L(e,t,n){if(0===t)return"";let o,i,r=0;const a=(0,k.yG)(t,"meters");switch(n){case"metric":a.value<.01?({value:o,unit:i}=(0,k.nn)(a,"millimeters")):a.value<1?({value:o,unit:i}=(0,k.nn)(a,"centimeters")):a.value<1e3?({value:o,unit:i}=(0,k.nn)(a,"meters")):a.value<1e5?(({value:o,unit:i}=(0,k.nn)(a,"kilometers")),r=1):({value:o,unit:i}=(0,k.nn)(a,"kilometers"));break;case"imperial":a.value<.254?({value:o,unit:i}=(0,k.nn)(a,"inches")):a.value<160.9344?({value:o,unit:i}=(0,k.nn)(a,"feet")):a.value<160934.4?(({value:o,unit:i}=(0,k.nn)(a,"miles")),r=1):({value:o,unit:i}=(0,k.nn)(a,"miles"));break;default:({value:o,unit:i}=(0,k.nn)(a,n)),r=2}return(0,P.VG)(e,o,i,r)}function N(e){if(0===e)return"";if(e<1)return O(Math.floor(60*e),"second");if(e<60)return O(Math.floor(e),"minute");const t=Math.floor(e/60);if(e<1440){const n=Math.floor(e%60);return 0===n?"".concat(O(t,"hour")):"".concat(O(t,"hour")," ").concat(O(n,"minute"))}return O(t,"hour")}function B(e){return null!=e&&x.has(e)?x.get(e):"blank"}!function(e){e.NOW="now",e.DEPART_AT="depart-at",e.UNSPECIFIED="unspecified"}(R||(R={}));var F,H=n(83651),z=n(99505),Y=n(99779);!function(e){e[e.Active=0]="Active",e[e.Complete=1]="Complete",e[e.Failed=2]="Failed",e[e.Idle=3]="Idle",e[e.Suspended=4]="Suspended"}(F||(F={}));let U=class extends((0,z._)(w.Z.EventedAccessor)){constructor(e){super(e),this._highlight=null,this._loadPromise=null,this._loadController=null,this._routeController=null,this._serviceDescriptionStatus=F.Idle,this.apiKey=void 0,this.defaultTravelMode=null,this.departureIsoDate=null,this.departureIsoTime=null,this.departureOption=R.NOW,this.departureTime="now",this.lastError=null,this.lastRoute=null,this.layer=null,this.maxStops=50,this.routeParameters=new M.Z({directionsLengthUnits:"kilometers",findBestSequence:!1,returnZ:!0,startTime:null,startTimeIsUTC:!0,useTimeWindows:!1}),this.serviceDescription=null,this.view=null}initialize(){var e,t;this.addHandles([(0,s.on)((()=>{var e;return null===(e=this.layer)||void 0===e?void 0:e.stops}),"change",(()=>{this.clearResults()})),(0,s.watch)((()=>this.layer),(e=>{if(null!=e){for(;e.stops.length<2;)e.stops.add(new v.Z);this._set("defaultTravelMode",null),this.addHandles((0,s.when)((()=>{var t;return null!=this.serviceDescription?null===(t=e.routeInfo)||void 0===t||null===(t=t.analysisSettings)||void 0===t?void 0:t.travelMode:null}),(e=>{this.defaultTravelMode=this._resolveDefaultTravelMode(e)}),{once:!0}))}}),s.syncAndInitial)]);const n=(0,C.f1)(null!==(e=null===(t=this.view)||void 0===t?void 0:t.timeZone)&&void 0!==e?e:I.By),o=Y.ou.fromMillis(Date.now());this.departureIsoDate=o.toFormat(H.rp,(0,H.W1)(n)),this.departureIsoTime=o.toFormat(H.Sj,(0,H.W1)(n))}get _directionsLanguage(){var e;if(null==this.serviceDescription)return;const t=this.serviceDescription.directionsSupportedLanguages;if(!t)return;const n=(null!==(e=this.routeParameters.directionsLanguage)&&void 0!==e?e:(0,T.Kd)()).slice(0,2);return t.find((e=>e.toLowerCase().slice(0,2)===n))}get formattedEta(){var e,t,n,o,i,r;const a=null===(e=this.layer)||void 0===e||null===(e=e.routeInfo)||void 0===e?void 0:e.endTime,s=null===(t=this.layer)||void 0===t||null===(t=t.routeInfo)||void 0===t?void 0:t.endTimeOffset;if(this.departureOption===R.UNSPECIFIED||!a||!s)return null;const l=Y.ou.fromJSDate(a,{zone:Y.Qf.instance(s)}),c=Y.ou.fromJSDate(a,{zone:Y.vF.create((0,C.f1)(null!==(n=null===(o=this.view)||void 0===o?void 0:o.timeZone)&&void 0!==n?n:I.By))}),u=Y.ou.fromJSDate(new Date,{zone:Y.vF.create((0,C.f1)(null!==(i=null===(r=this.view)||void 0===r?void 0:r.timeZone)&&void 0!==i?i:I.By))}),d=u.year===c.year&&u.month===c.month&&u.day===c.day,h=c.offset===s?void 0:I.D5,v=d?void 0:(0,C.Ze)("short-date"),p=(0,C.Ze)("short-time");return(0,C.i$)(l.toISO(),{...v,...p,timeZoneName:h})}get impedanceAttribute(){var e,t,n,o,i;const r=null!==(e=null!==(t=null!==(n=null===(o=this.routeParameters.travelMode)||void 0===o?void 0:o.impedanceAttributeName)&&void 0!==n?n:this.routeParameters.impedanceAttribute)&&void 0!==t?t:null===(i=this.serviceDescription)||void 0===i?void 0:i.impedance)&&void 0!==e?e:null;return this.getCostAttribute(r)}get selectedTravelMode(){var e,t,n,o;return null==this.serviceDescription?null:null!==(e=null!==(t=null!==(n=this.defaultTravelMode)&&void 0!==n?n:this.serviceDescription.defaultTravelMode)&&void 0!==t?t:null===(o=this.serviceDescription.supportedTravelModes)||void 0===o?void 0:o[0])&&void 0!==e?e:null}set selectedTravelMode(e){this._override("selectedTravelMode",e)}get state(){if(null!=this._routeController)return"routing";if(null!=this.lastError)return"error";switch(this._serviceDescriptionStatus){case F.Suspended:return"unauthenticated";case F.Idle:return"disabled";case F.Active:return"initializing";case F.Failed:return"error";default:return"ready"}}get timeAttribute(){var e,t,n,o,i;const r=null!==(e=null!==(t=null!==(n=null===(o=this.routeParameters.travelMode)||void 0===o?void 0:o.timeAttributeName)&&void 0!==n?n:this.routeParameters.directionsTimeAttribute)&&void 0!==t?t:null===(i=this.serviceDescription)||void 0===i?void 0:i.directionsTimeAttribute)&&void 0!==e?e:null;return this.getCostAttribute(r)}get travelModes(){var e,t;const n=null!==(e=null===(t=this.serviceDescription)||void 0===t||null===(t=t.supportedTravelModes)||void 0===t?void 0:t.slice())&&void 0!==e?e:[];return null==this.defaultTravelMode||n.includes(this.defaultTravelMode)||n.unshift(this.defaultTravelMode),n}async load(){if(null!=this._loadPromise)return this._loadPromise;this._loadPromise=this._load(),await this._loadPromise,this._loadPromise=null}async highlight(e){if(this.clearHighlights(),!this.view||!this.layer)return;const t=await this.view.whenLayerView(this.layer);this._highlight=t.highlight(e)}clearHighlights(){null!=this._highlight&&(this._highlight.remove(),this._highlight=null)}centerAt(e){if(null==this.view)return;const t=function(e){return"esri.rest.support.Stop"===(null===e||void 0===e?void 0:e.declaredClass)}(e)||function(e){return"esri.Graphic"===(null===e||void 0===e?void 0:e.declaredClass)}(e)?e.geometry:e;null!=t&&this.callGoTo({target:t})}clearResults(){var e;this._set("lastRoute",null),null===(e=this.layer)||void 0===e||e.removeResult()}async getDirections(){var e,t;const{apiKey:n,layer:o,state:i}=this;if(null==o)throw new y.Z("directions-view-model:missing-route-layer","A route layer must be associated with the view model.");if("unauthenticated"===i||"initializing"===i||"disabled"===i||this._serviceDescriptionStatus===F.Failed)throw new y.Z("directions-view-model:not-loaded","Cannot get directions until view model loads.");this._set("lastError",null),null!=this._routeController&&(this._routeController.abort(),this._routeController=null);const{startTime:r,startTimeIsUTC:a}=this._getStartTimeParameters(),s=null!==(e=null===(t=this.view)||void 0===t?void 0:t.spatialReference)&&void 0!==e?e:null,l=this.routeParameters.clone();if(l.set({startTime:r,startTimeIsUTC:a,directionsLanguage:this._directionsLanguage,apiKey:n,outSpatialReference:s}),null!=this.selectedTravelMode&&(l.travelMode=this.selectedTravelMode),o.stops.filter((e=>{let{geometry:t}=e;return null!=t})).length<2){const e=new y.Z("directions-view-model:not-enough-stops","Not enough stops for routing");throw this._set("lastError",e),e}this._routeController=new AbortController;const{signal:c}=this._routeController;let u=null;try{u=await o.solve(l,{signal:c})}catch(K){if(!(0,S.D_)(K)){const t=new y.Z("directions-view-model:unable-to-route","Unable to route to these addresses",{error:K});throw this._set("lastError",t),this._set("lastRoute",null),t}}finally{this._routeController=null}for(const d of u.stops)null==d.geometry&&(d.name=null);return o.update(u),this._set("lastRoute",u),this.zoomToRoute(),u}getCostAttribute(e){var t,n,o;return null!==(t=(null!==(n=null===(o=this.serviceDescription)||void 0===o||null===(o=o.networkDataset)||void 0===o?void 0:o.networkAttributes)&&void 0!==n?n:[]).find((t=>{let{name:n,usageType:o}=t;return n===e&&"cost"===o})))&&void 0!==t?t:null}reset(){this.clearHighlights(),this.clearResults(),null!=this.layer&&(this.layer.removeAll(),this.layer.stops=new b.Z([new v.Z,new v.Z]))}save(){if(!this.layer)throw new y.Z("directions-view-model:missing-layer","save() requires a layer");return this.layer.save()}saveAs(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.layer)throw new y.Z("directions-view-model:missing-layer","saveAs() requires a layer");return this.layer.saveAs(e,t)}updateDepartureTime(){if(this.departureIsoDate&&this.departureIsoTime)switch(this.departureOption){case R.NOW:this.departureTime="now";break;case R.DEPART_AT:{const e=Y.ou.fromISO("".concat(this.departureIsoDate,"T").concat(this.departureIsoTime),{zone:Y.Qf.instance(0)});this.departureTime=e.toJSDate();break}case R.UNSPECIFIED:this.departureTime=null}}zoomToRoute(){const{view:e,layer:t}=this;if(null==e||null==(null===t||void 0===t?void 0:t.routeInfo))return;const{geometry:n}=t.routeInfo;if(null==n)return;const o=n.extent;if(!o)return;const i=o.width>o.height,r=o.clone().expand(i?2:1);this.callGoTo({target:r})}_getStartTimeParameters(){var e,t;return"now"===this.departureTime?{startTime:null!==(e=null===(t=this.serviceDescription)||void 0===t?void 0:t.capabilities.supportsNow)&&void 0!==e&&e?"now":new Date,startTimeIsUTC:!0}:null==this.departureTime?{startTime:void 0,startTimeIsUTC:void 0}:{startTime:this.departureTime,startTimeIsUTC:!1}}async _load(){if(null!=this.serviceDescription||null==this.layer)return;null!=this._loadController&&(this._loadController.abort(),this._loadController=null),this._loadController=new AbortController;const{signal:e}=this._loadController;try{this._serviceDescriptionStatus=F.Active;const t=await(0,D.bI)(this.layer.url,this.apiKey,{signal:e});this._set("serviceDescription",t),this._serviceDescriptionStatus=F.Complete}catch(t){if((0,S.D_)(t))return void(this._serviceDescriptionStatus=F.Idle);if("identity-manager:user-aborted"===t.name)return void(this._serviceDescriptionStatus=F.Suspended);const e=new y.Z("directions-view-model:service-metadata-unavailable","Cannot load route service metadata",{error:t});throw this._serviceDescriptionStatus=F.Failed,this._set("lastError",e),e}finally{this._loadController=null}}_resolveDefaultTravelMode(e){var t;if(null==this.serviceDescription)return null;const{defaultTravelMode:n,supportedTravelModes:o}=this.serviceDescription,i=null===(t=/^<(?<name>.*)>$/i.exec(e.name))||void 0===t||null===(t=t.groups)||void 0===t?void 0:t.name;if(i){const t=null===o||void 0===o?void 0:o.find((e=>{let{name:t}=e;return t.toLocaleLowerCase()===i.trim().toLocaleLowerCase()})),r=null!==t&&void 0!==t?t:n;return E.Z.fromJSON({...null===r||void 0===r?void 0:r.toJSON(),...e.toJSON()})}const r=null===o||void 0===o?void 0:o.find((t=>{let{name:n}=t;return n.toLocaleLowerCase()===e.name.toLocaleLowerCase()}));return null!==r&&void 0!==r?r:n}};(0,o._)([(0,c.Cb)()],U.prototype,"_directionsLanguage",null),(0,o._)([(0,c.Cb)()],U.prototype,"_routeController",void 0),(0,o._)([(0,c.Cb)()],U.prototype,"_serviceDescriptionStatus",void 0),(0,o._)([(0,c.Cb)()],U.prototype,"apiKey",void 0),(0,o._)([(0,c.Cb)()],U.prototype,"defaultTravelMode",void 0),(0,o._)([(0,c.Cb)()],U.prototype,"departureTime",void 0),(0,o._)([(0,c.Cb)()],U.prototype,"formattedEta",null),(0,o._)([(0,c.Cb)({readOnly:!0})],U.prototype,"impedanceAttribute",null),(0,o._)([(0,c.Cb)()],U.prototype,"lastError",void 0),(0,o._)([(0,c.Cb)({readOnly:!0})],U.prototype,"lastRoute",void 0),(0,o._)([(0,c.Cb)()],U.prototype,"layer",void 0),(0,o._)([(0,c.Cb)({type:Number,range:{min:2,max:50},nonNullable:!0})],U.prototype,"maxStops",void 0),(0,o._)([(0,c.Cb)({type:M.Z,nonNullable:!0})],U.prototype,"routeParameters",void 0),(0,o._)([(0,c.Cb)()],U.prototype,"selectedTravelMode",null),(0,o._)([(0,c.Cb)({readOnly:!0})],U.prototype,"serviceDescription",void 0),(0,o._)([(0,c.Cb)({readOnly:!0})],U.prototype,"state",null),(0,o._)([(0,c.Cb)({readOnly:!0})],U.prototype,"timeAttribute",null),(0,o._)([(0,c.Cb)()],U.prototype,"travelModes",null),(0,o._)([(0,c.Cb)()],U.prototype,"view",void 0),(0,o._)([(0,c.Cb)()],U.prototype,"getDirections",null),(0,o._)([(0,c.Cb)()],U.prototype,"zoomToRoute",null),U=(0,o._)([(0,d.j)("esri.widgets.Directions.DirectionsViewModel")],U);const X=U;var W=n(7575),Z=n(8905),j=(n(80975),n(80532)),G=n(67005);const K="esri-save-layer",V={panel:"".concat(K),error:"".concat(K,"__error"),errorIcon:"".concat(K,"__error-icon"),errorLabel:"".concat(K,"__error-label"),layerNameLabel:"".concat(K,"__layer-name-label"),portalFolderLabel:"".concat(K,"__portal-folder-label"),processLabel:"".concat(K,"__process-label"),processLoader:"".concat(K,"__process-loader")};let q=class extends g.Z{constructor(e,t){super(e,t),this._folders=null,this._layer=null,this._layerNameInput=null,this._portalFolderCombobox=null,this._userName=null,this.messages=null,this.messagesCommon=null,this.messagesIdentity=null,this.opened=!1,this.state="initialized",this.close=()=>{this.opened=!1,this.state="initialized"}}loadDependencies(){return(0,Z.h)({button:()=>Promise.all([n.e(92358),n.e(46895),n.e(54438),n.e(14105),n.e(32275)]).then(n.bind(n,32275)),combobox:()=>Promise.all([n.e(92358),n.e(46895),n.e(54438),n.e(89219),n.e(1579),n.e(34504),n.e(63017),n.e(70419)]).then(n.bind(n,70419)),"combobox-item":()=>Promise.all([n.e(92358),n.e(15862)]).then(n.bind(n,15862)),icon:()=>Promise.all([n.e(92358),n.e(87474)]).then(n.bind(n,87474)),input:()=>Promise.all([n.e(92358),n.e(46895),n.e(54438),n.e(8715),n.e(16746)]).then(n.bind(n,75655)),label:()=>Promise.all([n.e(92358),n.e(35738)]).then(n.bind(n,35738)),loader:()=>n.e(92382).then(n.bind(n,92382)),panel:()=>Promise.all([n.e(92358),n.e(46895),n.e(89219),n.e(63839),n.e(65138),n.e(2654),n.e(23635),n.e(89524),n.e(85026)]).then(n.bind(n,85026))})}get label(){var e,t;return null!==(e=null===(t=this.messages)||void 0===t?void 0:t.widgetLabel)&&void 0!==e?e:""}set label(e){this._overrideIfSome("label",e)}async open(e){this.state="initialized",this.opened=!0,this._layer=e,this.state="connect-to-portal";const t=W.Z.getDefault();try{await t.signIn()}catch(o){return void((0,S.D_)(o)||"identity-manager:user-aborted"===o.name?this.close():this.state="connect-to-portal-error")}this.state="fetch-portal-information";const{user:n}=t;this._userName=null===n||void 0===n?void 0:n.username;try{this._folders=await(null===n||void 0===n?void 0:n.fetchFolders())}catch{return void(this.state="fetch-portal-information-error")}this.state="save-layer"}render(){switch(this.state){case"initialized":return this._renderInitialized();case"connect-to-portal":return this._renderProcess(this.messagesIdentity.lblSigning);case"connect-to-portal-error":return this._renderError(this.messages.errors.authenticating);case"fetch-portal-information":return this._renderProcess(this.messages.processing.fetching);case"fetch-portal-information-error":return this._renderError(this.messages.errors.fetching);case"save-layer":return this._renderSaveLayer();case"saving":return this._renderProcess(this.messages.processing.saving);case"saving-error":return this._renderError(this.messages.errors.saving)}}_renderError(e){return(0,G.u)("calcite-panel",{class:V.panel,heading:this.messages.widgetLabel,key:"".concat(K,"-error-panel")},(0,G.u)("div",{class:V.error},(0,G.u)("calcite-icon",{class:V.errorIcon,icon:"exclamation-mark-triangle",scale:"l",textLabel:this.messagesCommon.errorMessage}),(0,G.u)("calcite-label",{class:V.errorLabel},e)),(0,G.u)("calcite-button",{appearance:"outline",onclick:this.close,slot:"footer-actions",width:"half"},this.messagesCommon.close))}_renderInitialized(){return(0,G.u)("calcite-panel",{class:V.panel,heading:this.messages.widgetLabel,key:"".concat(K,"-initialize-panel")})}_renderProcess(e){return(0,G.u)("calcite-panel",{class:V.panel,heading:this.messages.widgetLabel,key:"".concat(K,"-process-panel")},(0,G.u)("calcite-loader",{class:V.processLoader,label:e}),(0,G.u)("calcite-label",{alignment:"center",class:V.processLabel},e))}_renderSaveLayer(){if(null==this._layer||null==this._folders||null==this._userName)return this._renderInitialized();const{stops:e}=this._layer,t="".concat(e.at(0).name," - ").concat(e.at(-1).name),n=this._folders.map((e=>{var t;return(0,G.u)("calcite-combobox-item",{key:"".concat(K,"-folder-").concat(e.id),textLabel:null!==(t=e.title)&&void 0!==t?t:"",value:e.id})}));return n.unshift((0,G.u)("calcite-combobox-item",{key:"".concat(K,"-folder-home"),selected:!0,textLabel:"".concat(this._userName," (").concat(this.messagesCommon.home,")"),value:null})),(0,G.u)("calcite-panel",{class:V.panel,heading:this.messages.widgetLabel,key:"".concat(K,"-save-panel")},(0,G.u)("calcite-label",{class:V.layerNameLabel},this.messages.laverName,(0,G.u)("calcite-input",{afterCreate:e=>{this._layerNameInput=e},label:this.messages.laverName,value:t})),(0,G.u)("calcite-label",{class:V.portalFolderLabel},this.messages.saveInFolder,(0,G.u)("calcite-combobox",{afterCreate:e=>{this._portalFolderCombobox=e},label:this.messages.saveInFolder,overlayPositioning:"fixed",selectionMode:"single"},n)),(0,G.u)("calcite-button",{onclick:()=>this._saveButtonClick(),slot:"footer-actions",width:"half"},this.messagesCommon.save),(0,G.u)("calcite-button",{appearance:"outline",onclick:()=>{this.close()},slot:"footer-actions",width:"half"},this.messagesCommon.cancel))}_saveButtonClick(){this.state="saving",this._saveLayer().then((()=>{this.close()})).catch((()=>{this.state="saving-error"}))}async _saveLayer(){var e,t;if(null==this._layer||null==this._folders)return;const n=null===(e=this._layerNameInput)||void 0===e?void 0:e.value,o=null===(t=this._portalFolderCombobox)||void 0===t?void 0:t.value,i=this._folders.find((e=>e.id===o));await this._layer.saveAs({title:n},{folder:i})}};(0,o._)([(0,c.Cb)()],q.prototype,"label",null),(0,o._)([(0,c.Cb)(),(0,j.H)("esri/widgets/support/t9n/SaveLayer")],q.prototype,"messages",void 0),(0,o._)([(0,c.Cb)(),(0,j.H)("esri/t9n/common")],q.prototype,"messagesCommon",void 0),(0,o._)([(0,c.Cb)(),(0,j.H)("esri/identity/t9n/identity")],q.prototype,"messagesIdentity",void 0),(0,o._)([(0,c.Cb)()],q.prototype,"opened",void 0),(0,o._)([(0,c.Cb)()],q.prototype,"state",void 0),q=(0,o._)([(0,d.j)("esri.widgets.Directions.components.SaveLayer")],q);var J=n(62197),Q=n(7021),$=n(96919),ee=n(33095),te=n(78088);function ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function oe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(n),!0).forEach((function(t){re(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ne(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ie(e){return ie="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ie(e)}function re(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ae(){return ae=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},ae.apply(this,arguments)}function se(e,t){if(null==e)return{};var n,o,i=function(e,t){if(null==e)return{};var n,o,i={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function le(e){if("undefined"!==typeof window&&window.navigator)return!!navigator.userAgent.match(e)}var ce=le(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),ue=le(/Edge/i),de=le(/firefox/i),he=le(/safari/i)&&!le(/chrome/i)&&!le(/android/i),ve=le(/iP(ad|od|hone)/i),pe=le(/chrome/i)&&le(/android/i),me={capture:!1,passive:!1};function ge(e,t,n){e.addEventListener(t,n,!ce&&me)}function fe(e,t,n){e.removeEventListener(t,n,!ce&&me)}function _e(e,t){if(t){if(">"===t[0]&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch(n){return!1}return!1}}function be(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function ye(e,t,n,o){if(e){n=n||document;do{if(null!=t&&(">"===t[0]?e.parentNode===n&&_e(e,t):_e(e,t))||o&&e===n)return e;if(e===n)break}while(e=be(e))}return null}var we,Se=/\s+/g;function Ce(e,t,n){if(e&&t)if(e.classList)e.classList[n?"add":"remove"](t);else{var o=(" "+e.className+" ").replace(Se," ").replace(" "+t+" "," ");e.className=(o+(n?" "+t:"")).replace(Se," ")}}function Te(e,t,n){var o=e&&e.style;if(o){if(void 0===n)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),void 0===t?n:n[t];t in o||-1!==t.indexOf("webkit")||(t="-webkit-"+t),o[t]=n+("string"===typeof n?"":"px")}}function De(e,t){var n="";if("string"===typeof e)n=e;else do{var o=Te(e,"transform");o&&"none"!==o&&(n=o+" "+n)}while(!t&&(e=e.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(n)}function Me(e,t,n){if(e){var o=e.getElementsByTagName(t),i=0,r=o.length;if(n)for(;i<r;i++)n(o[i],i);return o}return[]}function Ee(){var e=document.scrollingElement;return e||document.documentElement}function Ie(e,t,n,o,i){if(e.getBoundingClientRect||e===window){var r,a,s,l,c,u,d;if(e!==window&&e.parentNode&&e!==Ee()?(a=(r=e.getBoundingClientRect()).top,s=r.left,l=r.bottom,c=r.right,u=r.height,d=r.width):(a=0,s=0,l=window.innerHeight,c=window.innerWidth,u=window.innerHeight,d=window.innerWidth),(t||n)&&e!==window&&(i=i||e.parentNode,!ce))do{if(i&&i.getBoundingClientRect&&("none"!==Te(i,"transform")||n&&"static"!==Te(i,"position"))){var h=i.getBoundingClientRect();a-=h.top+parseInt(Te(i,"border-top-width")),s-=h.left+parseInt(Te(i,"border-left-width")),l=a+r.height,c=s+r.width;break}}while(i=i.parentNode);if(o&&e!==window){var v=De(i||e),p=v&&v.a,m=v&&v.d;v&&(l=(a/=m)+(u/=m),c=(s/=p)+(d/=p))}return{top:a,left:s,bottom:l,right:c,width:d,height:u}}}function ke(e,t,n){for(var o=Oe(e,!0),i=Ie(e)[t];o;){var r=Ie(o)[n];if(!("top"===n||"left"===n?i>=r:i<=r))return o;if(o===Ee())break;o=Oe(o,!1)}return!1}function Pe(e,t,n,o){for(var i=0,r=0,a=e.children;r<a.length;){if("none"!==a[r].style.display&&a[r]!==Ht.ghost&&(o||a[r]!==Ht.dragged)&&ye(a[r],n.draggable,e,!1)){if(i===t)return a[r];i++}r++}return null}function Ae(e,t){for(var n=e.lastElementChild;n&&(n===Ht.ghost||"none"===Te(n,"display")||t&&!_e(n,t));)n=n.previousElementSibling;return n||null}function xe(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)"TEMPLATE"===e.nodeName.toUpperCase()||e===Ht.clone||t&&!_e(e,t)||n++;return n}function Re(e){var t=0,n=0,o=Ee();if(e)do{var i=De(e),r=i.a,a=i.d;t+=e.scrollLeft*r,n+=e.scrollTop*a}while(e!==o&&(e=e.parentNode));return[t,n]}function Oe(e,t){if(!e||!e.getBoundingClientRect)return Ee();var n=e,o=!1;do{if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var i=Te(n);if(n.clientWidth<n.scrollWidth&&("auto"==i.overflowX||"scroll"==i.overflowX)||n.clientHeight<n.scrollHeight&&("auto"==i.overflowY||"scroll"==i.overflowY)){if(!n.getBoundingClientRect||n===document.body)return Ee();if(o||t)return n;o=!0}}}while(n=n.parentNode);return Ee()}function Le(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}function Ne(e,t){return function(){if(!we){var n=arguments;1===n.length?e.call(this,n[0]):e.apply(this,n),we=setTimeout((function(){we=void 0}),t)}}}function Be(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function Fe(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}function He(e,t,n){var o={};return Array.from(e.children).forEach((function(i){var r,a,s,l;if(ye(i,t.draggable,e,!1)&&!i.animated&&i!==n){var c=Ie(i);o.left=Math.min(null!==(r=o.left)&&void 0!==r?r:1/0,c.left),o.top=Math.min(null!==(a=o.top)&&void 0!==a?a:1/0,c.top),o.right=Math.max(null!==(s=o.right)&&void 0!==s?s:-1/0,c.right),o.bottom=Math.max(null!==(l=o.bottom)&&void 0!==l?l:-1/0,c.bottom)}})),o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}var ze="Sortable"+(new Date).getTime();function Ye(){var e,t=[];return{captureAnimationState:function(){(t=[],this.options.animation)&&[].slice.call(this.el.children).forEach((function(e){if("none"!==Te(e,"display")&&e!==Ht.ghost){t.push({target:e,rect:Ie(e)});var n=oe({},t[t.length-1].rect);if(e.thisAnimationDuration){var o=De(e,!0);o&&(n.top-=o.f,n.left-=o.e)}e.fromRect=n}}))},addAnimationState:function(e){t.push(e)},removeAnimationState:function(e){t.splice(function(e,t){for(var n in e)if(e.hasOwnProperty(n))for(var o in t)if(t.hasOwnProperty(o)&&t[o]===e[n][o])return Number(n);return-1}(t,{target:e}),1)},animateAll:function(n){var o=this;if(!this.options.animation)return clearTimeout(e),void("function"===typeof n&&n());var i=!1,r=0;t.forEach((function(e){var t=0,n=e.target,a=n.fromRect,s=Ie(n),l=n.prevFromRect,c=n.prevToRect,u=e.rect,d=De(n,!0);d&&(s.top-=d.f,s.left-=d.e),n.toRect=s,n.thisAnimationDuration&&Le(l,s)&&!Le(a,s)&&(u.top-s.top)/(u.left-s.left)===(a.top-s.top)/(a.left-s.left)&&(t=function(e,t,n,o){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))*o.animation}(u,l,c,o.options)),Le(s,a)||(n.prevFromRect=a,n.prevToRect=s,t||(t=o.options.animation),o.animate(n,u,s,t)),t&&(i=!0,r=Math.max(r,t),clearTimeout(n.animationResetTimer),n.animationResetTimer=setTimeout((function(){n.animationTime=0,n.prevFromRect=null,n.fromRect=null,n.prevToRect=null,n.thisAnimationDuration=null}),t),n.thisAnimationDuration=t)})),clearTimeout(e),i?e=setTimeout((function(){"function"===typeof n&&n()}),r):"function"===typeof n&&n(),t=[]},animate:function(e,t,n,o){if(o){Te(e,"transition",""),Te(e,"transform","");var i=De(this.el),r=i&&i.a,a=i&&i.d,s=(t.left-n.left)/(r||1),l=(t.top-n.top)/(a||1);e.animatingX=!!s,e.animatingY=!!l,Te(e,"transform","translate3d("+s+"px,"+l+"px,0)"),this.forRepaintDummy=function(e){return e.offsetWidth}(e),Te(e,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),Te(e,"transform","translate3d(0,0,0)"),"number"===typeof e.animated&&clearTimeout(e.animated),e.animated=setTimeout((function(){Te(e,"transition",""),Te(e,"transform",""),e.animated=!1,e.animatingX=!1,e.animatingY=!1}),o)}}}}var Ue=[],Xe={initializeByDefault:!0},We={mount:function(e){for(var t in Xe)Xe.hasOwnProperty(t)&&!(t in e)&&(e[t]=Xe[t]);Ue.forEach((function(t){if(t.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")})),Ue.push(e)},pluginEvent:function(e,t,n){var o=this;this.eventCanceled=!1,n.cancel=function(){o.eventCanceled=!0};var i=e+"Global";Ue.forEach((function(o){t[o.pluginName]&&(t[o.pluginName][i]&&t[o.pluginName][i](oe({sortable:t},n)),t.options[o.pluginName]&&t[o.pluginName][e]&&t[o.pluginName][e](oe({sortable:t},n)))}))},initializePlugins:function(e,t,n,o){for(var i in Ue.forEach((function(o){var i=o.pluginName;if(e.options[i]||o.initializeByDefault){var r=new o(e,t,e.options);r.sortable=e,r.options=e.options,e[i]=r,ae(n,r.defaults)}})),e.options)if(e.options.hasOwnProperty(i)){var r=this.modifyOption(e,i,e.options[i]);"undefined"!==typeof r&&(e.options[i]=r)}},getEventProperties:function(e,t){var n={};return Ue.forEach((function(o){"function"===typeof o.eventProperties&&ae(n,o.eventProperties.call(t[o.pluginName],e))})),n},modifyOption:function(e,t,n){var o;return Ue.forEach((function(i){e[i.pluginName]&&i.optionListeners&&"function"===typeof i.optionListeners[t]&&(o=i.optionListeners[t].call(e[i.pluginName],n))})),o}};function Ze(e){var t=e.sortable,n=e.rootEl,o=e.name,i=e.targetEl,r=e.cloneEl,a=e.toEl,s=e.fromEl,l=e.oldIndex,c=e.newIndex,u=e.oldDraggableIndex,d=e.newDraggableIndex,h=e.originalEvent,v=e.putSortable,p=e.extraEventProperties;if(t=t||n&&n[ze]){var m,g=t.options,f="on"+o.charAt(0).toUpperCase()+o.substr(1);!window.CustomEvent||ce||ue?(m=document.createEvent("Event")).initEvent(o,!0,!0):m=new CustomEvent(o,{bubbles:!0,cancelable:!0}),m.to=a||n,m.from=s||n,m.item=i||n,m.clone=r,m.oldIndex=l,m.newIndex=c,m.oldDraggableIndex=u,m.newDraggableIndex=d,m.originalEvent=h,m.pullMode=v?v.lastPutMode:void 0;var _=oe(oe({},p),We.getEventProperties(o,t));for(var b in _)m[b]=_[b];n&&n.dispatchEvent(m),g[f]&&g[f].call(t,m)}}var je=["evt"],Ge=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=n.evt,i=se(n,je);We.pluginEvent.bind(Ht)(e,t,oe({dragEl:Ve,parentEl:qe,ghostEl:Je,rootEl:Qe,nextEl:$e,lastDownEl:et,cloneEl:tt,cloneHidden:nt,dragStarted:mt,putSortable:lt,activeSortable:Ht.active,originalEvent:o,oldIndex:ot,oldDraggableIndex:rt,newIndex:it,newDraggableIndex:at,hideGhostForTarget:Lt,unhideGhostForTarget:Nt,cloneNowHidden:function(){nt=!0},cloneNowShown:function(){nt=!1},dispatchSortableEvent:function(e){Ke({sortable:t,name:e,originalEvent:o})}},i))};function Ke(e){Ze(oe({putSortable:lt,cloneEl:tt,targetEl:Ve,rootEl:Qe,oldIndex:ot,oldDraggableIndex:rt,newIndex:it,newDraggableIndex:at},e))}var Ve,qe,Je,Qe,$e,et,tt,nt,ot,it,rt,at,st,lt,ct,ut,dt,ht,vt,pt,mt,gt,ft,_t,bt,yt=!1,wt=!1,St=[],Ct=!1,Tt=!1,Dt=[],Mt=!1,Et=[],It="undefined"!==typeof document,kt=ve,Pt=ue||ce?"cssFloat":"float",At=It&&!pe&&!ve&&"draggable"in document.createElement("div"),xt=function(){if(It){if(ce)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents}}(),Rt=function(e,t){var n=Te(e),o=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),i=Pe(e,0,t),r=Pe(e,1,t),a=i&&Te(i),s=r&&Te(r),l=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+Ie(i).width,c=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+Ie(r).width;if("flex"===n.display)return"column"===n.flexDirection||"column-reverse"===n.flexDirection?"vertical":"horizontal";if("grid"===n.display)return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(i&&a.float&&"none"!==a.float){var u="left"===a.float?"left":"right";return!r||"both"!==s.clear&&s.clear!==u?"horizontal":"vertical"}return i&&("block"===a.display||"flex"===a.display||"table"===a.display||"grid"===a.display||l>=o&&"none"===n[Pt]||r&&"none"===n[Pt]&&l+c>o)?"vertical":"horizontal"},Ot=function(e){function t(e,n){return function(o,i,r,a){var s=o.options.group.name&&i.options.group.name&&o.options.group.name===i.options.group.name;if(null==e&&(n||s))return!0;if(null==e||!1===e)return!1;if(n&&"clone"===e)return e;if("function"===typeof e)return t(e(o,i,r,a),n)(o,i,r,a);var l=(n?o:i).options.group.name;return!0===e||"string"===typeof e&&e===l||e.join&&e.indexOf(l)>-1}}var n={},o=e.group;o&&"object"==ie(o)||(o={name:o}),n.name=o.name,n.checkPull=t(o.pull,!0),n.checkPut=t(o.put),n.revertClone=o.revertClone,e.group=n},Lt=function(){!xt&&Je&&Te(Je,"display","none")},Nt=function(){!xt&&Je&&Te(Je,"display","")};It&&!pe&&document.addEventListener("click",(function(e){if(wt)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),wt=!1,!1}),!0);var Bt=function(e){if(Ve){var t=function(e,t){var n;return St.some((function(o){var i=o[ze].options.emptyInsertThreshold;if(i&&!Ae(o)){var r=Ie(o),a=e>=r.left-i&&e<=r.right+i,s=t>=r.top-i&&t<=r.bottom+i;return a&&s?n=o:void 0}})),n}((e=e.touches?e.touches[0]:e).clientX,e.clientY);if(t){var n={};for(var o in e)e.hasOwnProperty(o)&&(n[o]=e[o]);n.target=n.rootEl=t,n.preventDefault=void 0,n.stopPropagation=void 0,t[ze]._onDragOver(n)}}},Ft=function(e){Ve&&Ve.parentNode[ze]._isOutsideThisEl(e.target)};function Ht(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=ae({},t),e[ze]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Rt(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==Ht.supportPointer&&"PointerEvent"in window&&!he,emptyInsertThreshold:5};for(var o in We.initializePlugins(this,e,n),n)!(o in t)&&(t[o]=n[o]);for(var i in Ot(t),this)"_"===i.charAt(0)&&"function"===typeof this[i]&&(this[i]=this[i].bind(this));this.nativeDraggable=!t.forceFallback&&At,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?ge(e,"pointerdown",this._onTapStart):(ge(e,"mousedown",this._onTapStart),ge(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(ge(e,"dragover",this),ge(e,"dragenter",this)),St.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),ae(this,Ye())}function zt(e,t,n,o,i,r,a,s){var l,c,u=e[ze],d=u.options.onMove;return!window.CustomEvent||ce||ue?(l=document.createEvent("Event")).initEvent("move",!0,!0):l=new CustomEvent("move",{bubbles:!0,cancelable:!0}),l.to=t,l.from=e,l.dragged=n,l.draggedRect=o,l.related=i||t,l.relatedRect=r||Ie(t),l.willInsertAfter=s,l.originalEvent=a,e.dispatchEvent(l),d&&(c=d.call(u,l,a)),c}function Yt(e){e.draggable=!1}function Ut(){Mt=!1}function Xt(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,o=0;n--;)o+=t.charCodeAt(n);return o.toString(36)}function Wt(e){return setTimeout(e,0)}function Zt(e){return clearTimeout(e)}Ht.prototype={constructor:Ht,_isOutsideThisEl:function(e){this.el.contains(e)||e===this.el||(gt=null)},_getDirection:function(e,t){return"function"===typeof this.options.direction?this.options.direction.call(this,e,t,Ve):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,n=this.el,o=this.options,i=o.preventOnFilter,r=e.type,a=e.touches&&e.touches[0]||e.pointerType&&"touch"===e.pointerType&&e,s=(a||e).target,l=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||s,c=o.filter;if(function(e){Et.length=0;var t=e.getElementsByTagName("input"),n=t.length;for(;n--;){var o=t[n];o.checked&&Et.push(o)}}(n),!Ve&&!(/mousedown|pointerdown/.test(r)&&0!==e.button||o.disabled)&&!l.isContentEditable&&(this.nativeDraggable||!he||!s||"SELECT"!==s.tagName.toUpperCase())&&(!(s=ye(s,o.draggable,n,!1))||!s.animated)&&et!==s){if(ot=xe(s),rt=xe(s,o.draggable),"function"===typeof c){if(c.call(this,e,s,this))return Ke({sortable:t,rootEl:l,name:"filter",targetEl:s,toEl:n,fromEl:n}),Ge("filter",t,{evt:e}),void(i&&e.cancelable&&e.preventDefault())}else if(c&&(c=c.split(",").some((function(o){if(o=ye(l,o.trim(),n,!1))return Ke({sortable:t,rootEl:o,name:"filter",targetEl:s,fromEl:n,toEl:n}),Ge("filter",t,{evt:e}),!0}))))return void(i&&e.cancelable&&e.preventDefault());o.handle&&!ye(l,o.handle,n,!1)||this._prepareDragStart(e,a,s)}}},_prepareDragStart:function(e,t,n){var o,i=this,r=i.el,a=i.options,s=r.ownerDocument;if(n&&!Ve&&n.parentNode===r){var l=Ie(n);if(Qe=r,qe=(Ve=n).parentNode,$e=Ve.nextSibling,et=n,st=a.group,Ht.dragged=Ve,ct={target:Ve,clientX:(t||e).clientX,clientY:(t||e).clientY},vt=ct.clientX-l.left,pt=ct.clientY-l.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,Ve.style["will-change"]="all",o=function(){Ge("delayEnded",i,{evt:e}),Ht.eventCanceled?i._onDrop():(i._disableDelayedDragEvents(),!de&&i.nativeDraggable&&(Ve.draggable=!0),i._triggerDragStart(e,t),Ke({sortable:i,name:"choose",originalEvent:e}),Ce(Ve,a.chosenClass,!0))},a.ignore.split(",").forEach((function(e){Me(Ve,e.trim(),Yt)})),ge(s,"dragover",Bt),ge(s,"mousemove",Bt),ge(s,"touchmove",Bt),ge(s,"mouseup",i._onDrop),ge(s,"touchend",i._onDrop),ge(s,"touchcancel",i._onDrop),de&&this.nativeDraggable&&(this.options.touchStartThreshold=4,Ve.draggable=!0),Ge("delayStart",this,{evt:e}),!a.delay||a.delayOnTouchOnly&&!t||this.nativeDraggable&&(ue||ce))o();else{if(Ht.eventCanceled)return void this._onDrop();ge(s,"mouseup",i._disableDelayedDrag),ge(s,"touchend",i._disableDelayedDrag),ge(s,"touchcancel",i._disableDelayedDrag),ge(s,"mousemove",i._delayedDragTouchMoveHandler),ge(s,"touchmove",i._delayedDragTouchMoveHandler),a.supportPointer&&ge(s,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(o,a.delay)}}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){Ve&&Yt(Ve),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;fe(e,"mouseup",this._disableDelayedDrag),fe(e,"touchend",this._disableDelayedDrag),fe(e,"touchcancel",this._disableDelayedDrag),fe(e,"mousemove",this._delayedDragTouchMoveHandler),fe(e,"touchmove",this._delayedDragTouchMoveHandler),fe(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||"touch"==e.pointerType&&e,!this.nativeDraggable||t?this.options.supportPointer?ge(document,"pointermove",this._onTouchMove):ge(document,t?"touchmove":"mousemove",this._onTouchMove):(ge(Ve,"dragend",this),ge(Qe,"dragstart",this._onDragStart));try{document.selection?Wt((function(){document.selection.empty()})):window.getSelection().removeAllRanges()}catch(n){}},_dragStarted:function(e,t){if(yt=!1,Qe&&Ve){Ge("dragStarted",this,{evt:t}),this.nativeDraggable&&ge(document,"dragover",Ft);var n=this.options;!e&&Ce(Ve,n.dragClass,!1),Ce(Ve,n.ghostClass,!0),Ht.active=this,e&&this._appendGhost(),Ke({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(ut){this._lastX=ut.clientX,this._lastY=ut.clientY,Lt();for(var e=document.elementFromPoint(ut.clientX,ut.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(ut.clientX,ut.clientY))!==t;)t=e;if(Ve.parentNode[ze]._isOutsideThisEl(e),t)do{if(t[ze]){if(t[ze]._onDragOver({clientX:ut.clientX,clientY:ut.clientY,target:e,rootEl:t})&&!this.options.dragoverBubble)break}e=t}while(t=t.parentNode);Nt()}},_onTouchMove:function(e){if(ct){var t=this.options,n=t.fallbackTolerance,o=t.fallbackOffset,i=e.touches?e.touches[0]:e,r=Je&&De(Je,!0),a=Je&&r&&r.a,s=Je&&r&&r.d,l=kt&&bt&&Re(bt),c=(i.clientX-ct.clientX+o.x)/(a||1)+(l?l[0]-Dt[0]:0)/(a||1),u=(i.clientY-ct.clientY+o.y)/(s||1)+(l?l[1]-Dt[1]:0)/(s||1);if(!Ht.active&&!yt){if(n&&Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}if(Je){r?(r.e+=c-(dt||0),r.f+=u-(ht||0)):r={a:1,b:0,c:0,d:1,e:c,f:u};var d="matrix(".concat(r.a,",").concat(r.b,",").concat(r.c,",").concat(r.d,",").concat(r.e,",").concat(r.f,")");Te(Je,"webkitTransform",d),Te(Je,"mozTransform",d),Te(Je,"msTransform",d),Te(Je,"transform",d),dt=c,ht=u,ut=i}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!Je){var e=this.options.fallbackOnBody?document.body:Qe,t=Ie(Ve,!0,kt,!0,e),n=this.options;if(kt){for(bt=e;"static"===Te(bt,"position")&&"none"===Te(bt,"transform")&&bt!==document;)bt=bt.parentNode;bt!==document.body&&bt!==document.documentElement?(bt===document&&(bt=Ee()),t.top+=bt.scrollTop,t.left+=bt.scrollLeft):bt=Ee(),Dt=Re(bt)}Ce(Je=Ve.cloneNode(!0),n.ghostClass,!1),Ce(Je,n.fallbackClass,!0),Ce(Je,n.dragClass,!0),Te(Je,"transition",""),Te(Je,"transform",""),Te(Je,"box-sizing","border-box"),Te(Je,"margin",0),Te(Je,"top",t.top),Te(Je,"left",t.left),Te(Je,"width",t.width),Te(Je,"height",t.height),Te(Je,"opacity","0.8"),Te(Je,"position",kt?"absolute":"fixed"),Te(Je,"zIndex","100000"),Te(Je,"pointerEvents","none"),Ht.ghost=Je,e.appendChild(Je),Te(Je,"transform-origin",vt/parseInt(Je.style.width)*100+"% "+pt/parseInt(Je.style.height)*100+"%")}},_onDragStart:function(e,t){var n=this,o=e.dataTransfer,i=n.options;Ge("dragStart",this,{evt:e}),Ht.eventCanceled?this._onDrop():(Ge("setupClone",this),Ht.eventCanceled||((tt=Fe(Ve)).removeAttribute("id"),tt.draggable=!1,tt.style["will-change"]="",this._hideClone(),Ce(tt,this.options.chosenClass,!1),Ht.clone=tt),n.cloneId=Wt((function(){Ge("clone",n),Ht.eventCanceled||(n.options.removeCloneOnHide||Qe.insertBefore(tt,Ve),n._hideClone(),Ke({sortable:n,name:"clone"}))})),!t&&Ce(Ve,i.dragClass,!0),t?(wt=!0,n._loopId=setInterval(n._emulateDragOver,50)):(fe(document,"mouseup",n._onDrop),fe(document,"touchend",n._onDrop),fe(document,"touchcancel",n._onDrop),o&&(o.effectAllowed="move",i.setData&&i.setData.call(n,o,Ve)),ge(document,"drop",n),Te(Ve,"transform","translateZ(0)")),yt=!0,n._dragStartId=Wt(n._dragStarted.bind(n,t,e)),ge(document,"selectstart",n),mt=!0,he&&Te(document.body,"user-select","none"))},_onDragOver:function(e){var t,n,o,i,r=this.el,a=e.target,s=this.options,l=s.group,c=Ht.active,u=st===l,d=s.sort,h=lt||c,v=this,p=!1;if(!Mt){if(void 0!==e.preventDefault&&e.cancelable&&e.preventDefault(),a=ye(a,s.draggable,r,!0),k("dragOver"),Ht.eventCanceled)return p;if(Ve.contains(e.target)||a.animated&&a.animatingX&&a.animatingY||v._ignoreWhileAnimating===a)return A(!1);if(wt=!1,c&&!s.disabled&&(u?d||(o=qe!==Qe):lt===this||(this.lastPutMode=st.checkPull(this,c,Ve,e))&&l.checkPut(this,c,Ve,e))){if(i="vertical"===this._getDirection(e,a),t=Ie(Ve),k("dragOverValid"),Ht.eventCanceled)return p;if(o)return qe=Qe,P(),this._hideClone(),k("revert"),Ht.eventCanceled||($e?Qe.insertBefore(Ve,$e):Qe.appendChild(Ve)),A(!0);var m=Ae(r,s.draggable);if(!m||function(e,t,n){var o=Ie(Ae(n.el,n.options.draggable)),i=He(n.el,n.options,Je),r=10;return t?e.clientX>i.right+r||e.clientY>o.bottom&&e.clientX>o.left:e.clientY>i.bottom+r||e.clientX>o.right&&e.clientY>o.top}(e,i,this)&&!m.animated){if(m===Ve)return A(!1);if(m&&r===e.target&&(a=m),a&&(n=Ie(a)),!1!==zt(Qe,r,Ve,t,a,n,e,!!a))return P(),m&&m.nextSibling?r.insertBefore(Ve,m.nextSibling):r.appendChild(Ve),qe=r,x(),A(!0)}else if(m&&function(e,t,n){var o=Ie(Pe(n.el,0,n.options,!0)),i=He(n.el,n.options,Je),r=10;return t?e.clientX<i.left-r||e.clientY<o.top&&e.clientX<o.right:e.clientY<i.top-r||e.clientY<o.bottom&&e.clientX<o.left}(e,i,this)){var g=Pe(r,0,s,!0);if(g===Ve)return A(!1);if(n=Ie(a=g),!1!==zt(Qe,r,Ve,t,a,n,e,!1))return P(),r.insertBefore(Ve,g),qe=r,x(),A(!0)}else if(a.parentNode===r){n=Ie(a);var f,_,b,y=Ve.parentNode!==r,w=!function(e,t,n){var o=n?e.left:e.top,i=n?e.right:e.bottom,r=n?e.width:e.height,a=n?t.left:t.top,s=n?t.right:t.bottom,l=n?t.width:t.height;return o===a||i===s||o+r/2===a+l/2}(Ve.animated&&Ve.toRect||t,a.animated&&a.toRect||n,i),S=i?"top":"left",C=ke(a,"top","top")||ke(Ve,"top","top"),T=C?C.scrollTop:void 0;if(gt!==a&&(_=n[S],Ct=!1,Tt=!w&&s.invertSwap||y),f=function(e,t,n,o,i,r,a,s){var l=o?e.clientY:e.clientX,c=o?n.height:n.width,u=o?n.top:n.left,d=o?n.bottom:n.right,h=!1;if(!a)if(s&&_t<c*i){if(!Ct&&(1===ft?l>u+c*r/2:l<d-c*r/2)&&(Ct=!0),Ct)h=!0;else if(1===ft?l<u+_t:l>d-_t)return-ft}else if(l>u+c*(1-i)/2&&l<d-c*(1-i)/2)return function(e){return xe(Ve)<xe(e)?1:-1}(t);if((h=h||a)&&(l<u+c*r/2||l>d-c*r/2))return l>u+c/2?1:-1;return 0}(e,a,n,i,w?1:s.swapThreshold,null==s.invertedSwapThreshold?s.swapThreshold:s.invertedSwapThreshold,Tt,gt===a),0!==f){var D=xe(Ve);do{D-=f,b=qe.children[D]}while(b&&("none"===Te(b,"display")||b===Je))}if(0===f||b===a)return A(!1);gt=a,ft=f;var M=a.nextElementSibling,E=!1,I=zt(Qe,r,Ve,t,a,n,e,E=1===f);if(!1!==I)return 1!==I&&-1!==I||(E=1===I),Mt=!0,setTimeout(Ut,30),P(),E&&!M?r.appendChild(Ve):a.parentNode.insertBefore(Ve,E?M:a),C&&Be(C,0,T-C.scrollTop),qe=Ve.parentNode,void 0===_||Tt||(_t=Math.abs(_-Ie(a)[S])),x(),A(!0)}if(r.contains(Ve))return A(!1)}return!1}function k(s,l){Ge(s,v,oe({evt:e,isOwner:u,axis:i?"vertical":"horizontal",revert:o,dragRect:t,targetRect:n,canSort:d,fromSortable:h,target:a,completed:A,onMove:function(n,o){return zt(Qe,r,Ve,t,n,Ie(n),e,o)},changed:x},l))}function P(){k("dragOverAnimationCapture"),v.captureAnimationState(),v!==h&&h.captureAnimationState()}function A(t){return k("dragOverCompleted",{insertion:t}),t&&(u?c._hideClone():c._showClone(v),v!==h&&(Ce(Ve,lt?lt.options.ghostClass:c.options.ghostClass,!1),Ce(Ve,s.ghostClass,!0)),lt!==v&&v!==Ht.active?lt=v:v===Ht.active&&lt&&(lt=null),h===v&&(v._ignoreWhileAnimating=a),v.animateAll((function(){k("dragOverAnimationComplete"),v._ignoreWhileAnimating=null})),v!==h&&(h.animateAll(),h._ignoreWhileAnimating=null)),(a===Ve&&!Ve.animated||a===r&&!a.animated)&&(gt=null),s.dragoverBubble||e.rootEl||a===document||(Ve.parentNode[ze]._isOutsideThisEl(e.target),!t&&Bt(e)),!s.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),p=!0}function x(){it=xe(Ve),at=xe(Ve,s.draggable),Ke({sortable:v,name:"change",toEl:r,newIndex:it,newDraggableIndex:at,originalEvent:e})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){fe(document,"mousemove",this._onTouchMove),fe(document,"touchmove",this._onTouchMove),fe(document,"pointermove",this._onTouchMove),fe(document,"dragover",Bt),fe(document,"mousemove",Bt),fe(document,"touchmove",Bt)},_offUpEvents:function(){var e=this.el.ownerDocument;fe(e,"mouseup",this._onDrop),fe(e,"touchend",this._onDrop),fe(e,"pointerup",this._onDrop),fe(e,"touchcancel",this._onDrop),fe(document,"selectstart",this)},_onDrop:function(e){var t=this.el,n=this.options;it=xe(Ve),at=xe(Ve,n.draggable),Ge("drop",this,{evt:e}),qe=Ve&&Ve.parentNode,it=xe(Ve),at=xe(Ve,n.draggable),Ht.eventCanceled||(yt=!1,Tt=!1,Ct=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Zt(this.cloneId),Zt(this._dragStartId),this.nativeDraggable&&(fe(document,"drop",this),fe(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),he&&Te(document.body,"user-select",""),Te(Ve,"transform",""),e&&(mt&&(e.cancelable&&e.preventDefault(),!n.dropBubble&&e.stopPropagation()),Je&&Je.parentNode&&Je.parentNode.removeChild(Je),(Qe===qe||lt&&"clone"!==lt.lastPutMode)&&tt&&tt.parentNode&&tt.parentNode.removeChild(tt),Ve&&(this.nativeDraggable&&fe(Ve,"dragend",this),Yt(Ve),Ve.style["will-change"]="",mt&&!yt&&Ce(Ve,lt?lt.options.ghostClass:this.options.ghostClass,!1),Ce(Ve,this.options.chosenClass,!1),Ke({sortable:this,name:"unchoose",toEl:qe,newIndex:null,newDraggableIndex:null,originalEvent:e}),Qe!==qe?(it>=0&&(Ke({rootEl:qe,name:"add",toEl:qe,fromEl:Qe,originalEvent:e}),Ke({sortable:this,name:"remove",toEl:qe,originalEvent:e}),Ke({rootEl:qe,name:"sort",toEl:qe,fromEl:Qe,originalEvent:e}),Ke({sortable:this,name:"sort",toEl:qe,originalEvent:e})),lt&&lt.save()):it!==ot&&it>=0&&(Ke({sortable:this,name:"update",toEl:qe,originalEvent:e}),Ke({sortable:this,name:"sort",toEl:qe,originalEvent:e})),Ht.active&&(null!=it&&-1!==it||(it=ot,at=rt),Ke({sortable:this,name:"end",toEl:qe,originalEvent:e}),this.save())))),this._nulling()},_nulling:function(){Ge("nulling",this),Qe=Ve=qe=Je=$e=tt=et=nt=ct=ut=mt=it=at=ot=rt=gt=ft=lt=st=Ht.dragged=Ht.ghost=Ht.clone=Ht.active=null,Et.forEach((function(e){e.checked=!0})),Et.length=dt=ht=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":Ve&&(this._onDragOver(e),function(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move");e.cancelable&&e.preventDefault()}(e));break;case"selectstart":e.preventDefault()}},toArray:function(){for(var e,t=[],n=this.el.children,o=0,i=n.length,r=this.options;o<i;o++)ye(e=n[o],r.draggable,this.el,!1)&&t.push(e.getAttribute(r.dataIdAttr)||Xt(e));return t},sort:function(e,t){var n={},o=this.el;this.toArray().forEach((function(e,t){var i=o.children[t];ye(i,this.options.draggable,o,!1)&&(n[e]=i)}),this),t&&this.captureAnimationState(),e.forEach((function(e){n[e]&&(o.removeChild(n[e]),o.appendChild(n[e]))})),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return ye(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var n=this.options;if(void 0===t)return n[e];var o=We.modifyOption(this,e,t);n[e]="undefined"!==typeof o?o:t,"group"===e&&Ot(n)},destroy:function(){Ge("destroy",this);var e=this.el;e[ze]=null,fe(e,"mousedown",this._onTapStart),fe(e,"touchstart",this._onTapStart),fe(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(fe(e,"dragover",this),fe(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),(function(e){e.removeAttribute("draggable")})),this._onDrop(),this._disableDelayedDragEvents(),St.splice(St.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!nt){if(Ge("hideClone",this),Ht.eventCanceled)return;Te(tt,"display","none"),this.options.removeCloneOnHide&&tt.parentNode&&tt.parentNode.removeChild(tt),nt=!0}},_showClone:function(e){if("clone"===e.lastPutMode){if(nt){if(Ge("showClone",this),Ht.eventCanceled)return;Ve.parentNode!=Qe||this.options.group.revertClone?$e?Qe.insertBefore(tt,$e):Qe.appendChild(tt):Qe.insertBefore(tt,Ve),this.options.group.revertClone&&this.animate(Ve,tt),Te(tt,"display",""),nt=!1}}else this._hideClone()}},It&&ge(document,"touchmove",(function(e){(Ht.active||yt)&&e.cancelable&&e.preventDefault()})),Ht.utils={on:ge,off:fe,css:Te,find:Me,is:function(e,t){return!!ye(e,t,e,!1)},extend:function(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},throttle:Ne,closest:ye,toggleClass:Ce,clone:Fe,index:xe,nextTick:Wt,cancelNextTick:Zt,detectDirection:Rt,getChild:Pe},Ht.get=function(e){return e[ze]},Ht.mount=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t[0].constructor===Array&&(t=t[0]),t.forEach((function(e){if(!e.prototype||!e.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(e));e.utils&&(Ht.utils=oe(oe({},Ht.utils),e.utils)),We.mount(e)}))},Ht.create=function(e,t){return new Ht(e,t)},Ht.version="1.15.2";var jt,Gt,Kt,Vt,qt,Jt,Qt=[],$t=!1;function en(){Qt.forEach((function(e){clearInterval(e.pid)})),Qt=[]}function tn(){clearInterval(Jt)}var nn=Ne((function(e,t,n,o){if(t.scroll){var i,r=(e.touches?e.touches[0]:e).clientX,a=(e.touches?e.touches[0]:e).clientY,s=t.scrollSensitivity,l=t.scrollSpeed,c=Ee(),u=!1;Gt!==n&&(Gt=n,en(),jt=t.scroll,i=t.scrollFn,!0===jt&&(jt=Oe(n,!0)));var d=0,h=jt;do{var v=h,p=Ie(v),m=p.top,g=p.bottom,f=p.left,_=p.right,b=p.width,y=p.height,w=void 0,S=void 0,C=v.scrollWidth,T=v.scrollHeight,D=Te(v),M=v.scrollLeft,E=v.scrollTop;v===c?(w=b<C&&("auto"===D.overflowX||"scroll"===D.overflowX||"visible"===D.overflowX),S=y<T&&("auto"===D.overflowY||"scroll"===D.overflowY||"visible"===D.overflowY)):(w=b<C&&("auto"===D.overflowX||"scroll"===D.overflowX),S=y<T&&("auto"===D.overflowY||"scroll"===D.overflowY));var I=w&&(Math.abs(_-r)<=s&&M+b<C)-(Math.abs(f-r)<=s&&!!M),k=S&&(Math.abs(g-a)<=s&&E+y<T)-(Math.abs(m-a)<=s&&!!E);if(!Qt[d])for(var P=0;P<=d;P++)Qt[P]||(Qt[P]={});Qt[d].vx==I&&Qt[d].vy==k&&Qt[d].el===v||(Qt[d].el=v,Qt[d].vx=I,Qt[d].vy=k,clearInterval(Qt[d].pid),0==I&&0==k||(u=!0,Qt[d].pid=setInterval(function(){o&&0===this.layer&&Ht.active._onTouchMove(qt);var t=Qt[this.layer].vy?Qt[this.layer].vy*l:0,n=Qt[this.layer].vx?Qt[this.layer].vx*l:0;"function"===typeof i&&"continue"!==i.call(Ht.dragged.parentNode[ze],n,t,e,qt,Qt[this.layer].el)||Be(Qt[this.layer].el,n,t)}.bind({layer:d}),24))),d++}while(t.bubbleScroll&&h!==c&&(h=Oe(h,!1)));$t=u}}),30),on=function(e){var t=e.originalEvent,n=e.putSortable,o=e.dragEl,i=e.activeSortable,r=e.dispatchSortableEvent,a=e.hideGhostForTarget,s=e.unhideGhostForTarget;if(t){var l=n||i;a();var c=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,u=document.elementFromPoint(c.clientX,c.clientY);s(),l&&!l.el.contains(u)&&(r("spill"),this.onSpill({dragEl:o,putSortable:n}))}};function rn(){}function an(){}rn.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,n=e.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var o=Pe(this.sortable.el,this.startIndex,this.options);o?this.sortable.el.insertBefore(t,o):this.sortable.el.appendChild(t),this.sortable.animateAll(),n&&n.animateAll()},drop:on},ae(rn,{pluginName:"revertOnSpill"}),an.prototype={onSpill:function(e){var t=e.dragEl,n=e.putSortable||this.sortable;n.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),n.animateAll()},drop:on},ae(an,{pluginName:"removeOnSpill"});Ht.mount(new function(){function e(){for(var e in this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===e.charAt(0)&&"function"===typeof this[e]&&(this[e]=this[e].bind(this))}return e.prototype={dragStarted:function(e){var t=e.originalEvent;this.sortable.nativeDraggable?ge(document,"dragover",this._handleAutoScroll):this.options.supportPointer?ge(document,"pointermove",this._handleFallbackAutoScroll):t.touches?ge(document,"touchmove",this._handleFallbackAutoScroll):ge(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var t=e.originalEvent;this.options.dragOverBubble||t.rootEl||this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?fe(document,"dragover",this._handleAutoScroll):(fe(document,"pointermove",this._handleFallbackAutoScroll),fe(document,"touchmove",this._handleFallbackAutoScroll),fe(document,"mousemove",this._handleFallbackAutoScroll)),tn(),en(),clearTimeout(we),we=void 0},nulling:function(){qt=Gt=jt=$t=Jt=Kt=Vt=null,Qt.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,t){var n=this,o=(e.touches?e.touches[0]:e).clientX,i=(e.touches?e.touches[0]:e).clientY,r=document.elementFromPoint(o,i);if(qt=e,t||this.options.forceAutoScrollFallback||ue||ce||he){nn(e,this.options,r,t);var a=Oe(r,!0);!$t||Jt&&o===Kt&&i===Vt||(Jt&&tn(),Jt=setInterval((function(){var r=Oe(document.elementFromPoint(o,i),!0);r!==a&&(a=r,en()),nn(e,n.options,r,t)}),10),Kt=o,Vt=i)}else{if(!this.options.bubbleScroll||Oe(r,!0)===Ee())return void en();nn(e,this.options,Oe(r,!1),!1)}}},ae(e,{pluginName:"scroll",initializeByDefault:!0})}),Ht.mount(an,rn);const sn=Ht,ln={departureTime:!0,layerDetails:!0,printButton:!1,saveAsButton:!0,saveButton:!0,stops:!0,traveMode:!0};function cn(e){var t;return!(null===(t=e.composedPath)||void 0===t||!t.call(e).find((e=>{var t;return null===(t=e.classList)||void 0===t?void 0:t.contains("esri-search__suggestions-list")})))}function un(e){const t=new Date(e);return new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate())}const dn="search-term";let hn=class extends g.Z{constructor(e,t){super(e,t),this._activeStop=null,this._activeManeuver=null,this._autoStopRemovalDelay=100,this._autoStopRemovalTimeoutId=void 0,this._focusedManeuver=null,this._newPlaceholderStop=null,this._pointerDownUpHandle=null,this._pointerPressedSearchSuggestionStop=null,this._renderSavePopoverFunction=null,this._saveAsButtonNode=null,this._saveLayer=new q,this._sections=null,this._sortable=null,this._stopsToSearches=new Map,this._viewClickHandle=null,this.headingLevel=2,this.messages=null,this.messagesCommon=null,this.messagesUnits=null,this.searchProperties=null,this.viewModel=new X,this.visibleElements={...ln},this._setUpDragAndDropStops=e=>{this._sortable=sn.create(e,{draggable:".".concat(_.validStopRow),ghostClass:_.stopRowGhost,handle:".".concat(_.stopHandle),onEnd:this._handleStopInputDragEnd})},this._handleDragHandlePointerDown=()=>{var e;return null===(e=this.viewModel.layer)||void 0===e?void 0:e.stops.forEach((e=>this.acquireSearch(e).activeMenu="none"))},this._handleStopInputDragEnd=e=>{let{oldIndex:t,newIndex:n,target:o}=e;if(t===n||null==n||null==t)return;const{children:i}=o,r=i[n],a=i[t],s=n-t<0;o.insertBefore(r,s?a.nextElementSibling:a);const{stops:l}=this.viewModel.layer;l.reorder(l.at(t),n);for(const c of l)c.sequence=null;this._solveRoute()}}initialize(){this.addHandles([(0,s.watch)((()=>{var e;return null===(e=this.viewModel.layer)||void 0===e?void 0:e.routeInfo}),(()=>{this._activeManeuver=null,this._focusedManeuver=null,this._sections=this._getSections(),this.scheduleRender()}),s.initial),(0,s.when)((()=>{var e;return[this.view,null===(e=this.view)||void 0===e?void 0:e.surface]}),((e,t)=>{let[n,o]=e;const r=null===t||void 0===t?void 0:t[0];if(r&&(this._viewClickHandle=null,r&&this.removeHandles(r)),n&&o){const e=this._prepPointerDownUpClick(),t=this._prepViewClick();e.pause(),t.pause(),this.addHandles([(0,i.on)(o,"mousedown",(()=>this._autoStopRemovalDelay=500)),(0,i.on)(o,"mouseup",(()=>this._autoStopRemovalDelay=100)),e,t],n),this._pointerDownUpHandle=e,this._viewClickHandle=t}}),s.initial),(0,s.when)((()=>null==this.viewModel.serviceDescription),(()=>{try{this.viewModel.load()}catch{}}),s.initial),(0,s.watch)((()=>this._saveLayer.state),(()=>{this.scheduleRender()}))]),this.when((()=>{this.destroyed||this.visibleElements.saveAsButton&&(this._renderSavePopoverFunction=this._renderSavePopover.bind(this),this._projector.append(document.body,this._renderSavePopoverFunction))}))}loadDependencies(){return(0,Z.h)({button:()=>Promise.all([n.e(92358),n.e(46895),n.e(54438),n.e(14105),n.e(32275)]).then(n.bind(n,32275)),icon:()=>Promise.all([n.e(92358),n.e(87474)]).then(n.bind(n,87474)),"input-date-picker":()=>Promise.all([n.e(92358),n.e(46895),n.e(54438),n.e(89219),n.e(63839),n.e(96506),n.e(11216)]).then(n.bind(n,11216)),"input-time-picker":()=>Promise.all([n.e(92358),n.e(46895),n.e(54438),n.e(89219),n.e(63839),n.e(65138),n.e(2654),n.e(96506),n.e(39094)]).then(n.bind(n,39094)),link:()=>Promise.all([n.e(92358),n.e(22184)]).then(n.bind(n,22184)),popover:()=>Promise.all([n.e(92358),n.e(46895),n.e(89219),n.e(63839),n.e(65138),n.e(2654),n.e(447)]).then(n.bind(n,61580))})}destroy(){var e;for(const t of this._stopsToSearches.values())t.destroy();null!==(e=this._sortable)&&void 0!==e&&e.destroy(),null!=this._renderSavePopoverFunction&&this._projector.detach(this._renderSavePopoverFunction)}get apiKey(){return this.viewModel.apiKey}set apiKey(e){this.viewModel.apiKey=e}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(e){this.viewModel.goToOverride=e}get icon(){return"right"}set icon(e){this._overrideIfSome("icon",e)}get label(){var e,t;return null!==(e=null===(t=this.messages)||void 0===t?void 0:t.widgetLabel)&&void 0!==e?e:""}set label(e){this._overrideIfSome("label",e)}get lastRoute(){return this.viewModel.lastRoute}get layer(){return this.viewModel.layer}set layer(e){this.viewModel.layer=e}get maxStops(){return this.viewModel.maxStops}set maxStops(e){this.viewModel.maxStops=e}get unit(){return this.defaultUnit}set unit(e){this._overrideIfSome("unit",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}castVisibleElements(e){return{...ln,...e}}acquireSearch(e){const{view:t}=this.viewModel;if(this._stopsToSearches.has(e)){const n=this._stopsToSearches.get(e);return n.view=t,this._overrideDefaultSources(n),n}const n=new m.default({view:t,resultGraphicEnabled:!1,popupEnabled:!1,...this.searchProperties});return this._normalizeSearchSources(n),this.addHandles([(0,s.on)((()=>n.allSources),"change",(()=>this._normalizeSearchSources(n))),n.on("select-result",(()=>{var t,o;e.geometry=null===(t=n.selectedResult)||void 0===t?void 0:t.feature.geometry,e.name=null===(o=n.selectedResult)||void 0===o?void 0:o.name,this._solveRoute()})),n.on("search-focus",(()=>this._handleStopInputFocus(n,e))),n.on("search-blur",(()=>this._handleStopInputBlur(n,e))),n.on("search-clear",(()=>{var t;e.geometry=null,e.name=null,this._activeStop=e,null===(t=this.viewModel.layer)||void 0===t||t.removeResult()})),(0,s.watch)((()=>n.searchTerm),(t=>{e.name=t}))],n),this._stopsToSearches.set(e,n),n}getDirections(){return this.viewModel.getDirections()}render(){return(0,G.u)("div",{class:this.classes(_.base,Q.z.widget,Q.z.panel,_.scroller)},this._renderPanelContent())}save(){return this.viewModel.save()}saveAs(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.viewModel.saveAs(e,t)}zoomToRoute(){return this.viewModel.zoomToRoute()}_renderPanelContent(){const{layer:e,serviceDescription:t,state:n}=this.viewModel,o="initializing"===n,i="error"===n&&!t,r="unauthenticated"===n,a={[_.panelContentLoading]:o,[_.panelContentError]:i||!e,[_.panelContentSignIn]:r},s=o?"presentation":"group",l=e?r?this._renderSignIn():i?this._renderMessage(this._getErrorMessage()):o?this._renderLoader():this._renderReadyContent():this._renderMessage(this.messages.missingLayer);return(0,G.u)("div",{class:this.classes(_.panelContent,a),role:s},l)}_renderReadyContent(){return[this._renderStopsContainer(),this._renderTravelModeOptions(),this._renderDepartureTimeControls(),this._renderSaveContainer(),this._renderSectionSplitter(),this._renderDirectionsContainer()]}_renderSignIn(){return(0,G.u)("div",{class:_.signInContent,key:"sign-in"},(0,G.u)($.X,{class:_.contentTitle,level:this.headingLevel},this.messages.widgetLabel),this._renderPlaceholder(),(0,G.u)($.X,{level:(0,$.M)(this.headingLevel)},this.messages.signInRequired),(0,G.u)("button",{bind:this,class:this.classes(Q.z.button,Q.z.buttonSecondary,_.signInButton),onclick:this._handleSignInClick,tabIndex:0,type:"button"},this.messagesCommon.auth.signIn))}_handleSignInClick(){this.viewModel.load().catch((()=>{}))}_renderTravelModeOptions(){if(!this.visibleElements.traveMode)return null;const{selectedTravelMode:e,travelModes:t}=this.viewModel;if(0===t.length)return null;const n=null!=e?e.name:this.messages.travelMode;return(0,G.u)("div",{"aria-disabled":this._saveLayer.opened.toString(),class:this.classes(_.travelMode,this._saveLayer.opened&&Q.z.buttonDisabled),key:"esri-directions__travel-mode-controls",role:"group"},(0,G.u)("select",{"aria-label":n,bind:this,class:this.classes(_.travelModeSelect,Q.z.select),key:"esri-directions__travel-mode-options",onchange:this._handleTravelModeChange,title:n},t.map(((t,n)=>(0,G.u)("option",{"data-mode":t,key:"esri-directions__travel-mode-".concat(n),selected:e===t,value:"".concat(n)},t.name)))))}_handleTravelModeChange(e){const t=e.currentTarget;this.viewModel.selectedTravelMode=function(e){return null===e||void 0===e?void 0:e["data-mode"]}(t.item(t.selectedIndex)),this._solveRoute()}_renderStopsContainer(){return this.visibleElements.stops?(0,G.u)("div",{"aria-disabled":this._saveLayer.opened.toString(),class:this.classes(_.section,this._saveLayer.opened&&Q.z.buttonDisabled),key:"esri-directions__stops-container",role:"group"},this._renderStops()):null}_renderDepartureTimeControls(){if(!this.visibleElements.departureTime)return null;const{messages:{departAt:e,departureTime:t,leaveNow:n,timeUnspecified:o},viewModel:{departureOption:i}}=this;return(0,G.u)("div",{"aria-disabled":this._saveLayer.opened.toString(),class:this.classes(_.departureTime,this._saveLayer.opened&&Q.z.buttonDisabled),key:"esri-directions__departure-time-controls",role:"group"},(0,G.u)("select",{"aria-label":t,bind:this,class:this.classes(_.departureTimeSelect,Q.z.select),onchange:this._handleDepartureOptionChange,title:t},(0,G.u)("option",{selected:i===R.NOW,value:R.NOW},n),(0,G.u)("option",{selected:i===R.DEPART_AT,value:R.DEPART_AT},e),(0,G.u)("option",{selected:i===R.UNSPECIFIED,value:R.UNSPECIFIED},o)),i===R.DEPART_AT?this._renderTimeControls():null)}_renderStops(){const{stops:e}=this.viewModel.layer;let t=0;for(const i of this._stopsToSearches.keys())e.includes(i)||this._disposeSearch(i);for(const i of e){const e=this.acquireSearch(i);"none"!==e.activeMenu&&(t+=1),null!=i.name&&(e.searchTerm=i.name)}const n=e.toArray().map(((n,o)=>{const i=e.length,r=o>1&&null==n.geometry,a={[ee.W.radioUnchecked]:o>=0&&o<i-1,[ee.W.radioChecked]:o===i-1},s={[_.lastStopIconContainer]:o===i-1},l={[_.validStopRow]:!r},c=e.at(o+1),u=o===i-1,d=o===i-2,h=2===i&&0===o||i>2&&!u&&!d||i>2&&d&&null!=(null===c||void 0===c?void 0:c.geometry)||i>2&&u&&null==n.geometry,v=i<3,p=this.acquireSearch(n),{messages:m}=this,{removeStop:g,reverseStops:f,unlocated:b}=m,y=null!=n.geometry&&null!=n.name?n.name:b,w=(0,A.uf)(o+1),S="".concat(m.stopLabel," ").concat(w," (").concat(y,")"),C="".concat(this.id,"__stop--").concat(o),T=!!p.searchTerm&&!!p.selectedResult&&null!=n.geometry&&p.selectedResult.name===n.name,D={zIndex:"none"!==p.activeMenu?""+t--:""};return(0,G.u)("li",{afterCreate:this._handleStopFieldCreation,"aria-label":S,bind:this,class:this.classes(_.stopRow,l),"data-stop-index":o,id:C,key:o,styles:D},(0,G.u)("div",{class:_.stopHandle},(0,G.u)("span",{"aria-hidden":"true",class:this.classes(_.stopIcon,ee.W.handleVertical,_.stopHandleIcon,_.interactiveStopIcon),onpointerdown:this._handleDragHandlePointerDown}),(0,G.u)("div",{"aria-labelledby":C,bind:this,class:this.classes(_.stopIconContainer,s),"data-stop-index":o,onclick:this._handleStopIconClick,onkeydown:this._handleStopIconClick,role:"button"},(0,G.u)("span",{class:this.classes(_.stopIcon,a),tabIndex:T?0:void 0}))),(0,G.u)("div",{class:_.stopInput},p.render()),(0,G.u)("div",{class:_.stopOptions,role:"group"},(0,G.u)("div",{"aria-label":g,bind:this,class:_.removeStopButton,"data-stop-index":o,hidden:v,onclick:this._handleRemoveStop,onkeydown:this._handleRemoveStop,role:"button",tabIndex:0,title:g},(0,G.u)("span",{"aria-hidden":"true",class:this.classes(_.stopIcon,_.removeStop,ee.W.trash,_.interactiveStopIcon)}),(0,G.u)("span",{class:ee.W.fontFallbackText},"removeStopTitle")),(0,G.u)("div",{"aria-label":f,bind:this,class:_.reverseStops,hidden:h,onclick:this._handleReverseStops,onkeydown:this._handleReverseStops,role:"button",tabIndex:0,title:f},(0,G.u)("span",{"aria-hidden":"true",class:this.classes(_.stopIcon,ee.W.upDownArrows,_.interactiveStopIcon)}),(0,G.u)("span",{class:ee.W.fontFallbackText},"removeStopTitle"))))})),o=this._renderAddStop();return(0,G.u)("div",null,(0,G.u)("ol",{afterCreate:this._setUpDragAndDropStops,class:_.stops,role:"group"},n),o)}_renderAddStop(){var e;const t=null===(e=this.viewModel.layer)||void 0===e?void 0:e.stops;if(!t)return null;const n=t.filter((e=>{let{geometry:t}=e;return null!=t})),o=t.at(-1);return n.length>1&&n.length<this.maxStops&&null!=(null===o||void 0===o?void 0:o.geometry)?(0,G.u)("div",{class:_.toolbarSection},(0,G.u)("div",{class:_.toolbarButtons},(0,G.u)("calcite-button",{appearance:"outline",class:_.addStopButton,iconStart:"plus",key:_.addStopButton,kind:"neutral",label:this.messages.addStop,onclick:()=>{this._addNewPlaceholder()},round:!0,scale:"s",width:"full"},this.messages.addStop))):null}_handleStopIconClick(e){var t;const n=pn(e.currentTarget),o=null!=n?null===(t=this.viewModel.layer)||void 0===t?void 0:t.stops.at(n):void 0;(null===o||void 0===o?void 0:o.geometry)&&this._centerAtStop(o)}_handleClearRouteClick(){this.viewModel.reset()}_centerAtStop(e){this.viewModel.centerAt(e)}_handleStopFieldCreation(e){var t;const n=this._newPlaceholderStop;if(!n)return;const o=pn(e),i=null!=o?null===(t=this.viewModel.layer)||void 0===t?void 0:t.stops.at(o):void 0;if(n===i){const e=this.acquireSearch(i);e.when((()=>{this.renderNow(),e.focus()}))}this._newPlaceholderStop=null}_handleStopInputBlur(e,t){var n,o,i,r,a,s,l,c;if(this._saveLayer.opened)return;if(this.removeHandles(dn),e.selectedResult&&null!=t.geometry&&null!=(null===(n=e.selectedResult)||void 0===n?void 0:n.feature.geometry)&&t.geometry===(null===(o=e.selectedResult)||void 0===o?void 0:o.feature.geometry))return void(null===(i=this._pointerDownUpHandle)||void 0===i||i.pause());const u=null==t.geometry&&null==(null===(r=e.selectedResult)||void 0===r?void 0:r.feature.geometry),d=null!=t.geometry&&null!=(null===(a=e.selectedResult)||void 0===a?void 0:a.feature.geometry)&&t.geometry!==(null===(s=e.selectedResult)||void 0===s?void 0:s.feature.geometry);if((u||d)&&"none"===e.activeMenu&&e.searchTerm)return e.search(),void(null===(l=this._pointerDownUpHandle)||void 0===l||l.pause());e.searchTerm||(null!==(c=this._viewClickHandle)&&void 0!==c&&c.resume(),clearTimeout(this._autoStopRemovalTimeoutId),this._autoStopRemovalTimeoutId=setTimeout((()=>{var n,o;this.destroyed||(null!==(n=this._viewClickHandle)&&void 0!==n&&n.pause(),"searching"!==e.viewModel.state?this._pointerPressedSearchSuggestionStop||(null!=t.geometry&&(t.geometry=null,this._solveRoute()),this.scheduleRender()):null===(o=this._pointerDownUpHandle)||void 0===o||o.pause())}),this._autoStopRemovalDelay))}_handleStopInputFocus(e,t){var n;null===(n=this._pointerDownUpHandle)||void 0===n||n.resume();const{view:o}=this;if(this.hasHandles(dn)||!o)return;const i=o.cursor;this.addHandles([(0,r.kB)((()=>{o.cursor=i})),(0,s.watch)((()=>e.searchTerm),(t=>{e.destroyed||(o.cursor=t.length?i:"copy")}),s.initial)],dn),this._activeStop=t}_prepViewClick(){const{view:e}=this.viewModel;(0,a.O3)(e),(0,a.O3)(e.surface);const t=(0,i.Wy)(e,"click",this._handleViewClick.bind(this)),n=(0,i.Wy)(e.surface,"click",(()=>{clearTimeout(this._autoStopRemovalTimeoutId),n.pause()}));return{remove(){n.remove(),t.remove()},pause(){n.pause(),t.pause()},resume(){n.resume(),t.resume()}}}_prepPointerDownUpClick(){const e=(0,i.Wy)(document,"pointerdown",(e=>{this._pointerPressedSearchSuggestionStop=cn(e)?this._activeStop:null})),t=(0,i.Wy)(document,"pointerup",(e=>{var t;null===(t=this._pointerDownUpHandle)||void 0===t||t.pause();const n=cn(e),o=this._activeStop;n||o!==this._pointerPressedSearchSuggestionStop||this._removeStop(o),this.scheduleRender(),this._pointerPressedSearchSuggestionStop=n?o:null}));return{remove(){t.remove(),e.remove()},pause(){t.pause(),e.pause()},resume(){e.resume()}}}_handleViewClick(e){var t;e.stopPropagation();const n=this._activeStop,o=n?this._stopsToSearches.get(n):null;n&&o&&!o.searchTerm&&(o.search(e.mapPoint).then((e=>{const t=null===e||void 0===e?void 0:e.results[0].results;if(!t)return;const{feature:i,name:r}=t[0];n.geometry=i.geometry,n.name=r,o.searchTerm=r})),this.scheduleRender()),null!==(t=this._viewClickHandle)&&void 0!==t&&t.pause(),clearTimeout(this._autoStopRemovalTimeoutId)}_addNewPlaceholder(){var e,t;if(null!==(e=this._pointerDownUpHandle)&&void 0!==e&&e.pause(),this._newPlaceholderStop)return;const n=new v.Z({symbol:new p.default});null!==(t=this.viewModel.layer)&&void 0!==t&&t.stops.add(n),this._newPlaceholderStop=n}_handleReverseStops(){this._reverseStops()}_reverseStops(){var e,t;const n=null!==(e=null===(t=this.viewModel.layer)||void 0===t?void 0:t.stops)&&void 0!==e?e:[];n.reverse();for(const o of n)o.sequence=null;this._solveRoute()}_handleRemoveStop(e){const{layer:t}=this.viewModel;if(!t)return;const n=pn(e.currentTarget);if(null==n)return;const{stops:o,routeInfo:i}=t,r=o.at(n);this._removeStop(r),null==r.geometry&&null!=i||this._solveRoute()}_removeStop(e){const{stops:t}=this.viewModel.layer;!e||t.length<=2||(this._disposeSearch(e),t.remove(e))}_handleDepartureOptionChange(e){const t=e.currentTarget,n=t.item(t.selectedIndex);this.viewModel.departureOption=n.value,this._solveRoute()}_renderTimeControls(){return this.viewModel.departureIsoDate&&this.viewModel.departureIsoTime?(0,G.u)("div",{class:_.departureTimeControls,key:_.departureTimeControls,role:"group"},(0,G.u)("div",{class:_.departureDateTimePickers},(0,G.u)("calcite-input-date-picker",{valueAsDate:un(this.viewModel.departureIsoDate),onCalciteInputDatePickerChange:e=>{let{target:t}=e;this.viewModel.departureIsoDate=t.value,this._solveRoute()}}),(0,G.u)("calcite-input-time-picker",{value:this.viewModel.departureIsoTime,onCalciteInputTimePickerChange:e=>{let{target:t}=e;this.viewModel.departureIsoTime=t.value,this._solveRoute()}}))):null}_renderSectionSplitter(){return(0,G.u)("div",{class:_.sectionSplitter})}_renderSaveContainer(){const{saveButton:e,saveAsButton:t,printButton:n,layerDetails:o}=this.visibleElements;return e||t||n||o?(0,G.u)("div",{class:_.saveSection,key:_.saveSection},this._renderSaveButtons(),this._renderRouteLayerDetailsLink()):null}_renderSaveButtons(){const{saveButton:e,saveAsButton:t,printButton:n}=this.visibleElements;return e||t||n?(0,G.u)("div",{class:_.saveButtons,key:_.saveButtons},this._renderSaveButton(),this._renderSaveAsButton(),this._renderPrintButton()):null}_renderSaveButton(){if(!this.visibleElements.saveButton)return null;const{portalItem:e,routeInfo:t}=this.viewModel.layer,n=null===e||void 0===e?void 0:e.itemControl,o=null!=t&&("admin"===n||"update"===n);return(0,G.u)("calcite-button",{appearance:"outline",class:_.saveButton,disabled:!o,iconStart:"save",key:_.saveButton,label:this.messagesCommon.save,onclick:()=>{this._handleSaveButtonClick()},width:"full"},this.messagesCommon.save)}_renderSaveAsButton(){if(!this.visibleElements.saveAsButton)return null;const e=null==this.viewModel.layer.routeInfo;return(0,G.u)("div",{class:_.saveAsButtonPopover,key:_.saveAsButtonPopover},(0,G.u)("calcite-button",{afterCreate:e=>{this._saveAsButtonNode=e},appearance:"outline",class:_.saveAsButton,disabled:e,iconStart:"duplicate",key:_.saveAsButton,label:this.messagesCommon.saveAs,onclick:()=>this._handleSaveAsButtonClick(),width:"full"},this.messagesCommon.saveAs))}_renderSavePopover(){return(0,G.u)("calcite-popover",{class:_.savePopover,label:this._saveLayer.label,open:this._saveLayer.opened,overlayPositioning:"fixed",referenceElement:this._saveAsButtonNode,triggerDisabled:!0},this._saveLayer.render())}_handleSaveAsButtonClick(){this._saveLayer.opened?this._saveLayer.close():this._saveLayer.open(this.viewModel.layer)}_renderPrintButton(){return this.visibleElements.printButton?(0,G.u)("calcite-button",{appearance:"outline",class:_.printButton,iconStart:"print",key:_.printButton,label:this.messagesCommon.print}):null}_renderRouteLayerDetailsLink(){if(!this.visibleElements.layerDetails)return null;const{portalItem:e}=this.viewModel.layer;if(!e)return null;const{id:t,portal:{url:n}}=e,o="".concat(n,"/home/item.html?id=").concat(t);return(0,G.u)("calcite-link",{class:_.layerDetailsLink,href:o,key:_.layerDetailsLink,target:"_blank"},this.messages.viewLayerDetails)}_handleSaveButtonClick(){this.viewModel.layer.save()}_renderDirectionsContainer(){return(0,G.u)("div",{class:this.classes(_.directionsSection,_.section),key:"esri-directions__container"},this._renderDirectionsContainerContent())}_renderLoader(){return(0,G.u)("div",{class:_.loader,key:"loader"})}_renderWarningCard(){return(0,G.u)("div",{class:_.warningCard,role:"alert"},(0,G.u)("div",{class:_.warningHeader},(0,G.u)("span",{"aria-hidden":"true",class:ee.W.noticeTriangle}),(0,G.u)($.X,{class:_.warningHeading,level:this.headingLevel},this.messagesCommon.warning)),(0,G.u)("div",{class:_.warningMessage},this._getErrorMessage()))}_renderDirectionsContainerContent(){const{layer:e,state:t}=this.viewModel,n="routing"===t;return"error"===t?this._renderWarningCard():n?this._renderLoader():null!=e.directionLines?(0,G.u)("div",{"aria-disabled":this._saveLayer.opened.toString(),class:this.classes(_.summary,this._saveLayer.opened&&Q.z.buttonDisabled),key:_.summary,role:"group"},this._renderCosts(),this._renderRouteActions(),this._renderManeuverSections()):(0,G.u)("div",{class:Q.z.empty,key:"esri-directions__placeholder"},this._renderPlaceholder(),(0,G.u)($.X,{class:_.message,level:this.headingLevel},this.messages.directionsPlaceholder))}_renderPlaceholder(){return(0,G.u)("svg",{class:Q.z.emptyIllustration,viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg"},(0,G.u)("path",{d:"M192 36c-15.477 0-24 6.034-24 16.99v45.822l24 24 24-24v-45.82C216 42.033 207.477 36 192 36zm20 61.155l-20 20-20-20V52.99c0-8.62 6.73-12.99 20-12.99s20 4.37 20 12.99zM192 52a12 12 0 1 0 12 12 12.013 12.013 0 0 0-12-12zm0 20a8 8 0 1 1 8-8 8.008 8.008 0 0 1-8 8zM92 140.99C92 130.035 83.477 124 68 124s-24 6.034-24 16.99v45.822l24 24 24-24zm-4 44.165l-20 20-20-20V140.99c0-8.62 6.73-12.99 20-12.99s20 4.37 20 12.99zM68 140a12 12 0 1 0 12 12 12.013 12.013 0 0 0-12-12zm0 20a8 8 0 1 1 8-8 8.008 8.008 0 0 1-8 8zm84-44h16v4h-16zm-24 80h4v12h-12v-4h8zm0-28h4v16h-4zm0-52h12v4h-8v8h-4zm0 24h4v16h-4zm-36 64h16v4H92z",fill:"currentcolor"}))}_renderMessage(e){return(0,G.u)($.X,{class:_.messageHeading,level:this.headingLevel},e)}_renderRouteActions(){return(0,G.u)("div",{class:_.routeActions},(0,G.u)("button",{"aria-label":this.messages.clearRoute,bind:this,class:this.classes(_.clearRouteButton,Q.z.button,Q.z.buttonTertiary),onclick:this._handleClearRouteClick,tabIndex:0,type:"button"},this.messages.clearRoute))}_getSections(){const{layer:e}=this.viewModel;if(!e)return null;const{directionPoints:t,directionLines:n,stops:o}=e;if(null==t||null==n)return null;const i=[];let r=null;for(const a of t){const{objectId:e,stopId:t}=a;if(null!=t){const e=o.find((e=>{let{objectId:n}=e;return n===t})),n=0===i.length;null!=r&&r.stop===e||(r={stop:e,directions:[],open:n},i.push(r));continue}if(null==r)continue;const s=n.find((t=>{let{directionPointId:n}=t;return n===e}));null!=s&&r.directions.push({directionPoint:a,directionLine:s})}return i}_renderManeuverSections(){return null==this._sections?null:(0,G.u)("div",{class:_.maneuvers,role:"group"},this._sections.map(((e,t)=>{const{open:n}=e;let o;e.directions.length>0&&n&&(o=(0,G.u)("ol",{class:_.maneuverList},e.directions.map((e=>this._renderManeuver(e)))));const i=this._sections.length>2,r=t===this._sections.length-1,a={[_.collapsibleSection]:i},s={[ee.W.down]:!n,[ee.W.up]:n};let l;if(i&&!r){const t=n?this.messagesCommon.close:this.messagesCommon.open;l=(0,G.u)("header",{class:this.classes(_.maneuverSectionHeader,_.maneuverSectionToggle),key:_.maneuverSectionHeader},(0,G.u)("div",{"aria-expanded":n.toString(),"aria-label":t,bind:this,class:_.maneuverSectionHeaderButton,"data-maneuver-section":e,onclick:this._handleSectionToggle,onkeydown:this._handleSectionToggle,role:"button",tabIndex:0,title:t},(0,G.u)($.X,{class:_.maneuverSectionTitle,level:this.headingLevel},e.stop.name),(0,G.u)("span",{"aria-hidden":"true",class:this.classes(s)})))}else l=(0,G.u)("header",{class:_.maneuverSectionHeader,key:_.maneuverSectionHeader},(0,G.u)($.X,{class:_.maneuverSectionTitle,level:this.headingLevel},e.stop.name));return(0,G.u)("section",{class:this.classes(_.maneuverSection,a),key:t},l,o)})))}_handleSectionToggle(e){const t=function(e){return null===e||void 0===e?void 0:e["data-maneuver-section"]}(e.currentTarget);t&&(t.open=!t.open)}_renderCosts(){const e=this._getCostSummary(),{directionPoints:t}=this.viewModel.layer;if(null==t||null==e)return null;const{distance:n,duration:o}=e,{primaryCosts:i,secondaryCosts:r,zoomToRoute:a}=this.messages,s=this._renderEta();return(0,G.u)("div",{"aria-label":a,bind:this,class:_.directionCosts,onclick:this._handleSummaryInteraction,onkeydown:this._handleSummaryInteraction,role:"button",tabIndex:0,title:a},(0,G.u)("div",{class:_.costsDetails,role:"group"},(0,G.u)("div",{class:_.primaryCosts,title:i},o),(0,G.u)("div",{class:_.verticalSplitter}),(0,G.u)("div",{class:_.secondaryCosts,title:r},n)),s)}_renderEta(){return this.viewModel.departureOption===R.UNSPECIFIED?null:(0,G.u)("div",{class:_.arrivalTimeContainer,title:this.messages.eta},(0,G.u)("span",{class:_.arrivalTime},this.viewModel.formattedEta))}_handleSummaryInteraction(){this._activeManeuver=null,this._focusedManeuver=null,this.viewModel.clearHighlights(),this.zoomToRoute()}_getErrorMessage(){var e;switch(null===(e=this.viewModel.lastError)||void 0===e?void 0:e.name){case"directions-view-model:unable-to-route":return this.messages.errors.unableToRoute;case"directions-view-model:service-metadata-unavailable":return this.messages.errors.unableToLoadServiceMetadata;default:return this.messages.errors.unknownError}}_normalizeSearchSources(e){this._overrideDefaultSources(e),this._applyLocatorSourceOverrides(e)}_overrideDefaultSources(e){e.viewModel.defaultSources.forEach((e=>{e.autoNavigate=!1}))}_applyLocatorSourceOverrides(e){let{allSources:t}=e;for(const o of t){var n;"url"in o&&o.url&&(null!==(n=o.locationType)&&void 0!==n||(o.locationType="street"),(0,J.j9)(o.url)&&this.apiKey&&null==o.apiKey&&(o.apiKey=this.apiKey,o.url=J.uE))}}_disposeSearch(e){if(!e||!this._stopsToSearches.has(e))return;const t=this._stopsToSearches.get(e);this.removeHandles(t),t.destroy(),this._stopsToSearches.delete(e)}_renderManeuver(e){const{directionPoint:t,directionLine:n}=e,{distance:o,duration:i}=n,{messages:r,messagesUnits:a,unit:s}=this,c=L(a,null!==o&&void 0!==o?o:0,s),u=N(null!==i&&void 0!==i?i:0),d=c&&u?"".concat(c,"&nbsp;&middot;&nbsp;").concat(u):"".concat(c).concat(u),h=function(e){const{branchName:t,displayText:n,exitName:o,intersectingName:i,name:r,objectId:a,towardName:s}=e;if(null==n)return null;const c=[t,o,i,r,s].filter(Boolean).sort(((e,t)=>t.length-e.length)).map((e=>(0,l.Qs)(e)));if(!c.length)return n;const u=new RegExp(c.join("|"),"g"),d=n.matchAll(u);let h=0;const v=[];for(const{0:l,index:p}of d)v.push(n.slice(h,p),(0,G.u)("span",{class:_.maneuverPlaceName},l)),h=p+l.length;return v.push(n.slice(h)),(0,G.u)("span",{id:"".concat(_.maneuver,"-").concat(a)},v)}(t),{objectId:v,directionPointType:p}=t,m=B(p),g="".concat(_.maneuver,"-").concat(v),f="".concat(_.intermediateCost,"-").concat(v),b={[_.maneuverActive]:this._activeManeuver===n};return(0,G.u)("li",{"aria-labelledby":"".concat(g," ").concat(f),bind:this,class:this.classes(_.maneuver,b),"data-maneuver":n,key:n,onblur:this._handleManeuverBlur,onclick:this._handleManeuverClick,onfocus:this._handleManeuverFocus,onkeydown:this._handleManeuverClick,onmouseout:this._handleManeuverMouseOut,onmouseover:this._handleManeuverMouseOver,tabIndex:0},(0,G.u)("calcite-icon",{alt:"",class:_.maneuverIcon,icon:m}),(0,G.u)("div",{class:_.maneuverCostsContainer},h,(0,G.u)("div",{class:_.maneuverCosts},(0,G.u)("div",{class:_.horizontalSplitter}),(0,G.u)("div",{"aria-hidden":"true",class:_.intermediateCost,id:f,innerHTML:d,title:r.intermediateCosts}))))}_handleManeuverClick(e){const t=mn(e.currentTarget);if(!t)return;if(this._activeManeuver===t)return this._activeManeuver=null,void this.zoomToRoute();this._activeManeuver=t;const{geometry:n}=t;this.viewModel.centerAt(n),this.viewModel.highlight(t)}_handleManeuverMouseOver(e){if(this._activeManeuver||this._focusedManeuver)return;const t=mn(e.currentTarget);t&&this.viewModel.highlight(t)}_handleManeuverMouseOut(){this._activeManeuver||this._focusedManeuver||this.viewModel.clearHighlights()}_handleManeuverBlur(){this._activeManeuver||(this._focusedManeuver=null,this.viewModel.clearHighlights())}_handleManeuverFocus(e){if(this._activeManeuver)return;const t=mn(e.currentTarget);t&&(this._focusedManeuver=t,this.viewModel.highlight(t))}_getCostSummary(){var e,t;const{messagesUnits:n,unit:o,viewModel:i}=this,{routeInfo:r}=i.layer;if(null==r)return null;const a=null!==(e=r.totalDistance)&&void 0!==e?e:0,s=null!==(t=r.totalDuration)&&void 0!==t?t:0;return{distance:L(n,a,o),duration:N(s)}}async _solveRoute(){var e;this.viewModel.updateDepartureTime();const t=null===(e=this.viewModel.layer)||void 0===e?void 0:e.stops.filter((e=>{let{geometry:t}=e;return null!=t}));if(t&&!(t.length<2))try{await this.viewModel.getDirections()}catch{}}};(0,o._)([(0,c.Cb)()],hn.prototype,"apiKey",null),(0,o._)([(0,c.Cb)(h.Y)],hn.prototype,"defaultUnit",void 0),(0,o._)([(0,c.Cb)()],hn.prototype,"goToOverride",null),(0,o._)([(0,c.Cb)()],hn.prototype,"headingLevel",void 0),(0,o._)([(0,c.Cb)()],hn.prototype,"icon",null),(0,o._)([(0,c.Cb)()],hn.prototype,"label",null),(0,o._)([(0,c.Cb)({readOnly:!0})],hn.prototype,"lastRoute",null),(0,o._)([(0,c.Cb)()],hn.prototype,"layer",null),(0,o._)([(0,c.Cb)()],hn.prototype,"maxStops",null),(0,o._)([(0,c.Cb)(),(0,j.H)("esri/widgets/Directions/t9n/Directions")],hn.prototype,"messages",void 0),(0,o._)([(0,c.Cb)(),(0,j.H)("esri/t9n/common")],hn.prototype,"messagesCommon",void 0),(0,o._)([(0,c.Cb)(),(0,j.H)("esri/core/t9n/Units")],hn.prototype,"messagesUnits",void 0),(0,o._)([(0,c.Cb)()],hn.prototype,"searchProperties",void 0),(0,o._)([(0,c.Cb)()],hn.prototype,"unit",null),(0,o._)([(0,c.Cb)()],hn.prototype,"view",null),(0,o._)([(0,c.Cb)({type:X})],hn.prototype,"viewModel",void 0),(0,o._)([(0,c.Cb)()],hn.prototype,"visibleElements",void 0),(0,o._)([(0,u.p)("visibleElements")],hn.prototype,"castVisibleElements",null),(0,o._)([(0,te.h)()],hn.prototype,"_handleStopIconClick",null),(0,o._)([(0,te.h)()],hn.prototype,"_handleClearRouteClick",null),(0,o._)([(0,te.h)()],hn.prototype,"_handleReverseStops",null),(0,o._)([(0,te.h)()],hn.prototype,"_handleRemoveStop",null),(0,o._)([(0,te.h)()],hn.prototype,"_handleSectionToggle",null),(0,o._)([(0,te.h)()],hn.prototype,"_handleSummaryInteraction",null),(0,o._)([(0,te.h)()],hn.prototype,"_handleManeuverClick",null),hn=(0,o._)([(0,d.j)("esri.widgets.Directions")],hn);const vn=hn;function pn(e){return null===e||void 0===e?void 0:e["data-stop-index"]}function mn(e){return null===e||void 0===e?void 0:e["data-maneuver"]}}}]);
//# sourceMappingURL=47196.7ef6cceb.chunk.js.map