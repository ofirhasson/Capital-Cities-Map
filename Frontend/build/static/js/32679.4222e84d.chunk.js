"use strict";(self.webpackChunknorthwind=self.webpackChunknorthwind||[]).push([[32679],{32679:(e,i,t)=>{t.r(i),t.d(i,{default:()=>J});var l=t(27366),a=(t(59166),t(98928)),n=t(92026),s=t(94172),r=t(49861),c=t(89125),o=(t(84936),t(93169),t(69912)),d=t(88350),u=t(33565);const m="esri-scale-range-slider",h="".concat(m,"__scale-menu"),S={base:m,segmentElementActive:"".concat(m,"__segment-active"),scaleIndicatorWrapper:"".concat(m,"__scale-indicator-wrapper"),scaleIndicator:"".concat(m,"__scale-indicator"),scaleIndicatorIcon:"".concat(m,"__scale-indicator-icon"),scaleIndicatorContainer:"".concat(m,"__scale-indicator-container"),scaleMenuContainer:"".concat(h,"-container"),scaleMenuSeparator:"".concat(h,"-separator"),scaleMenuToggle:"".concat(h,"-toggle"),scaleMenuSubLabel:"".concat(h,"-sublabel"),scalePreview:"".concat(m,"__scale-preview"),scalePreviewThumbnail:"".concat(m,"__scale-preview-thumbnail")};var v=t(65905),g=t(36257);const p=(0,g.Kd)().substr(0,2);var _;!function(e){e.ar="ar",e.bg="bg",e.cs="cs",e.da="da",e.de="de",e.el="el",e.en="en",e.es="es",e.et="et",e.fi="fi",e.fr="fr",e.is="is",e.it="it",e.ja="ja",e.ko="ko",e.lt="lt",e.lv="lv",e.nl="nl",e.nn="nn",e.pl="pl",e.pt="pt",e.ro="ro",e.ru="ru",e.sk="sk",e.sv="sv",e.th="th",e.zh="zh"}(_||(_={}));const M={ae:_.en,ar:_.es,at:_.de,au:_.en,be:_.nl,bg:_.bg,bo:_.es,br:_.pt,ca:_.en,ch:_.de,ci:_.fr,cl:_.es,cn:_.zh,co:_.es,cr:_.es,cz:_.cs,de:_.de,dk:_.da,ee:_.et,eg:_.en,es:_.es,fi:_.fi,fr:_.fr,gb:_.en,gl:_.da,gr:_.el,gt:_.es,hk:_.en,id:_.en,ie:_.en,il:_.en,in:_.en,iq:_.ar,is:_.is,it:_.it,jp:_.ja,ke:_.en,kr:_.ko,kw:_.ar,li:_.de,lt:_.lt,lu:_.en,lv:_.lv,ma:_.fr,mg:_.fr,ml:_.fr,mo:_.en,mx:_.es,my:_.en,ni:_.es,nl:_.nl,no:_.nn,nz:_.en,pe:_.es,pl:_.pl,pr:_.es,pt:_.pt,ro:_.ro,ru:_.ru,rw:_.en,se:_.sv,sg:_.en,sk:_.sk,sr:_.nl,sv:_.es,th:_.th,tn:_.fr,tw:_.zh,us:_.en,ve:_.es,vi:_.en,wo:_.en,za:_.en},b=new Set(["ar-iq","ar-kw","bg-bg","cs-cz","da-dk","da-gl","de-at","de-ch","de-de","de-li","el-gr","en-ae","en-au","en-ca","en-eg","en-gb","en-hk","en-id","en-ie","en-il","en-in","en-iq","en-ke","en-lu","en-mo","en-my","en-nz","en-rw","en-sg","en-us","en-vi","en-wo","en-za","es-ar","es-bo","es-cl","es-co","es-cr","es-es","es-gt","es-mx","es-ni","es-pe","es-pr","es-sv","es-ve","et-ee","fi-fi","fr-ci","fr-fr","fr-ma","fr-mg","fr-ml","fr-tn","is-is","it-it","ja-jp","ko-kr","lt-lt","lv-lv","nl-be","nl-nl","nl-sr","nn-no","pl-pl","pt-br","pt-pt","ro-ro","ru-ru","sk-sk","sv-se","th-th","zh-cn","zh-tw"]);function f(e){e=function(e){return e.toLowerCase()}(e);const i="".concat(p,"-").concat(e),t="".concat(M[e],"-").concat(e);return function(e){return"url(".concat((0,v.V)("esri/widgets/ScaleRangeSlider/images/scalePreview/".concat(e,".jpg")),")")}(b.has(i)?i:b.has(t)?t:"en-wo")}function y(e){if(!(e<0||e>=25))return"-".concat(e%5*128,"px -").concat(128*Math.floor(e/5),"px")}var w,x=t(7138);t(32718);const L=147914382,R=[{id:"room",minScale:100},{id:"rooms",minScale:400},{id:"smallBuilding",minScale:800},{id:"building",minScale:1999},{id:"buildings",minScale:3999},{id:"street",minScale:7499},{id:"streets",minScale:14999},{id:"neighborhood",minScale:29999},{id:"town",minScale:59999},{id:"city",minScale:119999},{id:"cities",minScale:249999},{id:"metropolitanArea",minScale:499999},{id:"county",minScale:999999},{id:"counties",minScale:1999999},{id:"stateProvince",minScale:3999999},{id:"statesProvinces",minScale:6999999},{id:"countriesSmall",minScale:14999999},{id:"countriesBig",minScale:34999999},{id:"continent",minScale:99999999},{id:"world",minScale:L}];function C(e,i){const t=R,l=t.length,a=[];let n,s=e;e=e>=0?e:0,i=i>0?i:t[l-1].minScale;for(let r=0;r<l;r++){const l=Math.min(t[r].minScale,i);n=Math.min(l,i),e<=l&&s<i&&a.push({id:t[r].id,maxScale:Math.max(s,e),minScale:n}),s=n+1}return a.reverse(),function(e){if(0===e.length)return e;const[i]=e,t=e[e.length-1];return i.minScale===i.maxScale&&(e.shift(),i.minScale+=1),t.minScale===t.maxScale&&(e.pop(),t.maxScale-=1),e}(a)}let T=w=class extends x.default{constructor(){super(...arguments),this.ranges=[]}static fromScaleRange(e){let{maxScale:i,minScale:t}=e;return new w({ranges:C(i,t)})}static async fromLayer(e){var i;await e.when();const t="tileInfo"in e?null===(i=e.tileInfo)||void 0===i?void 0:i.lods:void 0;let l;return l=t?C(t[t.length-1].scale,t[0].scale):C(0,0),new w({ranges:l})}get firstRange(){return this.ranges[0]}get lastRange(){const e=this.ranges;return e[e.length-1]}get length(){return this.ranges.length}get maxScale(){return this.lastRange.maxScale}get minScale(){return this.firstRange.minScale}isMinScaleEdge(e){const{firstRange:i}=this,t=i.minScale,l=w.RecommendedScales[i.id]||i.maxScale;return e<=t&&e>=l}isMaxScaleEdge(e){const{lastRange:i}=this,t=i.maxScale;return e<=(w.RecommendedScales[i.id]||i.minScale)&&e>=t}findScaleRange(e){const i=this.ranges;let t;if(e>=i[0].maxScale)return i[0];if(e<=i[i.length-1].minScale)return i[i.length-1];for(let l=0;l<i.length;l++){const a=i[l];if(e>=a.maxScale&&e<=a.minScale){t=a;break}}return t}findScaleRangeByIndex(e){return this.ranges[this._clampScaleRangeIndex(e)]}scaleToRangeIndex(e){return this.ranges.indexOf(this.findScaleRange(e))}clampScale(e){return Math.min(this.minScale,Math.max(this.maxScale,e))}clampMinScale(e){return 0===e?this.minScale:this.clampScale(e)}clampMaxScale(e){return this.clampScale(e)}contains(e){const i=this.ranges;let t=!1;for(let l=0;l<i.length;l++){const{maxScale:a,minScale:n}=i[l];if(e>=a&&e<=n){t=!0;break}}return t}_clampScaleRangeIndex(e){if(e<=0)return 0;const i=this.ranges.length-1;return e>i?i:Math.floor(e)}};T.RecommendedScales=Object.freeze({world:L,continent:5e7,countriesBig:25e6,countriesSmall:12e6,statesProvinces:6e6,stateProvince:3e6,counties:15e5,county:75e4,metropolitanArea:32e4,cities:16e4,city:8e4,town:4e4,neighborhood:2e4,streets:1e4,street:5e3,buildings:2500,building:1250,smallBuilding:800,rooms:400,room:100}),(0,l._)([(0,r.Cb)()],T.prototype,"firstRange",null),(0,l._)([(0,r.Cb)()],T.prototype,"lastRange",null),(0,l._)([(0,r.Cb)()],T.prototype,"length",null),(0,l._)([(0,r.Cb)()],T.prototype,"maxScale",null),(0,l._)([(0,r.Cb)()],T.prototype,"minScale",null),(0,l._)([(0,r.Cb)({constructOnly:!0})],T.prototype,"ranges",void 0),T=w=(0,l._)([(0,o.j)("esri.widgets.ScaleRangeSlider.ScaleRanges")],T);const I=T;var V=t(84908);let k=class extends x.default{constructor(e){super(e),this.layer=null,this.mode="range",this.scaleRanges=I.fromScaleRange({minScale:0,maxScale:0}),this.sliderViewModel=(()=>{const{max:e}=this._getSliderIndexRange(this.scaleRanges.length-1);return new V.Z({precision:10,min:0,max:e,values:[0,e]})})()}initialize(){this.addHandles([(0,s.watch)((()=>this.layer),(e=>null===e||void 0===e?void 0:e.load().catch((()=>{})))),(0,s.watch)((()=>this.mode),(e=>{var i,t;"range"===e&&1===(null===(i=this.sliderViewModel.values)||void 0===i?void 0:i.length)?this.sliderViewModel.values=[this.sliderViewModel.min,this.sliderViewModel.values[0]]:2===(null===(t=this.sliderViewModel.values)||void 0===t?void 0:t.length)&&("min-scale-only"===e?this.sliderViewModel.values=[this.sliderViewModel.values[0]]:"max-scale-only"===e&&(this.sliderViewModel.values=[this.sliderViewModel.values[1]]))})),(0,s.watch)((()=>{var e,i;return{loaded:null===(e=this.layer)||void 0===e?void 0:e.loaded,ready:null===(i=this.view)||void 0===i?void 0:i.ready}}),(e=>{let{loaded:i,ready:t}=e;if(!i||!t)return;if(this._hasTiledLayer()){const e=this._getLayerResampling()?void 0:this.mapScaleToSlider(this._getTiledLayerMaxScale()),i=this.mapScaleToSlider(this._getTiledLayerMinScale());this.sliderViewModel.effectiveMax=e,this.sliderViewModel.effectiveMin=i}else{const e=this.layer&&"maxScaleRange"in this.layer?this.layer.maxScaleRange:null,{minScale:i=0,maxScale:t=0}=null!==e&&void 0!==e?e:{};this.sliderViewModel.effectiveMax=0===t?void 0:this.mapScaleToSlider(t),this.sliderViewModel.effectiveMin=0===i?void 0:this.mapScaleToSlider(i)}const l=this.layer;l&&"minScale"in l&&"maxScale"in l?(this.minScale=l.minScale,this.maxScale=l.maxScale):(this.minScale=void 0,this.maxScale=void 0)}),s.initial)])}get effectiveMaxScale(){return 0===this.maxScale?this.maxScaleLimit:this.maxScale}get effectiveMinScale(){return 0===this.minScale?this.minScaleLimit:this.minScale}get effectiveMaxScaleLimit(){var e;return this.mapSliderToScale(null!==(e=this.sliderViewModel.effectiveMax)&&void 0!==e?e:this.sliderViewModel.max)}get effectiveMinScaleLimit(){var e;return this.mapSliderToScale(null!==(e=this.sliderViewModel.effectiveMin)&&void 0!==e?e:this.sliderViewModel.min)}get maxScale(){return this._getScale("max")}set maxScale(e){this._setMaxScaleOnSlider(e)}get maxScaleLimit(){return this.mapSliderToScale(this.sliderViewModel.max)}set maxScaleLimit(e){this._setSliderRange({maxScale:e,minScale:this.minScaleLimit})}get minScale(){return this._getScale("min")}set minScale(e){this._setMinScaleOnSlider(e)}get minScaleLimit(){return this.mapSliderToScale(this.sliderViewModel.min)}set minScaleLimit(e){this._setSliderRange({maxScale:this.maxScaleLimit,minScale:e})}get state(){const{view:e,layer:i}=this;return!e&&!i||!e&&null!==i&&void 0!==i&&i.loaded||!i&&null!==e&&void 0!==e&&e.ready||e&&e.ready&&null!==i&&void 0!==i&&i.loaded?"ready":"disabled"}set view(e){this._set("view",e)}mapScaleToSlider(e){const i=this.scaleRanges.scaleToRangeIndex(e),t=this.scaleRanges.findScaleRangeByIndex(i),{maxScale:l,minScale:a}=t,{max:n,min:s}=this._getSliderIndexRange(i);return this._mapToRange(e,a,l,s,n)}mapSliderToScale(e){const i=this.scaleRanges.findScaleRangeByIndex(e),{maxScale:t,minScale:l}=i,{max:a,min:n}=this._getSliderIndexRange(e);return this._mapToRange(e,n,a,l,t)}_setSliderRange(e){this.scaleRanges=I.fromScaleRange(e);const{max:i}=this._getSliderIndexRange(this.scaleRanges.length-1);this.sliderViewModel.max=i,this.sliderViewModel.min=0,this.notifyChange("maxScaleLimit"),this.notifyChange("minScaleLimit")}_getSliderIndexRange(e){const i=Math.floor(e);return{min:i,max:i+.99999}}_mapToRange(e,i,t,l,a){return l+(e-i)*(a-l)/(t-i)}_getSliderValue(e){const{min:i,max:t,values:l}=this.sliderViewModel,[a,n]=l;switch(this.mode){case"max-scale-only":return"min"===e?i:a;case"min-scale-only":return"min"===e?a:t;default:return"min"===e?null!==a&&void 0!==a?a:i:null!==n&&void 0!==n?n:t}}_getScale(e){const i=this.mapSliderToScale(this._getSliderValue(e));return this._normalizeScale(e,i)}_setMaxScaleOnSlider(e){const{scaleRanges:i,sliderViewModel:t}=this;if(void 0!==e){const l=this.mapScaleToSlider(this._constrainMaxScaleToLayer(i.clampMaxScale(e)));switch(this.mode){case"range":t.values=[t.values[0],l];break;case"max-scale-only":t.values=[l]}}}_setMinScaleOnSlider(e){const{scaleRanges:i,sliderViewModel:t}=this;if(void 0!==e){const l=this.mapScaleToSlider(this._constrainMinScaleToLayer(i.clampMinScale(e)));switch(this.mode){case"range":t.values=[l,t.values[1]];break;case"min-scale-only":t.values=[l]}}}_constrainMinScaleToLayer(e){const{scaleRanges:i}=this;if(this._hasTiledLayer()){const{firstRange:t}=i,l=this._getTiledLayerMinScale(),a=.85;e=this._mapToRange(e,t.maxScale,t.minScale,0,1)>a||e>l?l:e}return e}_constrainMaxScaleToLayer(e){if(this._hasTiledLayer()&&!this._getLayerResampling()){const i=this._getTiledLayerMaxScale();e=e<i?i:e}return e}_normalizeScale(e,i){const t="max"===e?"maxScale":"minScale",l=this._hasTiledLayer()?"min"===e?this._getTiledLayerMinScale():this._getTiledLayerMaxScale():this.scaleRanges[t],a=this._hasTiledLayer()?"min"===e?this._getTiledLayerRealMinScale():this._getTiledLayerRealMaxScale():l,n=0===i||a===i||Math.abs(a-i)<=1e-6;return Number((n?0:i).toFixed(6))}_getLayerLODS(){var e,i,t,l;return null!==(e=this.layer)&&void 0!==e&&e.loaded&&"tileInfo"in this.layer?"imagery-tile"===(null===(i=this.layer)||void 0===i?void 0:i.type)&&"Raster"===(null===(t=this.layer.raster)||void 0===t?void 0:t.tileType)?null:null===(l=this.layer.tileInfo)||void 0===l?void 0:l.lods:null}_getLayerResampling(){var e;return!(null===(e=this.layer)||void 0===e||!e.loaded)&&(!("resampling"in this.layer)||this.layer.resampling)}_getTiledLayerMinScale(){const e=this._getLayerLODS();return this.scaleRanges.clampMinScale(e[0].scale)}_getTiledLayerMaxScale(){const e=this._getLayerLODS();return e[e.length-1].scale}_getTiledLayerRealMinScale(){var e,i;const t=this._getLayerLODS(),l=this.layer,a=l&&"sourceJSON"in l&&null!==(e=null===(i=l.sourceJSON)||void 0===i||null===(i=i.tileInfo)||void 0===i?void 0:i.lods)&&void 0!==e?e:t;return this.scaleRanges.clampMinScale(a[0].scale)}_getTiledLayerRealMaxScale(){var e,i;const t=this._getLayerLODS(),l=this.layer,a=l&&"sourceJSON"in l&&null!==(e=null===(i=l.sourceJSON)||void 0===i||null===(i=i.tileInfo)||void 0===i?void 0:i.lods)&&void 0!==e?e:t;return a[a.length-1].scale}_hasTiledLayer(){return!!this._getLayerLODS()}};(0,l._)([(0,r.Cb)({readOnly:!0})],k.prototype,"effectiveMaxScale",null),(0,l._)([(0,r.Cb)({readOnly:!0})],k.prototype,"effectiveMinScale",null),(0,l._)([(0,r.Cb)()],k.prototype,"effectiveMaxScaleLimit",null),(0,l._)([(0,r.Cb)()],k.prototype,"effectiveMinScaleLimit",null),(0,l._)([(0,r.Cb)()],k.prototype,"layer",void 0),(0,l._)([(0,r.Cb)()],k.prototype,"maxScale",null),(0,l._)([(0,r.Cb)()],k.prototype,"maxScaleLimit",null),(0,l._)([(0,r.Cb)()],k.prototype,"mode",void 0),(0,l._)([(0,r.Cb)()],k.prototype,"minScale",null),(0,l._)([(0,r.Cb)()],k.prototype,"minScaleLimit",null),(0,l._)([(0,r.Cb)()],k.prototype,"scaleRanges",void 0),(0,l._)([(0,r.Cb)()],k.prototype,"sliderViewModel",void 0),(0,l._)([(0,r.Cb)({readOnly:!0})],k.prototype,"state",null),(0,l._)([(0,r.Cb)()],k.prototype,"view",null),k=(0,l._)([(0,o.j)("esri.widgets.ScaleRangeSlider.ScaleRangeSliderViewModel")],k);const P=k;var O=t(8905),E=t(7021),z=t(80975),N=t(80532),D=t(67005),A=t(6291),j=t(8704);const B={preview:!0,scaleMenus:{maxScaleMenu:!0,minScaleMenu:!0}},F={maximumFractionDigits:0};let H=class extends u.Z{constructor(e,i){super(e,i),this._activeMenu=null,this._activeThumb=null,this._customInput=null,this._maxThumbNode=null,this._minThumbNode=null,this._previewAutoCloseTimeoutId=void 0,this._previewPopover=null,this._slider=new d.default({thumbCreatedFunction:(e,i,t)=>{0===e?this._minThumbNode=t:1===e&&(this._maxThumbNode=t),this.addHandles([(0,a.on)(t,"mouseenter",(()=>{this._activeThumb=e,this.scheduleRender()})),(0,a.on)(t,"mouseleave",(()=>{this._previewAutoCloseTimeoutId||(this._activeThumb=null,this.scheduleRender())}))])}}),this.disabled=!1,this.messages=null,this.region="US",this.viewModel=new P,this.visibleElements=B,this._afterInputNumberCreate=e=>{"value"in e&&null!=e.value&&"setNumberValue"in e&&e.setNumberValue({committing:!1,value:e.value,origin:"direct"}),this._customInput=e},this._handleCustomScaleInputChange=(e,i)=>{const{viewModel:{scaleRanges:t}}=this,l=Number.parseFloat(i.value);Number.isNaN(l)?i.value=e:this._setScale(t.clampScale(l))}}loadDependencies(){return(0,O.h)({button:()=>Promise.all([t.e(92358),t.e(46895),t.e(54438),t.e(14105),t.e(32275)]).then(t.bind(t,32275)),dropdown:()=>Promise.all([t.e(92358),t.e(89219),t.e(43001)]).then(t.bind(t,43001)),"dropdown-group":()=>t.e(89992).then(t.bind(t,89992)),"dropdown-item":()=>Promise.all([t.e(92358),t.e(19784)]).then(t.bind(t,19784)),icon:()=>Promise.all([t.e(92358),t.e(87474)]).then(t.bind(t,87474)),"input-number":()=>Promise.all([t.e(92358),t.e(46895),t.e(54438),t.e(18135),t.e(77244)]).then(t.bind(t,90460)),label:()=>Promise.all([t.e(92358),t.e(35738)]).then(t.bind(t,35738)),popover:()=>Promise.all([t.e(92358),t.e(46895),t.e(89219),t.e(63839),t.e(65138),t.e(2654),t.e(447)]).then(t.bind(t,61580))})}initialize(){this.addHandles([(0,s.watch)((()=>this.viewModel),(e=>{var i;return this._slider.viewModel=null!==(i=null===e||void 0===e?void 0:e.sliderViewModel)&&void 0!==i?i:null}),s.initial),(0,s.watch)((()=>this._interactive),(e=>{this._slider.disabled=!e,e||this._setActiveMenu(null)}),s.initial),this._slider.on("thumb-drag",(e=>{let{index:i}=e;this._activeThumb=i,clearTimeout(this._previewAutoCloseTimeoutId);this._previewAutoCloseTimeoutId=setTimeout((()=>{this._previewAutoCloseTimeoutId=void 0,this._activeThumb=null}),250)})),(0,s.when)((()=>{var e;return!0===(null===(e=this.view)||void 0===e?void 0:e.stationary)}),(()=>this.scheduleRender()))])}destroy(){this._slider=(0,n.SC)(this._slider)}get _maxScaleMenuEnabled(){const{scaleMenus:e}=this.visibleElements;return!0===e||"boolean"!=typeof e&&e.maxScaleMenu}get _minScaleMenuEnabled(){const{scaleMenus:e}=this.visibleElements;return!0===e||"boolean"!=typeof e&&e.minScaleMenu}get _interactive(){var e;return"disabled"!==(null===(e=this.viewModel)||void 0===e?void 0:e.state)&&!this.disabled}get effectiveMaxScale(){return this.viewModel.effectiveMaxScale}get effectiveMinScale(){return this.viewModel.effectiveMinScale}get effectiveMaxScaleLimit(){return this.viewModel.effectiveMaxScaleLimit}get effectiveMinScaleLimit(){return this.viewModel.effectiveMinScaleLimit}get icon(){return"actual-size"}set icon(e){this._overrideIfSome("icon",e)}get label(){var e,i;return null!==(e=null===(i=this.messages)||void 0===i?void 0:i.widgetLabel)&&void 0!==e?e:""}set label(e){this._overrideIfSome("label",e)}get layer(){return this.viewModel.layer}set layer(e){this.viewModel.layer=e}get maxScale(){return this.viewModel.maxScale}set maxScale(e){this.viewModel.maxScale=e}get maxScaleLimit(){return this.viewModel.maxScaleLimit}set maxScaleLimit(e){this.viewModel.maxScaleLimit=e}get mode(){return this.viewModel.mode}set mode(e){this.viewModel.mode=e}get minScale(){return this.viewModel.minScale}set minScale(e){this.viewModel.minScale=e}get minScaleLimit(){return this.viewModel.minScaleLimit}set minScaleLimit(e){this.viewModel.minScaleLimit=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}castVisibleElements(e){return{...B,...e,scaleMenus:"boolean"==typeof(null===e||void 0===e?void 0:e.scaleMenus)?e.scaleMenus:{...B.scaleMenus,...null===e||void 0===e?void 0:e.scaleMenus}}}formatScale(e){return"".concat("1:").concat((0,A.uf)(e,F))}render(){const{_interactive:e,_slider:i,label:t,view:l,viewModel:{state:a}}=this,n=this._getLabel("min"),s=this._getLabel("max"),{segmentElements:r}=i,c=r.at("min-scale-only"===this.mode?-1:-2);return c&&c.classList.add(S.segmentElementActive),(0,D.u)("div",{"aria-label":t,class:this.classes(S.base,E.z.widget,e?null:E.z.disabled)},(0,D.u)("div",{class:S.scaleIndicatorWrapper,dir:"ltr"},"ready"===a&&l?this._renderCurrentScaleIndicator():null,i.render(),this._renderPreviewPopover()),(0,D.u)("div",{class:S.scaleMenuContainer},this._minScaleMenuEnabled&&n?this._renderScaleMenuToggle("min",n):null,(0,D.u)("div",{class:S.scaleMenuSeparator}),this._maxScaleMenuEnabled&&s?this._renderScaleMenuToggle("max",s):null))}_renderPreviewPopover(){const{_activeThumb:e}=this,i=null!=e&&this.visibleElements.preview,t=i?0===e?this._minThumbNode:this._maxThumbNode:"";return(0,D.u)("calcite-popover",{afterCreate:z.Yo,afterUpdate:()=>{var e;return null===(e=this._previewPopover)||void 0===e?void 0:e.reposition()},bind:this,"data-node-ref":"_previewPopover",label:this.messages.preview,offsetDistance:16,open:i,overlayPositioning:"fixed",placement:"top",referenceElement:t,triggerDisabled:!0},this._renderScalePreview())}_renderScalePreview(){const{_activeThumb:e,_slider:i,region:t,viewModel:{scaleRanges:l}}=this,a=0===e||"range"!==this.mode?i.values[0]:i.values[1],n=Object.keys(I.RecommendedScales).indexOf(l.findScaleRangeByIndex(a).id),s={backgroundImage:f(t),backgroundPosition:y(n)};return(0,D.u)("div",{class:S.scalePreview},(0,D.u)("div",{class:S.scalePreviewThumbnail,styles:s}))}_getLabel(e){const{_slider:i,messages:t,mode:l,viewModel:{scaleRanges:a}}=this,[n,s]=i.values,r="min"===e||"range"!==l?n:s,c=t.scaleRangeLabels[a.findScaleRangeByIndex(r).id];switch(l){case"range":return c;case"max-scale-only":return"min"===e?null:c;case"min-scale-only":return"min"===e?c:null}}_renderScaleMenuToggle(e,i){const{_activeMenu:t,_interactive:l}=this,a=t===e;return[(0,D.u)("calcite-dropdown",{closeOnSelectDisabled:!0,"data-type":e,open:a,overlayPositioning:"fixed",placement:"max"===e?"bottom-end":"bottom-start",scale:"s",onCalciteDropdownClose:i=>{let{target:t}=i;this._activeMenu===e&&this._setActiveMenu(null),t.setFocus()},onCalciteDropdownOpen:()=>this._setActiveMenu(e)},(0,D.u)("calcite-button",{appearance:a?"outline":"transparent","aria-pressed":a.toString(),class:S.scaleMenuToggle,disabled:!l,iconEnd:"chevron-down",scale:"s",slot:"trigger"},i),a&&"max"===e?this._renderMaxScaleMenu():null,a&&"min"===e?this._renderMinScaleMenu():null)]}_renderMinScaleMenu(){const{effectiveMaxScale:e,effectiveMinScaleLimit:i,view:t,viewModel:{scaleRanges:l}}=this,a=t?t.scale:void 0;return this._renderScaleMenu({type:"min",min:i,max:l.findScaleRange(e).minScale,viewScale:a})}_renderMaxScaleMenu(){const{effectiveMinScale:e,effectiveMaxScaleLimit:i,view:t,viewModel:{scaleRanges:l}}=this,a=t?t.scale:void 0;return this._renderScaleMenu({type:"max",min:l.findScaleRange(e).maxScale,max:i,viewScale:a})}_renderScaleMenu(e){let{viewScale:i,min:t,max:l,type:a}=e;const{effectiveMaxScale:n,effectiveMinScale:s,messages:r}=this,c="max"===a?n:s,o=I.fromScaleRange({minScale:t,maxScale:l}),d=this.messages.featuredScaleLabels,u=I.RecommendedScales,m=Object.keys(u).filter((e=>o.contains(u[e]))).map((e=>this._renderScaleMenuItem({scaleLabel:d[e],scaleValue:u[e],isSelected:c===u[e],valueVisible:"world"!==e})));return(0,D.u)("calcite-dropdown-group",{key:"".concat(this.id,"__scale-menu--").concat(a)},this._renderCustomScaleValue({currentScale:c}),null!=i?this._renderScaleMenuItem({scaleValue:i,scaleLabel:r.featuredScaleLabels.current,isSelected:c===i,valueVisible:!0}):null,m)}_renderCustomScaleValue(e){let{currentScale:i}=e;const{messages:t}=this,l=Math.round(i).toString();return(0,D.u)("calcite-dropdown-item",{afterCreate:e=>{e.setFocus()},key:"custom-scale",label:t.featuredScaleLabels.custom,onCalciteDropdownItemSelect:()=>{var e;null===(e=this._customInput)||void 0===e||e.setFocus()}},(0,D.u)("calcite-label",{scale:"s"},(0,D.u)("span",null,t.featuredScaleLabels.custom),(0,D.u)("calcite-input-number",{afterCreate:this._afterInputNumberCreate,groupSeparator:!0,inputMode:"numeric",max:I.RecommendedScales.world,min:0,numberButtonType:"none",placeholder:t.customScaleInputTooltip,prefixText:"1:",scale:"s",step:1,value:l,onCalciteInputNumberChange:e=>{let{target:i}=e;return this._handleCustomScaleInputChange(l,i)}})))}_renderScaleMenuItem(e){const{scaleValue:i,scaleLabel:t,valueVisible:l,isSelected:a}=e;return(0,D.u)("calcite-dropdown-item",{key:t,label:t,selected:a,onCalciteDropdownItemSelect:this._setScale.bind(this,i)},t,l?(0,D.u)("div",{class:S.scaleMenuSubLabel},this.formatScale(i)):void 0)}_renderCurrentScaleIndicator(){const{_slider:e,messages:i,view:t,viewModel:{scaleRanges:l}}=this,a=l.clampScale(t.scale),n=this.viewModel.mapScaleToSlider(a),s=n/e.max,r=i.scaleRangeLabels[l.findScaleRangeByIndex(n).id],c=(0,j.n)(i.currentScaleTooltip,{scaleLabel:r});return(0,D.u)("div",{class:S.scaleIndicatorContainer,key:"scale-indicator"},(0,D.u)("div",{"aria-label":c,class:S.scaleIndicator,styles:{left:100*s+"%"},title:c},this.renderCurrentScaleIndicatorIcon()))}renderCurrentScaleIndicatorIcon(){return(0,D.u)("calcite-icon",{class:S.scaleIndicatorIcon,icon:"caret-up",scale:"s"})}_setScale(e){"max"===this._activeMenu?this.maxScale=Math.min(e,this.effectiveMinScale-1):this.minScale=Math.max(e,this.effectiveMaxScale+1),this._setActiveMenu(null)}_setActiveMenu(e){this._activeMenu=e}};(0,l._)([(0,r.Cb)()],H.prototype,"_activeMenu",void 0),(0,l._)([(0,r.Cb)()],H.prototype,"_activeThumb",void 0),(0,l._)([(0,r.Cb)()],H.prototype,"_customInput",void 0),(0,l._)([(0,r.Cb)()],H.prototype,"_maxScaleMenuEnabled",null),(0,l._)([(0,r.Cb)()],H.prototype,"_minScaleMenuEnabled",null),(0,l._)([(0,r.Cb)()],H.prototype,"_slider",void 0),(0,l._)([(0,r.Cb)({readOnly:!0})],H.prototype,"_interactive",null),(0,l._)([(0,r.Cb)()],H.prototype,"disabled",void 0),(0,l._)([(0,r.Cb)()],H.prototype,"effectiveMaxScale",null),(0,l._)([(0,r.Cb)()],H.prototype,"effectiveMinScale",null),(0,l._)([(0,r.Cb)()],H.prototype,"effectiveMaxScaleLimit",null),(0,l._)([(0,r.Cb)()],H.prototype,"effectiveMinScaleLimit",null),(0,l._)([(0,r.Cb)()],H.prototype,"icon",null),(0,l._)([(0,r.Cb)()],H.prototype,"label",null),(0,l._)([(0,r.Cb)()],H.prototype,"layer",null),(0,l._)([(0,r.Cb)()],H.prototype,"maxScale",null),(0,l._)([(0,r.Cb)()],H.prototype,"maxScaleLimit",null),(0,l._)([(0,r.Cb)(),(0,N.H)("esri/widgets/ScaleRangeSlider/t9n/ScaleRangeSlider")],H.prototype,"messages",void 0),(0,l._)([(0,r.Cb)()],H.prototype,"mode",null),(0,l._)([(0,r.Cb)()],H.prototype,"minScale",null),(0,l._)([(0,r.Cb)()],H.prototype,"minScaleLimit",null),(0,l._)([(0,r.Cb)()],H.prototype,"region",void 0),(0,l._)([(0,r.Cb)()],H.prototype,"view",null),(0,l._)([(0,r.Cb)()],H.prototype,"viewModel",void 0),(0,l._)([(0,r.Cb)()],H.prototype,"visibleElements",void 0),(0,l._)([(0,c.p)("visibleElements")],H.prototype,"castVisibleElements",null),H=(0,l._)([(0,o.j)("esri.widgets.ScaleRangeSlider")],H);const J=H}}]);
//# sourceMappingURL=32679.4222e84d.chunk.js.map