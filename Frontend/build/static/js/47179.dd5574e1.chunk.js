"use strict";(self.webpackChunknorthwind=self.webpackChunknorthwind||[]).push([[47179],{68700:(e,t,n)=>{n.d(t,{Bh:()=>u,I6:()=>I,Jp:()=>d,Kx:()=>_,Su:()=>g,U_:()=>p,b0:()=>A,t8:()=>f,yY:()=>c});var o=n(21389),i=n(50894),s=n(12400),r=n(24204),l=n(32035),a=n(19093);function c(e,t,n){n*=.5;const o=Math.sin(n);return e[0]=o*t[0],e[1]=o*t[1],e[2]=o*t[2],e[3]=Math.cos(n),e}function u(e,t){const n=2*Math.acos(t[3]),o=Math.sin(n/2);return o>(0,r.bn)()?(e[0]=t[0]/o,e[1]=t[1]/o,e[2]=t[2]/o):(e[0]=1,e[1]=0,e[2]=0),n}function d(e,t,n){const o=t[0],i=t[1],s=t[2],r=t[3],l=n[0],a=n[1],c=n[2],u=n[3];return e[0]=o*u+r*l+i*c-s*a,e[1]=i*u+r*a+s*l-o*c,e[2]=s*u+r*c+o*a-i*l,e[3]=r*u-o*l-i*a-s*c,e}function h(e,t,n,o){const i=t[0],s=t[1],l=t[2],a=t[3];let c,u,d,h,p,_=n[0],v=n[1],g=n[2],y=n[3];return u=i*_+s*v+l*g+a*y,u<0&&(u=-u,_=-_,v=-v,g=-g,y=-y),1-u>(0,r.bn)()?(c=Math.acos(u),d=Math.sin(c),h=Math.sin((1-o)*c)/d,p=Math.sin(o*c)/d):(h=1-o,p=o),e[0]=h*i+p*_,e[1]=h*s+p*v,e[2]=h*l+p*g,e[3]=h*a+p*y,e}function p(e,t){const n=t[0],o=t[1],i=t[2],s=t[3],r=n*n+o*o+i*i+s*s,l=r?1/r:0;return e[0]=-n*l,e[1]=-o*l,e[2]=-i*l,e[3]=s*l,e}function _(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e}function v(e,t){const n=t[0]+t[4]+t[8];let o;if(n>0)o=Math.sqrt(n+1),e[3]=.5*o,o=.5/o,e[0]=(t[5]-t[7])*o,e[1]=(t[6]-t[2])*o,e[2]=(t[1]-t[3])*o;else{let n=0;t[4]>t[0]&&(n=1),t[8]>t[3*n+n]&&(n=2);const i=(n+1)%3,s=(n+2)%3;o=Math.sqrt(t[3*n+n]-t[3*i+i]-t[3*s+s]+1),e[n]=.5*o,o=.5/o,e[3]=(t[3*i+s]-t[3*s+i])*o,e[i]=(t[3*i+n]+t[3*n+i])*o,e[s]=(t[3*s+n]+t[3*n+s])*o}return e}function g(e,t,n,o){const i=.5*Math.PI/180;t*=i,n*=i,o*=i;const s=Math.sin(t),r=Math.cos(t),l=Math.sin(n),a=Math.cos(n),c=Math.sin(o),u=Math.cos(o);return e[0]=s*a*u-r*l*c,e[1]=r*l*u+s*a*c,e[2]=r*a*c-s*l*u,e[3]=r*a*u+s*l*c,e}const y=a.c,f=a.s,m=a.f,b=d,T=a.b,w=a.g,C=a.l,E=a.i,M=E,k=a.j,O=k,R=a.n,I=a.a,S=a.e;function A(e,t,n){const o=(0,l.m)(t,n);return o<-.999999?((0,l.b)(x,L,t),(0,l.H)(x)<1e-6&&(0,l.b)(x,N,t),(0,l.n)(x,x),c(e,x,Math.PI),e):o>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):((0,l.b)(x,t,n),e[0]=x[0],e[1]=x[1],e[2]=x[2],e[3]=1+o,R(e,e))}const x=(0,s.Ue)(),L=(0,s.al)(1,0,0),N=(0,s.al)(0,1,0);const U=(0,i.Ue)(),P=(0,i.Ue)();const D=(0,o.Ue)();Object.freeze(Object.defineProperty({__proto__:null,add:m,calculateW:function(e,t){const n=t[0],o=t[1],i=t[2];return e[0]=n,e[1]=o,e[2]=i,e[3]=Math.sqrt(Math.abs(1-n*n-o*o-i*i)),e},conjugate:_,copy:y,dot:w,equals:S,exactEquals:I,fromEuler:g,fromMat3:v,getAxisAngle:u,identity:function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e},invert:p,len:M,length:E,lerp:C,mul:b,multiply:d,normalize:R,random:function(e){const t=r.FD,n=t(),o=t(),i=t(),s=Math.sqrt(1-n),l=Math.sqrt(n);return e[0]=s*Math.sin(2*Math.PI*o),e[1]=s*Math.cos(2*Math.PI*o),e[2]=l*Math.sin(2*Math.PI*i),e[3]=l*Math.cos(2*Math.PI*i),e},rotateX:function(e,t,n){n*=.5;const o=t[0],i=t[1],s=t[2],r=t[3],l=Math.sin(n),a=Math.cos(n);return e[0]=o*a+r*l,e[1]=i*a+s*l,e[2]=s*a-i*l,e[3]=r*a-o*l,e},rotateY:function(e,t,n){n*=.5;const o=t[0],i=t[1],s=t[2],r=t[3],l=Math.sin(n),a=Math.cos(n);return e[0]=o*a-s*l,e[1]=i*a+r*l,e[2]=s*a+o*l,e[3]=r*a-i*l,e},rotateZ:function(e,t,n){n*=.5;const o=t[0],i=t[1],s=t[2],r=t[3],l=Math.sin(n),a=Math.cos(n);return e[0]=o*a+i*l,e[1]=i*a-o*l,e[2]=s*a+r*l,e[3]=r*a-s*l,e},rotationTo:A,scale:T,set:f,setAxes:function(e,t,n,o){const i=D;return i[0]=n[0],i[3]=n[1],i[6]=n[2],i[1]=o[0],i[4]=o[1],i[7]=o[2],i[2]=-t[0],i[5]=-t[1],i[8]=-t[2],R(e,v(e,i))},setAxisAngle:c,slerp:h,sqlerp:function(e,t,n,o,i,s){return h(U,t,i,s),h(P,n,o,s),h(e,U,P,2*s*(1-s)),e},sqrLen:O,squaredLength:k,str:function(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}},Symbol.toStringTag,{value:"Module"}))},47898:(e,t,n)=>{n.d(t,{Fp:()=>u,GJ:()=>l,M1:()=>i,MQ:()=>_,Ww:()=>v,bA:()=>d,hw:()=>h,mE:()=>c,ne:()=>r,nn:()=>a,qF:()=>g,yG:()=>s,yP:()=>p});var o=n(68860);function i(e){return{value:e}}function s(e,t){return{type:(0,o.UF)(t),value:e,unit:t}}function r(e,t){return{type:(0,o.UF)(t),value:e,unit:t}}function l(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"arithmetic";return{type:(0,o.UF)(t),value:e,unit:t,rotationType:n}}function a(e,t){const n=c(e,t);return"angle"===e.type?l(n,t,e.rotationType):function(e,t){return{type:(0,o.UF)(t),value:e,unit:t}}(n,t)}function c(e,t){return(0,o.En)(e.value,e.unit,t)}function u(e,t){return null==e?t:null==t||e.value>(0,o.En)(t.value,t.unit,e.unit)?e:t}function d(e,t){return null==e?null:{...e,value:e.value*t}}function h(e,t,n){if(t===n)return e;switch(n){case"arithmetic":case"geographic":return 90-e}}const p=s(0,"meters"),_=r(0,"square-meters"),v=(l(0,"radians"),l(0,"degrees")),g=l(0,"degrees","geographic")},42137:(e,t,n)=>{n.d(t,{Z:()=>g});var o,i=n(27366),s=n(68860),r=n(49861),l=(n(93169),n(32718),n(84936),n(69912)),a=n(83448),c=n(848),u=n(80885),d=n(78952),h=n(15559),p=n(81753),_=n(89093);let v=o=class extends u.Z{constructor(){super(...arguments),this.center=null,this.geodesic=!1,this.numberOfPoints=60,this.radius=1e3,this.radiusUnit="meters"}normalizeCtorArgs(e,t){let n;if(null!==e&&void 0!==e&&e.center)n=e;else{if(null!==e&&void 0!==e&&e.rings)return super.normalizeCtorArgs(e,t);n={center:e}}return{...super.normalizeCtorArgs(),...n,...t}}initialize(){var e;const t=this.center,n=this.numberOfPoints;if(this.hasZ=null!==(e=null===t||void 0===t?void 0:t.hasZ)&&void 0!==e&&e,0!==this.rings.length||!t)return;const o=(0,s.En)(this.radius,this.radiusUnit,"meters"),i=t.spatialReference;let r,l="geographic";if(i.isWebMercator?l="webMercator":(null!=(i.wkid&&_.Z[i.wkid])||(i.wkt2||i.wkt)&&(0,s.s_)(i.wkt2||i.wkt))&&(l="projected"),this.geodesic){let e;switch(l){case"webMercator":e=(0,p.Sx)(t);break;case"projected":console.error("Creating a geodesic circle requires the center to be specified in web mercator or geographic coordinate system");break;case"geographic":e=t}r=this._createGeodesicCircle(e,o,n),"webMercator"===l&&(r=(0,p.$)(r))}else{let e;"webMercator"===l||"projected"===l?e=o/(0,s.Z7)(t.spatialReference):"geographic"===l&&(e=(0,s.ty)(o,"meters",(0,a.Iu)(t.spatialReference).radius)),r=this._createPlanarCircle(t,e,n)}this.spatialReference=r.spatialReference,this.addRing(r.rings[0])}clone(){const{center:e,numberOfPoints:t,radius:n,radiusUnit:i,geodesic:s}=this;return new o({center:null===e||void 0===e?void 0:e.clone(),numberOfPoints:t,radius:n,radiusUnit:i,geodesic:s})}_createGeodesicCircle(e,t,n){let o=0;const i=[];for(;o<360;){const s=[0,0],r=[e.x,e.y];(0,h.TB)(s,r,o,t,d.Z.WGS84),this.hasZ&&s.push(e.z),i.push(s),o+=360/n}return i.push(i[0]),new u.Z(i)}_createPlanarCircle(e,t,n){const o=[],i=2*Math.PI/n;for(let s=0;s<n;++s){const n=i*s,r=[e.x+Math.cos(-n)*t,e.y+Math.sin(-n)*t];this.hasZ&&r.push(e.z),o.push(r)}return o.push(o[0]),new u.Z({spatialReference:e.spatialReference,rings:[o]})}};(0,i._)([(0,r.Cb)({type:c.Z})],v.prototype,"center",void 0),(0,i._)([(0,r.Cb)()],v.prototype,"geodesic",void 0),(0,i._)([(0,r.Cb)()],v.prototype,"numberOfPoints",void 0),(0,i._)([(0,r.Cb)()],v.prototype,"radius",void 0),(0,i._)([(0,r.Cb)()],v.prototype,"radiusUnit",void 0),v=o=(0,i._)([(0,l.j)("esri.geometry.Circle")],v);const g=v},8623:(e,t,n)=>{n.d(t,{Z:()=>u});var o=n(27366),i=n(11582),s=n(46784),r=n(49861),l=(n(93169),n(32718),n(84936),n(27135)),a=n(69912);let c=class extends((0,i.J)(s.wq)){constructor(e){super(e),this.type="georeferenced",this.origin=null}};(0,o._)([(0,l.J)({georeferenced:"georeferenced"},{readOnly:!0})],c.prototype,"type",void 0),(0,o._)([(0,r.Cb)({type:[Number],nonNullable:!1,json:{write:!0}})],c.prototype,"origin",void 0),c=(0,o._)([(0,a.j)("esri.geometry.support.MeshGeoreferencedVertexSpace")],c);const u=c},50250:(e,t,n)=>{n.d(t,{Z:()=>d});var o=n(27366),i=n(11582),s=n(46784),r=n(49861),l=(n(93169),n(32718),n(84936),n(27135)),a=n(69912),c=n(12400);let u=class extends((0,i.J)(s.wq)){constructor(e){super(e),this.type="local",this.origin=(0,c.Ue)()}};(0,o._)([(0,l.J)({local:"local"},{readOnly:!0})],u.prototype,"type",void 0),(0,o._)([(0,r.Cb)({type:[Number],nonNullable:!0,json:{write:!0}})],u.prototype,"origin",void 0),u=(0,o._)([(0,a.j)("esri.geometry.support.MeshLocalVertexSpace")],u);const d=u},69048:(e,t,n)=>{n.d(t,{G7:()=>_,QK:()=>h,rU:()=>p,vI:()=>v,z1:()=>u,zZ:()=>d});var o=n(44927),i=n(32718),s=n(32035),r=n(848),l=n(8623),a=n(50250);function c(){return i.Z.getLogger("esri.geometry.Mesh")}function u(e){return!d(e)}function d(e){return null!=e.origin}function h(e){return d(e.vertexSpace)}function p(e,t){if(!d(e))return null;const[n,o,i]=e.origin;return new r.Z({x:n,y:o,z:i,spatialReference:t})}function _(e,t){var n,i;const{x:s,y:r,z:u,spatialReference:d}=e,h=[s,r,null!==u&&void 0!==u?u:0];return void 0!==(null===t||void 0===t?void 0:t.geographic)&&((0,o.x9)(c(),"option: geographic",{replacement:"Use the `vertexSpace` option instead.",version:"4.29",warnOnce:!0}),t.vertexSpace&&c().warn("Deprecated geographic flag ignored since vertexSpace option is provided.")),"local"===(null!==(n=null!==(i=null===t||void 0===t?void 0:t.vertexSpace)&&void 0!==i?i:function(e){return null==e?void 0:e?"local":"georeferenced"}(null===t||void 0===t?void 0:t.geographic))&&void 0!==n?n:function(e){return e.isGeographic||e.isWebMercator?"local":"georeferenced"}(d))?new a.Z({origin:h}):new l.Z({origin:h})}function v(e,t){return e.type===t.type&&(e.origin===t.origin||null!=e.origin&&null!=t.origin&&(0,s.e)(e.origin,t.origin))}},70178:(e,t,n)=>{n.d(t,{Fz:()=>a,fS:()=>u,kg:()=>l});n(93169);var o=n(16889),i=n(92975);function s(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++){const o=e[n],i=t[n];if(o.length!==i.length)return!1;for(let e=0;e<o.length;e++)if(o[e]!==i[e])return!1}return!0}function r(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!s(e[n],t[n]))return!1;return!0}function l(e,t){return e===t||null!=e&&null!=t&&(0,i.fS)(e.spatialReference,t.spatialReference)&&e.x===t.x&&e.y===t.y&&e.z===t.z&&e.m===t.m}function a(e,t,n){var s,r,l,a;return e===t||null!=e&&null!=t&&(0,i.fS)(e.spatialReference,t.spatialReference)&&(0,o.W8)(e.x,t.x,n)&&(0,o.W8)(e.y,t.y,n)&&(0,o.W8)(null!==(s=e.z)&&void 0!==s?s:0,null!==(r=t.z)&&void 0!==r?r:0,n)&&(0,o.W8)(null!==(l=e.m)&&void 0!==l?l:0,null!==(a=t.m)&&void 0!==a?a:0,n)}function c(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.type!==t.type)return!1;switch(e.type){case"point":return l(e,t);case"extent":return function(e,t){return e.hasZ===t.hasZ&&e.hasM===t.hasM&&!!(0,i.fS)(e.spatialReference,t.spatialReference)&&e.xmin===t.xmin&&e.ymin===t.ymin&&e.zmin===t.zmin&&e.xmax===t.xmax&&e.ymax===t.ymax&&e.zmax===t.zmax}(e,t);case"polyline":return function(e,t){return e.hasZ===t.hasZ&&e.hasM===t.hasM&&!!(0,i.fS)(e.spatialReference,t.spatialReference)&&r(e.paths,t.paths)}(e,t);case"polygon":return function(e,t){return e.hasZ===t.hasZ&&e.hasM===t.hasM&&!!(0,i.fS)(e.spatialReference,t.spatialReference)&&r(e.rings,t.rings)}(e,t);case"multipoint":return function(e,t){return e.hasZ===t.hasZ&&e.hasM===t.hasM&&!!(0,i.fS)(e.spatialReference,t.spatialReference)&&s(e.points,t.points)}(e,t);case"mesh":return!1;default:return}}function u(e,t){return e===t||null!=e&&null!=t&&e.objectId===t.objectId&&!!c(e.geometry,t.geometry)&&!!function(e,t){if(e===t)return!0;if(!e||!t)return!1;const n=Object.keys(e),o=Object.keys(t);if(n.length!==o.length)return!1;for(const i of n)if(e[i]!==t[i])return!1;return!0}(e.attributes,t.attributes)}},37818:(e,t,n)=>{n.d(t,{D:()=>y,Ou:()=>c,WG:()=>g,kB:()=>h,mW:()=>d});n(59486);var o=n(52639),i=(n(93169),n(84652)),s=n(18722),r=n(77981),l=n(55946),a=n(78952);function c(e){return"declaredClass"in e}function u(e){return"declaredClass"in e}function d(e,t){return e?function(e){return"declaredClass"in e}(e)?e:new o.Z({layer:t,sourceLayer:t,visible:e.visible,symbol:(0,i.d9)(e.symbol),attributes:(0,i.d9)(e.attributes),geometry:h(e.geometry)}):null}function h(e){return null==e?null:c(e)?e:(0,r.im)(function(e){const{wkid:t,wkt:n,wkt2:o,latestWkid:i}=e.spatialReference,s={wkid:t,wkt:n,wkt2:o,latestWkid:i};switch(e.type){case"point":{const{x:t,y:n,z:o,m:i}=e;return{x:t,y:n,z:o,m:i,spatialReference:s}}case"polygon":{const{rings:t,hasZ:n,hasM:o}=e;return{rings:p(t),hasZ:n,hasM:o,spatialReference:s}}case"polyline":{const{paths:t,hasZ:n,hasM:o}=e;return{paths:p(t),hasZ:n,hasM:o,spatialReference:s}}case"extent":{const{xmin:t,xmax:n,ymin:o,ymax:i,zmin:r,zmax:l,mmin:a,mmax:c,hasZ:u,hasM:d}=e;return{xmin:t,xmax:n,ymin:o,ymax:i,zmin:r,zmax:l,mmin:a,mmax:c,hasZ:u,hasM:d,spatialReference:s}}case"multipoint":{const{points:t,hasZ:n,hasM:o}=e;return{points:v(t)?_(t):t,hasZ:n,hasM:o,spatialReference:s}}default:return}}(e))}function p(e){return function(e){for(const t of e)if(0!==t.length)return v(t);return!1}(e)?e.map((e=>_(e))):e}function _(e){return e.map((e=>Array.from(e)))}function v(e){return e.length>0&&((0,s.xZ)(e[0])||(0,s.fS)(e[0]))}function g(e,t){if(!e)return null;let n;if(u(e)){if(null==t)return e.clone();if(u(t))return t.copy(e)}return null!=t?(n=t,n.x=e.x,n.y=e.y,n.spatialReference=e.spatialReference,e.hasZ?(n.z=e.z,n.hasZ=e.hasZ):(n.z=void 0,n.hasZ=!1),e.hasM?(n.m=e.m,n.hasM=!0):(n.m=void 0,n.hasM=!1)):(n=(0,l.T)(e.x,e.y,e.z,e.spatialReference),e.hasM&&(n.m=e.m,n.hasM=!0)),n}function y(e){const{wkid:t,wkt:n,wkt2:o,latestWkid:i}=e,s={wkid:t,wkt:n,wkt2:o,latestWkid:i};return a.Z.fromJSON(s)}},41388:(e,t,n)=>{n.d(t,{b:()=>r});var o=n(66978),i=n(76432),s=n(73553);class r{constructor(){this._tasks=new Array,this._runningTasks=(0,i.t)(0)}get length(){return this._tasks.length}get running(){return this._runningTasks.value>0}destroy(){this.cancelAll()}runTask(e){if(0===this.length)return s.J;for(;!e.done&&this._process(e);)e.madeProgress()}push(e,t,n){return++this._runningTasks.value,new Promise(((o,i)=>this._tasks.push(new l(o,i,e,t,n)))).finally((()=>--this._runningTasks.value))}unshift(e,t,n){return++this._runningTasks.value,new Promise(((o,i)=>this._tasks.unshift(new l(o,i,e,t,n)))).finally((()=>--this._runningTasks.value))}_process(e){if(0===this._tasks.length)return!1;const t=this._tasks.shift();try{const i=(0,o.Hc)(t.signal);if(i&&!t.abortCallback)t.reject((0,o.zE)());else{var n;const s=i?null===(n=t.abortCallback)||void 0===n?void 0:n.call(t,(0,o.zE)()):t.callback(e);(0,o.y8)(s)?s.then(t.resolve,t.reject):t.resolve(s)}}catch(r){t.reject(r)}return!0}cancelAll(){const e=(0,o.zE)();for(const t of this._tasks)if(t.abortCallback){const n=t.abortCallback(e);t.resolve(n)}else t.reject(e);this._tasks.length=0}}class l{constructor(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;this.resolve=e,this.reject=t,this.callback=n,this.signal=o,this.abortCallback=i}}},58845:(e,t,n)=>{n.d(t,{DF:()=>m,MC:()=>w,Nv:()=>f,n_:()=>I,p:()=>b,y:()=>R,yL:()=>T});n(59486);var o=n(63780),i=n(84652),s=n(68860),r=n(32035),l=n(12400),a=n(42137),c=n(2170),u=n(69662),d=n(92975),h=n(3826),p=n(848),_=n(77577),v=n(29909),g=n(80885);function y(e,t){const n=new p.Z({x:e[0],y:e[1],spatialReference:t});return e.length>2&&(n.z=e[2]),n}function f(e,t){return new _.Z({points:e,spatialReference:t})}function m(e,t,n){const o=new v.Z({paths:e,spatialReference:t});return n&&(0,u.nc)(o),o}function b(e,t,n){let s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const r=(0,i.d9)(e);r.forEach((e=>{const t=e[0],n=e[e.length-1];(0,o.fS)(t,n)&&1!==e.length||e.push(e[0])}));let l=new g.Z({rings:r,spatialReference:t});return l.rings.forEach((e=>{(0,u.bu)(e)||e.reverse()})),n&&(0,u.nc)(l),s&&l.isSelfIntersecting&&(0,d.JY)(t)&&(l=(0,c.simplify)(l)),l}function T(e,t,n){const i=t.mapToLocalMultiple(e),s=[],r={x:i[0].x,y:i[0].y},l=i[1].x,a=i[1].y,c=Math.round(l-r.x),u=Math.round(a-r.y),d=Math.max(Math.abs(c),Math.abs(u));if(n){const e={x:r.x+d,y:r.y+d},t={x:r.x-d,y:r.y-d};s.push((0,h.Q8)(e.x,t.y),(0,h.Q8)(t.x,t.y),(0,h.Q8)(t.x,e.y),(0,h.Q8)(e.x,e.y))}else{const e={x:c>0?r.x+d:r.x-d,y:u>0?r.y+d:r.y-d};s.push((0,h.Q8)(r.x,r.y),(0,h.Q8)(e.x,r.y),(0,h.Q8)(e.x,e.y),(0,h.Q8)(r.x,e.y))}return C(b([s.map((e=>t.localToMap(e))).filter(o.pC)],t.spatialReference,t.doUnnormalization,!0),s,t)}function w(e,t,n){let i=t.mapToLocalMultiple(e);if(1===i.length){const e=48,t=i[0];i=[(0,h.Q8)(t.x-e,t.y+e),(0,h.Q8)(t.x+e,t.y-e),(0,h.Q8)(t.x+e,t.y-e),(0,h.Q8)(t.x-e,t.y+e)]}const s=[],r={x:i[0].x,y:i[0].y},l={x:i[1].x,y:i[1].y};if(n){const e=Math.round(l.x-r.x),t=Math.round(l.y-r.y);s.push((0,h.Q8)(r.x-e,r.y-t),(0,h.Q8)(l.x,r.y-t),(0,h.Q8)(l.x,l.y),(0,h.Q8)(r.x-e,l.y))}else s.push((0,h.Q8)(r.x,r.y),(0,h.Q8)(l.x,r.y),(0,h.Q8)(l.x,l.y),(0,h.Q8)(r.x,l.y));return C(b([s.map((e=>t.localToMap(e))).filter(o.pC)],t.spatialReference,t.doUnnormalization,!0),s,t)}function C(e,t,n){const o=E(t[3],t[2],n),i=E(t[1],t[2],n),s=E(t[0],t[1],n),r=E(t[0],t[3],n);return{geometry:e,midpoints:null!=o&&null!=i&&null!=s&&null!=r?{top:o,right:i,bottom:s,left:r}:null}}function E(e,t,n){k[0]=e.x,k[1]=e.y,k[2]=0,O[0]=t.x,O[1]=t.y,O[2]=0,(0,r.o)(k,k,O,.5),M.x=k[0],M.y=O[1],M.z=O[2];const o=n.localToMap(M);return null!=o?y(o,n.spatialReference):null}const M=(0,h.Q8)(0,0,0),k=(0,l.Ue)(),O=(0,l.Ue)();function R(e,t,n,o){const i=t.mapToLocalMultiple(e);let r=null,l=null;if(n)r=i[0],l=i[1];else{const e=i[0],t=i[1],n=Math.round(t.x-e.x),o=Math.round(t.y-e.y),s=Math.max(Math.abs(n),Math.abs(o));r=(0,h.Q8)(n>0?e.x+s/2:e.x-s/2,o>0?e.y+s/2:e.y-s/2),l=(0,h.Q8)(Math.abs(n)>Math.abs(o)?r.x-s/2:r.x,Math.abs(n)>Math.abs(o)?r.y:r.y-s/2)}const p=t.localToMap(r),_=t.localToMap(l);if(null==p||null==_)return null;t.doUnnormalization&&(0,u.Sq)([[p,_]],t.spatialReference);const v=y(p,t.spatialReference),g=y(_,t.spatialReference),f=(0,s.c9)(t.spatialReference);let m=0;if((0,d.JY)(t.spatialReference))m=f*(0,c.distance)(v,g,null);else{const e=r.x-l.x,t=r.y-l.y;m=f*Math.sqrt(e*e+t*t)*(o||1)}const T=new a.Z({center:v,radius:m,radiusUnit:"meters",spatialReference:t.spatialReference});return{geometry:b(T.rings,T.spatialReference,!1),center:v,edge:g}}function I(e,t,n){const i=t.mapToLocalMultiple(e),s=i[0],r=i[1],l=Math.round(r.x-s.x),a=Math.round(r.y-s.y),c=(0,h.Q8)(n?s.x:s.x+l/2,n?s.y:s.y+a/2),u=n?l:l/2,d=n?a:a/2,p=[],_=2*Math.PI/60;function v(e){const t=Math.cos(e),n=Math.sin(e);return(0,h.Q8)(u*t+c.x,d*n+c.y)}for(let o=0;o<60;o++)p.push(v(o*_));p.push(p[0]);const{spatialReference:g,doUnnormalization:f}=t,m=b([p.map((e=>t.localToMap(e))).filter(o.pC)],g,f,!1),T=t.localToMap(v(Math.PI/2)),w=t.localToMap(v(0)),C=t.localToMap(v(-Math.PI/2)),E=t.localToMap(v(Math.PI));return{geometry:m,midpoints:null!=T&&null!=w&&null!=C&&null!=E?{top:y(T,g),right:y(w,g),bottom:y(C,g),left:y(E,g)}:null}}},75248:(e,t,n)=>{var o;n.d(t,{n:()=>o}),function(e){e[e.ANIMATING=0]="ANIMATING",e[e.INTERACTING=1]="INTERACTING",e[e.IDLE=2]="IDLE"}(o||(o={}))},93463:(e,t,n)=>{n.d(t,{G5:()=>O,T8:()=>o,sq:()=>R,z4:()=>y});var o,i=n(100),s=(n(93169),n(32718)),r=n(92026),l=n(90941),a=n(27546),c=n(66978),u=n(94172),d=n(76432),h=n(38499),p=n(41388),_=n(32609),v=n(75248),g=n(73553);function y(){return new M.Scheduler}!function(e){e.RESOURCE_CONTROLLER_IMMEDIATE="immediate",e.RESOURCE_CONTROLLER="schedule",e.SLIDE="slide",e.STREAM_DATA_LOADER="stream loader",e.ELEVATION_QUERY="elevation query",e.TERRAIN_SURFACE="terrain",e.SURFACE_GEOMETRY_UPDATES="surface geometry updates",e.LOD_RENDERER="LoD renderer",e.GRAPHICS_CORE="Graphics3D",e.I3S_CONTROLLER="I3S",e.POINT_CLOUD_LAYER="point cloud",e.FEATURE_TILE_FETCHER="feature fetcher",e.OVERLAY="overlay",e.STAGE="stage",e.GRAPHICS_DECONFLICTOR="graphics deconflictor",e.FILTER_VISIBILITY="Graphics3D filter visibility",e.SCALE_VISIBILITY="Graphics3D scale visibility",e.FRUSTUM_VISIBILITY="Graphics3D frustum visibility",e.POINT_OF_INTEREST_FREQUENT="POI frequent",e.POINT_OF_INTEREST_INFREQUENT="POI infrequent",e.LABELER="labeler",e.FEATURE_QUERY_ENGINE="feature query",e.FEATURE_TILE_TREE="feature tile tree",e.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree",e.ELEVATION_ALIGNMENT="elevation alignment",e.ELEVATION_ALIGNMENT_SCENE="elevation alignment scene",e.TEXT_TEXTURE_ATLAS="text texture atlas",e.TEXTURE_UNLOAD="texture unload",e.LINE_OF_SIGHT_TOOL="line of sight tool",e.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool",e.ELEVATION_PROFILE="elevation profile",e.SNAPPING="snapping",e.SHADOW_ACCUMULATOR="shadow accumulator",e.CLOUDS_GENERATOR="clouds generator",e[e.NONE=0]="NONE",e[e.TEST_PRIO=1]="TEST_PRIO"}(o||(o={}));const f=new Map([[o.RESOURCE_CONTROLLER_IMMEDIATE,0],[o.RESOURCE_CONTROLLER,4],[o.SLIDE,0],[o.STREAM_DATA_LOADER,0],[o.ELEVATION_QUERY,0],[o.TERRAIN_SURFACE,1],[o.SURFACE_GEOMETRY_UPDATES,1],[o.LOD_RENDERER,2],[o.GRAPHICS_CORE,2],[o.I3S_CONTROLLER,2],[o.POINT_CLOUD_LAYER,2],[o.FEATURE_TILE_FETCHER,2],[o.OVERLAY,4],[o.STAGE,4],[o.GRAPHICS_DECONFLICTOR,4],[o.FILTER_VISIBILITY,4],[o.SCALE_VISIBILITY,4],[o.FRUSTUM_VISIBILITY,4],[o.CLOUDS_GENERATOR,4],[o.POINT_OF_INTEREST_FREQUENT,6],[o.POINT_OF_INTEREST_INFREQUENT,30],[o.LABELER,8],[o.FEATURE_QUERY_ENGINE,8],[o.FEATURE_TILE_TREE,16],[o.FEATURE_TILE_TREE_ACTIVE,0],[o.ELEVATION_ALIGNMENT,12],[o.ELEVATION_ALIGNMENT_SCENE,14],[o.TEXT_TEXTURE_ATLAS,12],[o.TEXTURE_UNLOAD,12],[o.LINE_OF_SIGHT_TOOL,16],[o.LINE_OF_SIGHT_TOOL_INTERACTIVE,0],[o.SNAPPING,0],[o.SHADOW_ACCUMULATOR,30]]);function m(e){return f.has(e)?f.get(e):"number"==typeof e?e:1}const b=(0,h.HA)(6.5),T=(0,h.HA)(1),w=(0,h.HA)(30),C=(0,h.HA)(1e3/30),E=(0,h.HA)(100);var M,k;!function(e){e.Scheduler=class{get updating(){return this._updating.value}_updatingChanged(){this._updating.value=this._tasks.some((e=>e.needsUpdate))}constructor(){this._updating=(0,d.t)(!0),this._microTaskQueued=!1,this._frameNumber=0,this.performanceInfo={total:new l.Z("total"),tasks:new Map},this._frameTaskTimes=new Map,this._budget=new n,this._state=v.n.INTERACTING,this._tasks=new a.Z,this._runQueue=new a.Z,this._load=0,this._idleStateCallbacks=new a.Z,this._idleUpdatesStartFired=!1,this._forceTask=!1,this._debug=!1,this._debugHandle=(0,u.watch)((()=>_.Z.SCHEDULER_LOG_SLOW_TASKS),(e=>this._debug=e),u.initial);for(const e of Object.keys(o))this.performanceInfo.tasks.set(o[e],new l.Z(o[e]))}destroy(){this._tasks.toArray().forEach((e=>e.remove())),this._tasks.clear(),(0,r.hw)(this._debugHandle),this._microTaskQueued=!1,this._updatingChanged()}taskRunningChanged(e){this._updatingChanged(),e&&this._budget.remaining>0&&!this._microTaskQueued&&(this._microTaskQueued=!0,queueMicrotask((()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.remaining>0&&this._schedule()&&this.frame())})))}registerTask(e,n){const o=new t(this,e,n);return this._tasks.push(o),this._updatingChanged(),this.performanceInfo.tasks.has(e)||this.performanceInfo.tasks.set(e,new l.Z(e)),o}registerIdleStateCallbacks(e,t){const n={idleBegin:e,idleEnd:t};this._idleStateCallbacks.push(n),this.state===v.n.IDLE&&this._idleUpdatesStartFired&&n.idleBegin();const o=this;return{remove:()=>this._removeIdleStateCallbacks(n),set idleBegin(e){o._idleUpdatesStartFired&&(n.idleEnd(),o._state===v.n.IDLE&&e()),n.idleBegin=e},set idleEnd(e){n.idleEnd=e}}}get load(){return this._load}set state(e){this._state!==e&&(this._state=e,this.state!==v.n.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll((e=>e.idleEnd()))))}get state(){return this._state}updateBudget(e){++this._frameNumber;let t=b,n=e.frameDuration,o=T;switch(this.state){case v.n.IDLE:t=(0,h.HA)(0),n=(0,h.HA)(Math.max(E,e.frameDuration)),o=w;break;case v.n.INTERACTING:n=(0,h.HA)(Math.max(C,e.frameDuration));case v.n.ANIMATING:}return n=(0,h.HA)(n-e.elapsedFrameTime-t),this.state!==v.n.IDLE&&n<T&&!this._forceTask?(this._forceTask=!0,!1):(n=(0,h.HA)(Math.max(n,o)),this._budget.reset(n,this.state),this._updateLoad(),this._schedule())}frame(){switch(this._forceTask=!1,this._microTaskQueued=!1,this.state){case v.n.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll((e=>e.idleBegin()))),this._runIdle();break;case v.n.INTERACTING:this._runInteracting();break;default:this._runAnimating()}}stopFrame(){this._budget.reset((0,h.HA)(0),this._state),this._budget.madeProgress()}_removeIdleStateCallbacks(e){this._idleUpdatesStartFired&&e.idleEnd(),this._idleStateCallbacks.removeUnordered(e)}removeTask(e){this._tasks.removeUnordered(e),this._runQueue.removeUnordered(e),this._updatingChanged()}_updateTask(e){this._tasks.forAll((t=>{t.name===e&&t.setPriority(e)}))}_getState(e){if(this._runQueue.some((t=>t.name===e)))return k.SCHEDULED;let t=k.IDLE;return this._tasks.forAll((n=>{n.name===e&&n.needsUpdate&&(n.schedulePriority<=1?t=k.READY:t!==k.READY&&(t=k.WAITING))})),t}_getRuntime(e){let t=0;return this._tasks.forAll((n=>{n.name===e&&(t+=n.runtime)})),t}_resetRuntimes(){this._tasks.forAll((e=>e.runtime=0))}_getRunning(){const e=new Map;if(this._tasks.forAll((t=>{t.needsUpdate&&e.set(t.name,(e.get(t.name)||0)+1)})),0===e.size)return null;let t="";return e.forEach(((e,n)=>{t+=e>1?" ".concat(e,"x ").concat(n):" ".concat(n)})),t}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const e=this._tasks.reduce(((e,t)=>t.needsUpdate?++e:e),0);this._load=.9*this._load+e*(1-.9)}_schedule(){for(this._runQueue.filterInPlace((e=>!!e.needsUpdate||(e.schedulePriority=e.basePriority,!1))),this._tasks.forAll((e=>{0===e.basePriority&&e.needsUpdate&&!this._runQueue.includes(e)&&e.blockFrame!==this._frameNumber&&this._runQueue.unshift(e)}));0===this._runQueue.length;){let e=!1,t=0;if(this._tasks.forAll((n=>{n.needsUpdate&&0!==n.schedulePriority&&0!==n.basePriority&&n.blockFrame!==this._frameNumber&&(e=!0,t=Math.max(t,n.basePriority),1===n.schedulePriority?(n.schedulePriority=0,this._runQueue.push(n)):--n.schedulePriority)})),!e)return this._updatingChanged(),!1}return this._updatingChanged(),!0}_run(){const e=this._budget.now();this._startFrameTaskTimes();do{for(;this._runQueue.length>0;){const n=this._budget.now(),i=this._runQueue.pop();this._budget.resetProgress();try{i.task.runTask(this._budget)===g.J&&(i.blockFrame=this._frameNumber)}catch(t){s.Z.getLogger("esri.views.support.Scheduler").error('Exception in task "'.concat(i.name,'"'),t),i.blockFrame=this._frameNumber}!this._budget.hasProgressed&&i.blockFrame!==this._frameNumber&&i.needsUpdate&&(i.name,o.I3S_CONTROLLER,i.blockFrame=this._frameNumber),i.schedulePriority=i.basePriority;const r=this._budget.now()-n;if(i.runtime+=r,this._frameTaskTimes.set(i.priority,this._frameTaskTimes.get(i.priority)+r),this._budget.remaining<=0)return this._updatingChanged(),void this._recordFrameTaskTimes(this._budget.now()-e)}}while(this._schedule());this._updatingChanged(),this._recordFrameTaskTimes(this._budget.now()-e)}_startFrameTaskTimes(){for(const e of Object.keys(o))this._frameTaskTimes.set(o[e],0)}_recordFrameTaskTimes(e){this._frameTaskTimes.forEach(((e,t)=>this.performanceInfo.tasks.get(t).record(e))),this.performanceInfo.total.record(e)}get test(){}};class t{get task(){return this._task.value}get updating(){return this._queue.running}constructor(e,t,n){this._scheduler=e,this.name=t,this.blockFrame=0,this.runtime=0,this._queue=new p.b,this._handles=new i.Z,this._basePriority=m(t),this.schedulePriority=this._basePriority,this._task=(0,d.t)(null!=n?n:this._queue),this._handles.add((0,u.when)((()=>this.task.running),(t=>e.taskRunningChanged(t))))}remove(){this.processQueue(O),this._scheduler.removeTask(this),this.schedule=R.schedule,this.reschedule=R.reschedule,this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(e){if(this.name===e)return;this.name=e;const t=m(e);0!==this._basePriority&&0===this.schedulePriority||(this.schedulePriority=t),this._basePriority=t}get priority(){return this.name}set priority(e){this.setPriority(e)}get needsUpdate(){return this.updating||this.task.running}schedule(e,t,n){return this._queue.push(e,t,n)}reschedule(e,t,n){return this._queue.unshift(e,t,n)}processQueue(e){return this._queue.runTask(e)}}class n{constructor(){this._begin="undefined"!=typeof performance?performance.now():0,this._budget=0,this._state=v.n.IDLE,this._done=!1,this._progressed=!1,this._enabled=!0}run(e){return!this.done&&(!0===e()&&this.madeProgress(),!0)}get done(){return this._done}get budget(){return this._budget}madeProgress(){return this._progressed=!0,this._done=this.elapsed>=this._budget&&this._enabled,this._done}get state(){return this._state}get enabled(){return this._enabled}set enabled(e){this._enabled=e}reset(e,t){this._begin=this.now(),this._budget=e,this._state=t,this.resetProgress()}get remaining(){return Math.max(this._budget-this.elapsed,0)}now(){return performance.now()}get elapsed(){return this.now()-this._begin}resetProgress(){this._progressed=!1,this._done=!1}get hasProgressed(){return this._progressed}}e.Budget=n}(M||(M={})),function(e){e.SCHEDULED="s",e.READY="r",e.WAITING="w",e.IDLE="i"}(k||(k={}));const O=(()=>{const e=new M.Budget;return e.enabled=!1,e})();const R=new class{remove(){}processQueue(){}schedule(e,t,n){try{if((0,c.Hc)(t)){const e=(0,c.zE)();return n?Promise.resolve(n(e)):Promise.reject(e)}return(0,c.gx)(e(O))}catch(o){return Promise.reject(o)}}reschedule(e,t,n){return this.schedule(e,t,n)}}},73553:(e,t,n)=>{n.d(t,{J:()=>o});const o=Symbol("Yield")},32609:(e,t,n)=>{n.d(t,{Z:()=>a});var o=n(27366),i=n(7138),s=n(49861),r=(n(93169),n(32718),n(84936),n(69912));let l=class extends i.default{constructor(){super(...arguments),this.SCHEDULER_LOG_SLOW_TASKS=!1,this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1}};(0,o._)([(0,s.Cb)()],l.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0),(0,o._)([(0,s.Cb)()],l.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0),l=(0,o._)([(0,r.j)("esri.views.support.debugFlags")],l);const a=new l},16068:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Me});var o=n(27366),i=(n(59166),n(42537)),s=n(92026),r=n(66978),l=n(94172),a=n(49861),c=(n(93169),n(32718)),u=(n(84936),n(69912)),d=n(47863),h=n(33565),p=n(40763),_=n(7138),v=n(48346);let g=class extends _.default{constructor(e){super(e),this.point=!0,this.polyline=!0,this.polygon=!0,this.rectangle=!0,this.circle=!0,this.multipoint=!0,this.mesh=!0}};(0,o._)([(0,a.Cb)({type:Boolean,nonNullable:!0})],g.prototype,"point",void 0),(0,o._)([(0,a.Cb)({type:Boolean,nonNullable:!0})],g.prototype,"polyline",void 0),(0,o._)([(0,a.Cb)({type:Boolean,nonNullable:!0})],g.prototype,"polygon",void 0),(0,o._)([(0,a.Cb)({type:Boolean,nonNullable:!0})],g.prototype,"rectangle",void 0),(0,o._)([(0,a.Cb)({type:Boolean,nonNullable:!0})],g.prototype,"circle",void 0),(0,o._)([(0,a.Cb)({type:Boolean,nonNullable:!0})],g.prototype,"multipoint",void 0),(0,o._)([(0,a.Cb)({type:Boolean,nonNullable:!0})],g.prototype,"mesh",void 0),g=(0,o._)([(0,u.j)("esri.widgets.Sketch.VisibleElements.CreateToolVisibilityMap")],g);let y=class extends _.default{constructor(e){super(e),this["rectangle-selection"]=!0,this["lasso-selection"]=!0,this["custom-selection"]=!0}};(0,o._)([(0,a.Cb)({nonNullable:!0})],y.prototype,"rectangle-selection",void 0),(0,o._)([(0,a.Cb)({nonNullable:!0})],y.prototype,"lasso-selection",void 0),(0,o._)([(0,a.Cb)({nonNullable:!0})],y.prototype,"custom-selection",void 0),y=(0,o._)([(0,u.j)("esri.widgets.Sketch.VisibleElements.SelectionToolVisibilityMap")],y);let f=class extends _.default{constructor(e){super(e),this.createTools=new g,this.directionModePicker=!1,this.duplicateButton=!0,this.labelsToggle=!0,this.selectionTools=new y,this.settingsMenu=!0,this.snappingControls=!0,this.snappingControlsElements=new v.Z,this.tooltipsToggle=!0,this.undoRedoMenu=!0}};(0,o._)([(0,a.Cb)({type:g,nonNullable:!0})],f.prototype,"createTools",void 0),(0,o._)([(0,a.Cb)({type:Boolean,nonNullable:!0})],f.prototype,"directionModePicker",void 0),(0,o._)([(0,a.Cb)({type:Boolean,nonNullable:!0})],f.prototype,"duplicateButton",void 0),(0,o._)([(0,a.Cb)({type:Boolean,nonNullable:!0})],f.prototype,"labelsToggle",void 0),(0,o._)([(0,a.Cb)({type:y,nonNullable:!0})],f.prototype,"selectionTools",void 0),(0,o._)([(0,a.Cb)({type:Boolean,nonNullable:!0})],f.prototype,"settingsMenu",void 0),(0,o._)([(0,a.Cb)({type:Boolean,nonNullable:!0})],f.prototype,"snappingControls",void 0),(0,o._)([(0,a.Cb)({type:v.Z,nonNullable:!0})],f.prototype,"snappingControlsElements",void 0),(0,o._)([(0,a.Cb)({type:Boolean,nonNullable:!0})],f.prototype,"tooltipsToggle",void 0),(0,o._)([(0,a.Cb)({type:Boolean,nonNullable:!0})],f.prototype,"undoRedoMenu",void 0),f=(0,o._)([(0,u.j)("esri.widgets.Sketch.VisibleElements")],f);const m=f;var b=n(8905),T=n(7021),w=n(44927),C=n(89125),E=n(80975),M=n(80532),k=n(67005),O=n(91505),R=n(37933),I=n(83089),S=n(69787),A=(n(59486),n(14921)),x=n(80987),L=n(17842),N=n(69662),U=n(55364),P=n(66038),D=n(46640),F=n(58845),G=n(3826),Z=n(45900),H=n(65156);let z=class extends _.default{constructor(e){super(e),this.coordinates=void 0,this.strokeDash=[],this.strokeWidth=1,this.strokeColor=[0,0,0,1],this.strokeDashColor=[255,255,255,1],this.fillColor=[0,0,0,0],this.visible=!0,this.isDecoration=!0}get _strokeStyle(){const e=this.strokeColor;return"rgba(".concat(e[0],", ").concat(e[1],", ").concat(e[2],", ").concat(e[3],")")}get _strokeBackgroundStyle(){const e=this.strokeDashColor;return"rgba(".concat(e[0],", ").concat(e[1],", ").concat(e[2],", ").concat(e[3],")")}get _fillStyle(){const e=this.fillColor;return"rgba(".concat(e[0],", ").concat(e[1],", ").concat(e[2],", ").concat(e[3],")")}get _renderCoordinates(){const e=[];if(!this.coordinates)return{coordinates:e,rect:H.G_};const t=(0,H.vk)((0,H.Wi)((0,H.Ue)(H.G_),this.coordinates),2*this.strokeWidth);t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]+.5),t[3]=Math.ceil(t[3]+.5);for(const n of this.coordinates)e.push([Math.floor(n[0]-t[0])+.5,Math.floor(n[1]-t[1])+.5]);return e.reverse(),{coordinates:e,rect:t}}render(){const{coordinates:e,rect:t}=this._renderCoordinates,n=(0,H.d_)(t),o=(0,H.Cb)(t);return(0,k.u)("div",{classes:{"esri-outline-overlay-item":!0},styles:{left:t[0]+"px",top:t[1]+"px",width:n+"px",height:o+"px",visibility:this.visible?"visible":"hidden"}},(0,k.u)("svg",{height:o,styles:{display:"block"},width:n},(0,k.u)("polygon",{fill:this._fillStyle,points:e.map((e=>{let[t,n]=e;return"".concat(t,",").concat(n)})).join(" "),stroke:this._strokeBackgroundStyle,"stroke-width":this.strokeWidth}),(0,k.u)("polygon",{fill:"transparent",points:e.map((e=>{let[t,n]=e;return"".concat(t,",").concat(n)})).join(" "),stroke:this._strokeStyle,"stroke-dasharray":this.strokeDash.length?this.strokeDash.join(" "):void 0,"stroke-width":this.strokeWidth})))}renderCanvas(){}};(0,o._)([(0,a.Cb)()],z.prototype,"coordinates",void 0),(0,o._)([(0,a.Cb)()],z.prototype,"strokeDash",void 0),(0,o._)([(0,a.Cb)()],z.prototype,"strokeWidth",void 0),(0,o._)([(0,a.Cb)()],z.prototype,"strokeColor",void 0),(0,o._)([(0,a.Cb)()],z.prototype,"strokeDashColor",void 0),(0,o._)([(0,a.Cb)()],z.prototype,"fillColor",void 0),(0,o._)([(0,a.Cb)()],z.prototype,"visible",void 0),(0,o._)([(0,a.Cb)()],z.prototype,"isDecoration",void 0),(0,o._)([(0,a.Cb)({readOnly:!0})],z.prototype,"_strokeStyle",null),(0,o._)([(0,a.Cb)({readOnly:!0})],z.prototype,"_strokeBackgroundStyle",null),(0,o._)([(0,a.Cb)({readOnly:!0})],z.prototype,"_fillStyle",null),(0,o._)([(0,a.Cb)({readOnly:!0})],z.prototype,"_renderCoordinates",null),z=(0,o._)([(0,u.j)("esri.views.overlay.OutlineOverlayItem")],z);const B=z;let Q=class extends(O.Z.EventedMixin(Z.m)){constructor(e){super(e),this._overlayItem=void 0,this.geometryType=null,this.mode=null,this.type="draw-screen"}initialize(){this.drawOperation=this._makeDrawOperation();const e=e=>this.drawOperation.on(e,(t=>{this._updateVisuals(),this.emit(e,t)}));this.addHandles([e("vertex-add"),e("vertex-remove"),e("vertex-update"),e("cursor-update"),e("complete")]),this.finishToolCreation()}destroy(){this.drawOperation=(0,s.SC)(this.drawOperation),this._set("view",null)}get canRedo(){return this.drawOperation.canRedo}get canUndo(){return this.drawOperation.canUndo}set centeredToggled(e){this._set("centeredToggled",e),this._updateVisuals()}set enabled(e){this.drawOperation.interactive=e,this._set("enabled",e)}set uniformSizeToggled(e){this._set("uniformSizeToggled",e),this._updateVisuals()}get updating(){var e,t;return null!==(e=null===(t=this.drawOperation)||void 0===t?void 0:t.updating)&&void 0!==e&&e}get cursor(){return"point"===this.geometryType?"default":"crosshair"}completeCreateOperation(){this.drawOperation.complete()}onInputEvent(e){this.destroyed||this.drawOperation.onInputEvent(e)}redo(){this.drawOperation.redo()}undo(){this.drawOperation.undo()}reset(){}_makeDrawOperation(){const{view:e}=this;return new P.wW({view:e,manipulators:this.manipulators,geometryType:j(this.geometryType),drawingMode:this.mode,hasZ:!1,defaultZ:0,snapToSceneEnabled:!1,drawSurface:new D.$c,hasM:!1,snappingManager:null,snappingVisualizer:null,graphic:null,cursor:this.cursor})}get coordinates(){const{drawOperation:e}=this;if(null===e||void 0===e||!e.geometryIncludingUncommittedVertices.length)return[];const{coordinateHelper:t}=e,n=e.committableVertex,o=e.committedVertices.slice();null!=n&&o.push(t.pointToArray(n));const i=o.length;switch(this.geometryType){case"circle":case"rectangle":{const t=new G.kq(U.Wd,D.$c.spatialReference),n="circle"===this.geometryType?F.y:F.yL,u="circle"===this.geometryType?F.n_:F.MC;if(1===i&&e.isCompleted){var s,r;const e=o[0];return null!==(s=null===(r=n([e,t.makeMapPoint(e[0]+V,e[1])],t,!0))||void 0===r?void 0:r.geometry.rings[0])&&void 0!==s?s:[]}if(2===i){var l,a,c;const e="rectangle"!==this.geometryType,i=this.centeredToggled!==e,s="rectangle"!==this.geometryType;return null!==(l=this.uniformSizeToggled!==s?null===(a=n(o,t,i))||void 0===a?void 0:a.geometry.rings[0]:null===(c=u(o,t,i))||void 0===c?void 0:c.geometry.rings[0])&&void 0!==l?l:[]}return[]}}return o}_updateVisuals(){if(!this._overlayItem){var e;const t=new B({strokeDash:[5],strokeDashColor:[255,255,255,255]});null!==(e=this.view.overlay)&&void 0!==e&&e.addItem(t),this.addHandles((0,i.kB)((()=>{var e;null!==(e=this.view.overlay)&&void 0!==e&&e.removeItem(t),null!==t&&void 0!==t&&t.destroy(),this._overlayItem=void 0}))),this._overlayItem=t}this._overlayItem.coordinates=this.coordinates}onDeactivate(){this.drawOperation.isCompleted||this.drawOperation.cancel()}};function j(e){switch(e){case"polygon":case"point":return e;case"circle":case"rectangle":return"segment"}}(0,o._)([(0,a.Cb)({value:!1})],Q.prototype,"centeredToggled",null),(0,o._)([(0,a.Cb)()],Q.prototype,"drawOperation",void 0),(0,o._)([(0,a.Cb)({value:!0})],Q.prototype,"enabled",null),(0,o._)([(0,a.Cb)({value:!1})],Q.prototype,"uniformSizeToggled",null),(0,o._)([(0,a.Cb)({constructOnly:!0})],Q.prototype,"geometryType",void 0),(0,o._)([(0,a.Cb)({constructOnly:!0})],Q.prototype,"mode",void 0),(0,o._)([(0,a.Cb)({readOnly:!0})],Q.prototype,"type",void 0),(0,o._)([(0,a.Cb)({readOnly:!0})],Q.prototype,"updating",null),(0,o._)([(0,a.Cb)({constructOnly:!0,nonNullable:!0})],Q.prototype,"view",void 0),(0,o._)([(0,a.Cb)()],Q.prototype,"cursor",null),Q=(0,o._)([(0,u.j)("esri.views.draw.DrawScreenTool")],Q);const V=48;var q=n(87888),W=n(37270),Y=n(96669),J=n(45008);async function X(){return async function(){return n.e(63645).then(n.bind(n,50309))}().then((e=>{let{contains:t,intersects:n,overlaps:o,simplify:i}=e;return{contains:t,intersects:n,overlaps:o,simplify:i}}))}async function K(e){const{currentSelection:t,selector:n,signal:o,sources:i,view:s}=e;if(null===i||void 0===i||!i.length)return{added:[],removed:[]};const{layers:l,layerViews:a,graphicsLayers:c}=function(e){const t=[],n=[],o=[];return e.forEach((e=>{var i,s;(0,R.Te)(e)?t.push(e):((0,R.Q2)(e)||(0,R.Ux)(e))&&null!==(i=e.layers)&&void 0!==i&&i.length?t.push(...e.layers.toArray()):(0,R.aw)(e)&&null!==(s=e.sublayers)&&void 0!==s&&s.length?o.push(...e.sublayers.toArray()):(0,R.ik)(e)?o.push(e):(0,S.Xi)(e)&&n.push(e)})),{layers:t,layerViews:n,graphicsLayers:o}}(i),u=(await(0,r.Hl)(Promise.all([ee(n,l,s,o),te(n,a,s,o),$(n,c,s)]),o)).flat();if(!t)return{added:u,removed:[]};const d=t.toArray(),h=u.filter((e=>!oe(d,e))),p=d.filter((e=>!oe(u,e)));return t.removeMany(p),t.addMany(h),{added:h,removed:p}}const $=async(e,t,n)=>{var o;return async function(e){const{selector:t,candidates:n,view:o}=e;if(null===n||void 0===n||!n.length||!t)return[];const{spatialReference:i}=o,s=t,r=await X();return n.filter((e=>r.intersects(i,s,e.geometry)))}({candidates:null!==(o=t.flatMap((e=>e.graphics.toArray())))&&void 0!==o?o:[],selector:e,view:n})},ee=async(e,t,n,o)=>{const i=await(0,r.R8)(async function(e){const{layers:t,selector:n,signal:o,view:i}=e;return(0,r.Hl)(Promise.allSettled(t.map((async e=>e.queryFeatures(function(e,t,n,o){const{outFields:i,geometry:s}=ie(t,n,o);return e.outFields=i,e.geometry=s,e.returnGeometry=!0,e.outSpatialReference=o.spatialReference,e}(e.createQuery(),n,e,i),{signal:o}).then((e=>{let{features:t}=e;return t}))))),o)}({selector:e,signal:o,layers:t,view:n}));return i?ne(i):[]},te=async(e,t,n,o)=>{const i=await(0,r.R8)(async function(e){const{layerViews:t,selector:n,signal:o,view:i}=e;return(0,r.Hl)(Promise.allSettled(t.map((async e=>{const t=e.createQuery(),{geometry:s}=ie(n,e.layer,i);return t.outFields=["*"],t.geometry=s,t.returnGeometry=!0,t.outSpatialReference=i.spatialReference,e.queryFeatures(t,{signal:o}).then((e=>{let{features:t}=e;return t}))}))),o)}({selector:e,signal:o,layerViews:t,view:n}));return i?ne(i):[]};function ne(e){const t=[];for(let n=0;n<e.length;n++){const o=e[n];"fulfilled"===o.status&&t.push(...o.value)}return t}function oe(e,t){if(e.includes(t))return!0;const n=t.getObjectId(),o=null!=n,{layer:i,uid:s}=t;return o?e.some((e=>{if(i===e.layer)return n===e.getObjectId()})):e.some((e=>{if(i===e.layer)return s===e.uid}))}function ie(e,t,n){const o="displayField"in t?t.displayField:null,i=(0,W.O5)({displayField:o,fields:t.fields}),s=[t.objectIdField];null!=i&&t.fieldsIndex.has(i)&&s.push(i);const r="renderer"in t?(0,Y.k)({renderer:t.renderer}):0;return{geometry:"point"===e.type?(0,J.K)(e,r,n):e,outFields:s}}var se=n(848),re=n(80885);let le=class extends O.Z.EventedAccessor{constructor(e){super(e),this._processTask=null,this.options=null,this.selection=new x.Z,this.sources=null,this._process=(0,r.Ds)((async(e,t)=>{const{callback:n,selector:o,completed:i}=e,s=(0,A.vr)((async e=>{const{sources:t,selection:s,view:r}=this;if((null!==t&&void 0!==t&&t.length||null!==r&&void 0!==r&&r.selectionManager.sources.length)&&r){if(o&&null!=t){var l;const n=await K({currentSelection:s,selector:o,signal:e,sources:t,view:r});i&&(null===(l=r.selectionManager)||void 0===l||l.updateSelection({current:s.toArray(),...n}))}n&&n()}else s.removeAll()}));return(0,r.fu)(t,(()=>s.abort())),this._processTask=s,s.promise}),100)}initialize(){this._setup()}cancel(){var e;this.removeAllHandles(),null===(e=this._processTask)||void 0===e||e.abort()}async _setup(){var e,t;const{view:n}=this;if(await n.whenReady(),this.destroyed)return;const o=this.options,s=null!==(e=null===o||void 0===o?void 0:o.createTool)&&void 0!==e?e:"rectangle",l=null!==(t=null===o||void 0===o?void 0:o.mode)&&void 0!==t?t:"polygon"===s?"click":"hybrid",a=Symbol();this._tool=new Q({view:n,mode:l,geometryType:s}),null!==o&&void 0!==o&&o.selectOnComplete||this.addHandles(this._tool.on(["cursor-update","vertex-add","vertex-remove"],(()=>(0,r.R8)(this._process({selector:this._selectionArea})))),a),this.addHandles([n.on("key-down",(e=>{if(!e.repeat)switch(e.key){case q.Sn.constraint:this._tool.uniformSizeToggled=!0,e.stopPropagation();break;case q.Sn.center:this._tool.centeredToggled=!0,e.stopPropagation()}})),n.on("key-up",(e=>{switch(e.key){case q.Sn.constraint:this._tool.uniformSizeToggled=!1,e.stopPropagation();break;case q.Sn.center:this._tool.centeredToggled=!1,e.stopPropagation()}})),this._tool.on("complete",(async e=>{this.removeHandles(a);const t=()=>{this.removeAllHandles(),this.emit("complete",{aborted:e.aborted,selection:this.selection.toArray()})};e.aborted?(this.cancel(),this.selection.removeAll(),t()):await this._process({selector:this._selectionArea,callback:t,completed:!0})}))],a),this.addHandles((0,i.kB)((()=>n.tools.remove(this._tool)))),n.addAndActivateTool(this._tool)}get _selectionArea(){const e=(0,L.vW)(),t=this._tool.coordinates,n=this.view.spatialReference,o=t=>{e.x=t[0],e.y=t[1];const{x:n,y:o}=this.view.toMap(e);return[n,o]};if(1===t.length){const[e,i]=o(t[0]);return new se.Z({x:e,y:i,spatialReference:n})}const i=this._tool.coordinates.map(o);if(0!==i.length)return(0,N.bu)(i)||i.reverse(),new re.Z({spatialReference:n,rings:[i]})}};(0,o._)([(0,a.Cb)()],le.prototype,"options",void 0),(0,o._)([(0,a.Cb)({readOnly:!0})],le.prototype,"selection",void 0),(0,o._)([(0,a.Cb)()],le.prototype,"sources",void 0),(0,o._)([(0,a.Cb)({constructOnly:!0})],le.prototype,"view",void 0),le=(0,o._)([(0,u.j)("esri.widgets.support.Selector2D.SelectionOperation")],le);const ae=le;let ce=class extends O.Z.EventedAccessor{constructor(e){super(e),this._operationHandlesGroup=null,this.activeOperation=null,this.sources=null}initialize(){this.addHandles([(0,l.watch)((()=>this._sources),(e=>{this.activeOperation&&(this.activeOperation.sources=e)}))])}destroy(){this._operationHandlesGroup=(0,s.hw)(this._operationHandlesGroup)}get _sources(){const{sources:e,view:t}=this;return t&&null!==e&&void 0!==e&&e.length?e.flatMap((e=>{if((0,S.Xi)(e))return e;if((0,R.Q2)(e)||(0,R.Ux)(e)){const n=e.layers||[],o=n.map((e=>{const n=(0,I.j)(t,e)||void 0;return(0,S.Xi)(n)?n:e}));return o.length?o.toArray():n.length?n.toArray():e}const n=(0,I.j)(t,e)||void 0;return(0,S.Xi)(n)?n:e})):[]}get layers(){return(0,w.Mr)(c.Z.getLogger(this),"layers",{replacement:"Use SelectionToolbar.sources instead."}),this.sources}set layers(e){(0,w.Mr)(c.Z.getLogger(this),"layers",{replacement:"Use SelectionToolbar.sources instead."}),this.sources=e}get state(){const{_sources:e,view:t}=this,n=!(null!==e&&void 0!==e&&e.length)&&!(null!==t&&void 0!==t&&t.selectionManager.sources.length);return this.activeOperation?"active":null!==t&&void 0!==t&&t.ready&&!n?"ready":"disabled"}cancel(){var e;"active"===this.state&&(null!==(e=this.activeOperation)&&void 0!==e&&e.cancel(),this._set("activeOperation",null))}activate(e){const{_sources:t,state:n,view:o}=this,s=!(null!==t&&void 0!==t&&t.length)&&!(null!==o&&void 0!==o&&o.selectionManager.sources.length);if("disabled"===n||s||!this.view)return;"active"===n&&this.cancel();const r=new ae({view:this.view,sources:t,options:e});return this._operationHandlesGroup=(0,i.AL)([r.selection.on("change",(e=>this.emit("selection-change",e))),r.once("complete",(e=>this._onOperationComplete(e)))]),this._set("activeOperation",r),r}_onOperationComplete(e){this._operationHandlesGroup=(0,s.hw)(this._operationHandlesGroup),this._set("activeOperation",null),this.emit("complete",e)}};(0,o._)([(0,a.Cb)()],ce.prototype,"_sources",null),(0,o._)([(0,a.Cb)({readOnly:!0})],ce.prototype,"activeOperation",void 0),(0,o._)([(0,a.Cb)()],ce.prototype,"layers",null),(0,o._)([(0,a.Cb)()],ce.prototype,"sources",void 0),(0,o._)([(0,a.Cb)({readOnly:!0})],ce.prototype,"state",null),(0,o._)([(0,a.Cb)()],ce.prototype,"view",void 0),ce=(0,o._)([(0,u.j)("esri.widgets.support.SelectionToolbar.SelectionToolbarViewModel")],ce);const ue=ce,de={lassoTool:!0,rectangleTool:!0},he={createTool:"polygon",mode:"freehand"},pe={createTool:"rectangle"},_e="esri-selection-toolbar",ve={base:_e,container:"".concat(_e,"__container"),toolButton:"".concat(_e,"__tool-button")};let ge=class extends h.Z{constructor(e,t){super(e,t),this._viewModelHandlesGroup=null,this.activeToolInfo=null,this.messages=null,this.toolConfigs=[],this.viewModel=new ue,this.visibleElements={...de},this._viewModelHandlesGroup=(0,i.AL)([this.viewModel.on("complete",(e=>{this._set("activeToolInfo",null),this.emit("complete",e)}))])}destroy(){this._viewModelHandlesGroup=(0,s.hw)(this._viewModelHandlesGroup)}loadDependencies(){return(0,b.h)({action:()=>Promise.all([n.e(92358),n.e(46895),n.e(65138),n.e(91741)]).then(n.bind(n,6814)),icon:()=>Promise.all([n.e(92358),n.e(87474)]).then(n.bind(n,87474))})}get label(){var e,t;return null!==(e=null===(t=this.messages)||void 0===t?void 0:t.widgetLabel)&&void 0!==e?e:""}set label(e){this._overrideIfSome("label",e)}get layers(){return(0,w.Mr)(c.Z.getLogger(this),"layers",{replacement:"Use SelectionToolbar.sources instead."}),this.viewModel.sources}set layers(e){(0,w.Mr)(c.Z.getLogger(this),"layers",{replacement:"Use SelectionToolbar.sources instead."}),this.viewModel.sources=e}get sources(){return this.viewModel.sources}set sources(e){this.viewModel.sources=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}castVisibleElements(e){return{...de,...e}}get visibleToolCount(){var e;const{view:t,toolConfigs:n,visibleElements:o}=this;return(null!==(e=null===n||void 0===n?void 0:n.length)&&void 0!==e?e:0)+("2d"===(null===t||void 0===t?void 0:t.type)?(o.lassoTool?1:0)+(o.rectangleTool?1:0):0)}activate(e){if(this.cancel(),"disabled"!==this.viewModel.state)switch(e){case"lasso":this._activateTool("lasso");break;case"rectangle":this._activateTool("rectangle");break;default:this._activateTool(e)}}cancel(){this.viewModel.cancel(),this._set("activeToolInfo",null)}render(){return(0,k.u)("div",{"aria-label":this.label,class:this.classes(ve.base,T.z.widget)},(0,k.u)("div",{class:ve.container},this._renderDefaultTools(),this._renderCustomTools()))}_renderDefaultTools(){var e;if("2d"===(null===(e=this.view)||void 0===e?void 0:e.type))return[this._renderRectangleTool(),this._renderLassoTool()]}_renderCustomTools(){var e;if(null!==(e=this.toolConfigs)&&void 0!==e&&e.length)return this.toolConfigs.map((e=>{var t;let{toolName:n,icon:o}=e;return(0,k.u)("calcite-action",{active:(null===(t=this.activeToolInfo)||void 0===t?void 0:t.toolName)===n,bind:this,class:ve.toolButton,disabled:"disabled"===this.viewModel.state,onclick:()=>this._onCustomToolClick(n),scale:"s",text:n,title:n},(0,k.u)("calcite-icon",{icon:o||"selection",scale:"s"}))}))}_renderLassoTool(){const{activeToolInfo:e,messages:t,visibleElements:n}=this;if(!n.lassoTool)return;const o=t.selectByLasso;return(0,k.u)("calcite-action",{active:"lasso"===(null===e||void 0===e?void 0:e.toolName),bind:this,disabled:"disabled"===this.viewModel.state,onclick:this._onLassoToolClick,scale:"s",text:o,title:o},(0,k.u)("calcite-icon",{icon:"lasso-select",scale:"s"}))}_renderRectangleTool(){const{activeToolInfo:e,messages:t,visibleElements:n}=this;if(!n.rectangleTool)return;const o=t.selectByRectangle;return(0,k.u)("calcite-action",{active:"rectangle"===(null===e||void 0===e?void 0:e.toolName),bind:this,disabled:"disabled"===this.viewModel.state,onclick:this._onRectangleToolClick,scale:"s",text:o,title:o},(0,k.u)("calcite-icon",{icon:"cursor-marquee",scale:"s"}))}_onCustomToolClick(e){this._toggleTool(e)}_onLassoToolClick(){this._toggleTool("lasso")}_onRectangleToolClick(){this._toggleTool("rectangle")}_activateTool(e){const t=this._getToolOptions(e);if(!t)return;const n=this.viewModel.activate(t);n&&this._set("activeToolInfo",{toolName:e,operation:n})}_toggleTool(e){if(this.activeToolInfo){const t=this.activeToolInfo.toolName;if(this.cancel(),t===e)return}this._activateTool(e)}_getToolOptions(e){return"lasso"===e?he:"rectangle"===e?pe:this.toolConfigs.find((t=>t.toolName===e))}};(0,o._)([(0,a.Cb)({readOnly:!0})],ge.prototype,"activeToolInfo",void 0),(0,o._)([(0,a.Cb)()],ge.prototype,"label",null),(0,o._)([(0,a.Cb)()],ge.prototype,"layers",null),(0,o._)([(0,a.Cb)(),(0,M.H)("esri/widgets/support/SelectionToolbar/t9n/SelectionToolbar")],ge.prototype,"messages",void 0),(0,o._)([(0,a.Cb)()],ge.prototype,"sources",null),(0,o._)([(0,a.Cb)()],ge.prototype,"toolConfigs",void 0),(0,o._)([(0,a.Cb)()],ge.prototype,"view",null),(0,o._)([(0,a.Cb)()],ge.prototype,"viewModel",void 0),(0,o._)([(0,a.Cb)()],ge.prototype,"visibleElements",void 0),(0,o._)([(0,C.p)("visibleElements")],ge.prototype,"castVisibleElements",null),(0,o._)([(0,a.Cb)()],ge.prototype,"visibleToolCount",null),ge=(0,o._)([(0,u.j)("esri.widgets.support.SelectionToolbar")],ge);const ye=ge;var fe=n(70381),me=n(29840),be=n(28907),Te=n(8704);const we="esri-sketch",Ce={base:we,verticalLayout:"".concat(we,"--vertical"),horizontalLayout:"".concat(we,"--horizontal"),panel:"".concat(we,"__panel"),infoPanel:"".concat(we,"__info-panel"),section:"".concat(we,"__section"),toolSection:"".concat(we,"__tool-section"),infoSection:"".concat(we,"__info-section"),infoCountSection:"".concat(we,"__info-count-section"),menuContainer:"".concat(we,"__menu-container"),menuHeader:"".concat(we,"__menu-header"),menuTitle:"".concat(we,"__menu-title"),featureCountBadge:"".concat(we,"__feature-count-badge"),featureCountText:"".concat(we,"__feature-count-text"),featureCountNumber:"".concat(we,"__feature-count-number"),actionToggle:"".concat(we,"__action-toggle"),actionToggleOn:"".concat(we,"__action-toggle--on"),actionTitle:"".concat(we,"__item-action-title"),actionIcon:"".concat(we,"__item-action-icon")};let Ee=class extends h.Z{constructor(e,t){super(e,t),this._activeCreateOptions=null,this._menuOpen=!1,this._selectionToolbar=null,this._viewModelHandlesGroup=null,this.availableCreateTools=["point","polyline","polygon","rectangle","circle"],this.creationMode="continuous",this.layout="horizontal",this.messages=null,this.messagesCommon=null,this.visibleElements=new m,this._activateCreateTool=this._activateCreateTool.bind(this),this.viewModel=(null===e||void 0===e?void 0:e.viewModel)||new p.Z}initialize(){const{layer:e,view:t}=this,n=new ye({view:"2d"===(null===t||void 0===t?void 0:t.type)?t:null,sources:e?[e]:null});this.addHandles([(0,l.watch)((()=>this.viewModel),(e=>{this._viewModelHandlesGroup=(0,s.hw)(this._viewModelHandlesGroup),e&&(this._viewModelHandlesGroup=(0,i.AL)([e.on("create",(e=>{this.scheduleRender(),this._onCreateOperation(e)})),e.on("update",(()=>this.scheduleRender())),e.on("delete",(e=>this.emit("delete",e))),e.on("undo",(()=>this.scheduleRender())),e.on("redo",(()=>this.scheduleRender())),(0,l.watch)((()=>e.layer),(e=>{this._selectionToolbar&&(this._selectionToolbar.sources=e?[e]:null)})),(0,l.watch)((()=>e.view),(e=>{this._selectionToolbar&&(this._selectionToolbar.view="2d"===(null===e||void 0===e?void 0:e.type)?e:null)})),(0,l.watch)((()=>e.state),(()=>this.notifyChange("state")))]))}),l.syncAndInitial),(0,l.when)((()=>n.activeToolInfo),(()=>this.viewModel.cancel())),n.on("complete",(e=>this._onSelectionOperationComplete(e))),(0,l.watch)((()=>{const{selectionTools:e}=this.visibleElements;return{lassoTool:!(null===e||void 0===e||!e["lasso-selection"]),rectangleTool:!(null===e||void 0===e||!e["rectangle-selection"])}}),(e=>{Object.assign(n.visibleElements,e)}),l.syncAndInitial)]),this._selectionToolbar=n}loadDependencies(){return(0,b.h)({action:()=>Promise.all([n.e(92358),n.e(46895),n.e(65138),n.e(91741)]).then(n.bind(n,6814)),icon:()=>Promise.all([n.e(92358),n.e(87474)]).then(n.bind(n,87474))})}destroy(){var e;null!==(e=this._selectionToolbar)&&void 0!==e&&e.destroy(),this._viewModelHandlesGroup=(0,s.hw)(this._viewModelHandlesGroup)}get activeTool(){var e;const t=null===(e=this._selectionToolbar)||void 0===e?void 0:e.activeToolInfo;if(t)switch(t.toolName){case"lasso":return"lasso-selection";case"rectangle":return"rectangle-selection";case"default":return"custom-selection"}return this.viewModel.activeTool}get createGraphic(){return this.viewModel.createGraphic}get defaultCreateOptions(){return this.viewModel.defaultCreateOptions}set defaultCreateOptions(e){this.viewModel.defaultCreateOptions=e}get defaultUpdateOptions(){return this.viewModel.defaultUpdateOptions}set defaultUpdateOptions(e){this.viewModel.defaultUpdateOptions=e}get icon(){return"pencil"}set icon(e){this._overrideIfSome("icon",e)}get label(){var e,t;return null!==(e=null===(t=this.messages)||void 0===t?void 0:t.widgetLabel)&&void 0!==e?e:""}set label(e){this._overrideIfSome("label",e)}get labelOptions(){return this.viewModel.labelOptions}set labelOptions(e){this.viewModel.labelOptions=e}get layer(){return this.viewModel.layer}set layer(e){this.viewModel.layer=e}get snappingOptions(){return this.viewModel.snappingOptions}set snappingOptions(e){this.viewModel.snappingOptions=e}get state(){var e;return null!==(e=this._selectionToolbar)&&void 0!==e&&e.activeToolInfo?"active":this.viewModel.state}get tooltipOptions(){return this.viewModel.tooltipOptions}set tooltipOptions(e){this.viewModel.tooltipOptions=e}get updateGraphics(){return this.viewModel.updateGraphics}get valueOptions(){return this.viewModel.valueOptions}set valueOptions(e){this.viewModel.valueOptions=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}set viewModel(e){const t=this._get("viewModel");e!==t&&(t&&(0,s.SC)(t),this._set("viewModel",e))}get _effectiveAvailableCreateTools(){const{availableCreateTools:e,visibleElements:t}=this;return null===e||void 0===e?void 0:e.filter((e=>{var n;return!(null===(n=t.createTools)||void 0===n||!n[e])}))}create(e,t){return this._activeCreateOptions=t||null,(0,r.R8)(this.viewModel.create(e,t))}update(e,t){return(0,r.R8)(this.viewModel.update(e,t))}complete(){this.viewModel.complete()}cancel(){var e;null!==(e=this._selectionToolbar)&&void 0!==e&&e.cancel(),this.viewModel.cancel()}undo(){var e;this.viewModel.undo(),null===(e=this.view)||void 0===e||e.focus()}redo(){var e;this.viewModel.redo(),null===(e=this.view)||void 0===e||e.focus()}delete(){this.viewModel.delete()}duplicate(){return this.viewModel.duplicate()}render(){const{label:e,layout:t,viewModel:{state:n}}=this;return(0,k.u)("div",{"aria-label":e,class:this.classes(Ce.base,T.z.widget,{[T.z.disabled]:"disabled"===n,[Ce.verticalLayout]:"vertical"===t,[Ce.horizontalLayout]:"horizontal"===t})},(0,k.u)("div",{class:Ce.panel,role:"toolbar"},this._renderTopPanelContents()),(0,k.u)("div",{class:this.classes(Ce.panel,Ce.infoPanel)},this._renderInfoPanelContents()))}_renderTopPanelContents(){var e;const t=this.classes(Ce.section,Ce.toolSection),{_effectiveAvailableCreateTools:n,visibleElements:o,viewModel:i}=this;return[i.updateOnGraphicClick||null!==(e=this._selectionToolbar)&&void 0!==e&&e.visibleToolCount?(0,k.u)("div",{class:t,key:"selection-button-container",role:"menu"},this._renderDefaultSelectionButton(),this._renderSelectionToolbar()):null,null!==n&&void 0!==n&&n.length?(0,k.u)("div",{class:t,role:"menu"},this._renderDrawActions()):null,o.undoRedoMenu?(0,k.u)("div",{class:t,key:"undo-redo-menu-button-container",role:"menu"},this._renderUndoRedoMenuButtons()):null,o.settingsMenu?(0,k.u)("div",{class:Ce.section,key:"settings-menu-button-container"},this._renderSettingsMenuButton()):null]}_renderInfoPanelContents(){return this._menuOpen?this._renderSettingsMenu():this.updateGraphics.length?[(0,k.u)("div",{class:this.classes(Ce.section,Ce.infoSection,Ce.infoCountSection),key:"feature-count-container"},this._renderFeatureCount()),(0,k.u)("div",{class:this.classes(Ce.section,Ce.infoSection),key:"delete-button-container"},this._renderDuplicateButton(),this._renderDeleteButton())]:void 0}_renderSettingsMenu(){const{messagesCommon:e,snappingOptions:t,view:n,viewModel:o,visibleElements:i}=this,s={directionModePicker:i.directionModePicker,labelsToggle:i.labelsToggle,tooltipsToggle:i.tooltipsToggle};return(0,k.u)("div",{class:Ce.menuContainer,"data-testid":"menu",key:"settings-menu-container",role:"menu"},(0,k.u)("header",{class:Ce.menuHeader,key:"settings-menu-header"},(0,k.u)("span",{class:Ce.menuTitle},e.settings)),(0,E.Mz)(s)?(0,k.u)(fe.Z,{sketchOptions:o.sketchOptions,viewType:null===n||void 0===n?void 0:n.type,visibleElements:s}):void 0,i.snappingControls&&n&&t?(0,k.u)(me.Z,{snappingOptions:t,view:n,visibleElements:i.snappingControlsElements}):void 0)}_renderFeatureCount(){const{layout:e,messages:t,updateGraphics:{length:n}}=this,o=(0,Te.n)(t.selectedCount,{count:n});return(0,k.u)("div",{"aria-label":o,class:Ce.featureCountBadge},(0,k.u)("span",{class:Ce.featureCountNumber},"vertical"===e?n:o))}_renderDuplicateButton(){if(!this.visibleElements.duplicateButton)return;const e=this.messages,t=this.updateGraphics.length>1?e.duplicateFeatures:e.duplicateFeature;return(0,k.u)("calcite-action",{bind:this,onclick:this._onDuplicateSelect,scale:"s",text:t,title:t},(0,k.u)("calcite-icon",{icon:"copy",scale:"s"}))}_renderDeleteButton(){const e=this.messages,t=this.updateGraphics.length>1?e.deleteFeatures:e.deleteFeature;return(0,k.u)("calcite-action",{bind:this,onclick:this.delete,scale:"s",text:t,title:t},(0,k.u)("calcite-icon",{icon:"trash",scale:"s"}))}_renderDefaultSelectionButton(){if(!this.viewModel.updateOnGraphicClick)return;const{messages:e,state:t}=this,n=e.selectFeature;return(0,k.u)("calcite-action",{active:"ready"===t,bind:this,disabled:"disabled"===t,onclick:this._activateDefaultSelectTool,scale:"s",text:n,title:n},(0,k.u)("calcite-icon",{icon:"cursor",scale:"s"}))}_renderSelectionToolbar(){var e;if("2d"===(null===(e=this.view)||void 0===e?void 0:e.type)&&this._selectionToolbar)return this._selectionToolbar.render()}_renderDrawActions(){var e;const{messages:t}=this;return null===(e=this._effectiveAvailableCreateTools)||void 0===e?void 0:e.map((e=>{switch(e){case"point":return this._renderAction(e,t.drawPoint,"pin");case"polyline":return this._renderAction(e,t.drawPolyline,"line");case"polygon":return this._renderAction(e,t.drawPolygon,"polygon");case"rectangle":return this._renderAction(e,t.drawRectangle,"rectangle");case"circle":return this._renderAction(e,t.drawCircle,"circle");default:return}}))}_renderAction(e,t,n){return(0,k.u)("calcite-action",{active:this.activeTool===e,bind:this,disabled:"disabled"===this.state,onclick:()=>this._activateCreateTool(e),scale:"s",text:t,title:t},(0,k.u)("calcite-icon",{icon:n,scale:"s"}))}_renderUndoRedoMenuButtons(){return[this._renderUndoButton(),this._renderRedoButton()]}_renderUndoButton(){const e=this.messages.undo;return(0,k.u)("calcite-action",{bind:this,disabled:!this.viewModel.canUndo()||"disabled"===this.state,onclick:this.undo,scale:"s",text:e,title:e},(0,k.u)("calcite-icon",{icon:(0,E.dZ)(this.container)?"redo":"undo",scale:"s"}))}_renderRedoButton(){const e=this.messages.redo;return(0,k.u)("calcite-action",{bind:this,disabled:!this.viewModel.canRedo()||"disabled"===this.state,onclick:this.redo,scale:"s",text:e,title:e},(0,k.u)("calcite-icon",{icon:(0,E.dZ)(this.container)?"undo":"redo",scale:"s"}))}_renderSettingsMenuButton(){const e=this.messagesCommon.settings;return(0,k.u)("calcite-action",{active:this._menuOpen,bind:this,"data-testid":"settings-menu-action",disabled:"disabled"===this.state,onclick:this._toggleMenu,scale:"s",text:e,title:e},(0,k.u)("calcite-icon",{icon:"gear",scale:"s"}))}_activateCreateTool(e){var t;this.activeTool!==e?(null!==(t=this._selectionToolbar)&&void 0!==t&&t.cancel(),this.create(e)):this.cancel()}_onCreateOperation(e){if("complete"!==e.state)return;const{creationMode:t}=this,{type:n}=e;if("create"===n){const{tool:n,graphic:o}=e,i=this._activeCreateOptions;this._activeCreateOptions=null,"continuous"===t?this.create(n,i):"update"===t&&this.update([o])}}_toggleMenu(){this._menuOpen=!this._menuOpen,this.scheduleRender()}_onDuplicateSelect(){const e=this.duplicate(),t=this.viewModel.activeTool;"transform"!==t&&"reshape"!==t||this.update(e,{tool:t})}_onSelectionOperationComplete(e){const{viewModel:{defaultUpdateOptions:t}}=this,{selection:n}=e;if(!e.aborted&&n.length){const e=t.tool,o=n.length>1&&"reshape"===e?"transform":e;this.update(n,{...t,tool:o})}this.notifyChange("state")}_activateDefaultSelectTool(){var e;this.cancel(),null===(e=this.view)||void 0===e||e.focus()}};(0,o._)([(0,a.Cb)()],Ee.prototype,"activeTool",null),(0,o._)([(0,a.Cb)({cast:e=>{if(null===e||void 0===e||!e.length)return null;const t=new Set(["point","polyline","polygon","rectangle","circle"]);return e.filter((e=>t.has(e)))}})],Ee.prototype,"availableCreateTools",void 0),(0,o._)([(0,a.Cb)({readOnly:!0})],Ee.prototype,"createGraphic",null),(0,o._)([(0,a.Cb)()],Ee.prototype,"creationMode",void 0),(0,o._)([(0,a.Cb)()],Ee.prototype,"defaultCreateOptions",null),(0,o._)([(0,a.Cb)()],Ee.prototype,"defaultUpdateOptions",null),(0,o._)([(0,a.Cb)()],Ee.prototype,"icon",null),(0,o._)([(0,a.Cb)()],Ee.prototype,"label",null),(0,o._)([(0,a.Cb)()],Ee.prototype,"labelOptions",null),(0,o._)([(0,a.Cb)()],Ee.prototype,"layer",null),(0,o._)([(0,a.Cb)({type:["horizontal","vertical"]})],Ee.prototype,"layout",void 0),(0,o._)([(0,a.Cb)(),(0,M.H)("esri/widgets/Sketch/t9n/Sketch")],Ee.prototype,"messages",void 0),(0,o._)([(0,a.Cb)(),(0,M.H)("esri/t9n/common")],Ee.prototype,"messagesCommon",void 0),(0,o._)([(0,a.Cb)()],Ee.prototype,"snappingOptions",null),(0,o._)([(0,a.Cb)()],Ee.prototype,"state",null),(0,o._)([(0,a.Cb)()],Ee.prototype,"tooltipOptions",null),(0,o._)([(0,a.Cb)({readOnly:!0})],Ee.prototype,"updateGraphics",null),(0,o._)([(0,a.Cb)({type:d.Z,nonNullable:!0})],Ee.prototype,"valueOptions",null),(0,o._)([(0,a.Cb)()],Ee.prototype,"view",null),(0,o._)([(0,a.Cb)(),(0,be.s)(["create","update","undo","redo"])],Ee.prototype,"viewModel",null),(0,o._)([(0,a.Cb)({type:m,nonNullable:!0})],Ee.prototype,"visibleElements",void 0),(0,o._)([(0,a.Cb)()],Ee.prototype,"_effectiveAvailableCreateTools",null),Ee=(0,o._)([(0,u.j)("esri.widgets.Sketch")],Ee);const Me=Ee}}]);
//# sourceMappingURL=47179.dd5574e1.chunk.js.map