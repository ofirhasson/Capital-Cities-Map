{"version":3,"file":"static/js/50397.338b7aac.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/views/2d/layers/StreamLayerView2D.js","../node_modules/@arcgis/core/views/layers/StreamLayerView.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import r from\"../../../core/Error.js\";import{handlesGroup as t,makeHandle as s}from\"../../../core/handleUtils.js\";import{watch as n}from\"../../../core/reactiveUtils.js\";import{property as o}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/RandomLCG.js\";import{subclass as i}from\"../../../core/accessorSupport/decorators/subclass.js\";import a from\"../../../rest/support/FeatureSet.js\";import c from\"./FeatureLayerView2D.js\";import{handleNoEngineError as l}from\"./support/handleNoEngineError.js\";import h from\"../../layers/StreamLayerView.js\";let p=class extends(h(c)){constructor(){super(...arguments),this.pipelineConnectionStatus=\"disconnected\",this.pipelineErrorString=null}initialize(){this.addHandles([n((()=>this.layer.customParameters),(async e=>{(await this.getWorker()).streamMessenger.updateCustomParameters(e)})),this.layer.on(\"send-message-to-socket\",(async e=>{(await this.getWorker()).streamMessenger.sendMessageToSocket(e)})),this.layer.on(\"send-message-to-client\",(async e=>{(await this.getWorker()).streamMessenger.sendMessageToClient(e),this._isUserPaused&&\"type\"in e&&\"clear\"===e.type&&this.incrementSourceRefreshVersion()})),n((()=>this.layer.purgeOptions),(()=>this._update())),n((()=>this.suspended),this._onSuspendedChange.bind(this))],\"constructor\"),this._doResume()}destroy(){this._doPause()}get connectionError(){return this.pipelineErrorString?new r(\"stream-controller\",this.pipelineErrorString):null}on(e,r){if(Array.isArray(e))return t(e.map((e=>this.on(e,r))));const n=[\"data-received\",\"message-received\"].includes(e);n&&this.getWorker().then((r=>r.streamMessenger.enableEvent(e,!0)));const o=super.on(e,r),i=this;return s((()=>{o.remove(),n&&(i._workerProxy.closed||i.hasEventListener(e)||i.getWorker().then((r=>r.streamMessenger.enableEvent(e,!1))))}))}async queryLatestObservations(e,t){if(!(this.layer.timeInfo?.endField||this.layer.timeInfo?.startField||this.layer.timeInfo?.trackIdField))throw new r(\"streamlayer-no-timeField\",\"queryLatestObservation can only be used with services that define a TrackIdField\");const s=await this.getWorker();return l(s.features.executeQueryForLatestObservations(this._cleanUpQuery(e),t).then((e=>{const r=a.fromJSON(e);return r.features.forEach((e=>{e.layer=this.layer,e.sourceLayer=this.layer})),r})),new a({features:[]}))}detach(){super.detach(),this.pipelineConnectionStatus=\"disconnected\"}get _streamConnectionStatus(){return this.pipelineConnectionStatus}_doPause(){null!=this._refreshInterval&&(clearInterval(this._refreshInterval),this._refreshInterval=null)}_doResume(){this._refreshInterval=setInterval((()=>this.incrementSourceRefreshVersion()),this.layer.updateInterval)}_doDisconnect(){this.getWorker().then((e=>e.streamMessenger.disconnect())),this._doPause()}_doConnect(){this.getWorker().then((e=>e.streamMessenger.connect())),this.resume()}_doClear(){this.getWorker().then((e=>e.streamMessenger.clear())),null==this._refreshInterval&&this.incrementSourceRefreshVersion()}_createClientOptions(){const e=super._createClientOptions(),r=this;return{...e,get container(){return r.featureContainer},setProperty:e=>{this.set(e.propertyName,e.value)}}}};e([o()],p.prototype,\"pipelineConnectionStatus\",void 0),e([o()],p.prototype,\"pipelineErrorString\",void 0),e([o({readOnly:!0})],p.prototype,\"connectionError\",null),e([o({readOnly:!0})],p.prototype,\"_streamConnectionStatus\",null),p=e([i(\"esri.views.2d.layers.StreamLayerView2D\")],p);const u=p;export{u as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{_ as s}from\"../../chunks/tslib.es6.js\";import{property as e}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/RandomLCG.js\";import{subclass as t}from\"../../core/accessorSupport/decorators/subclass.js\";import o from\"../../layers/support/FeatureFilter.js\";const r=r=>{let i=class extends r{resume(){this._isUserPaused=!1,this.suspended||this._doResume()}pause(){this._isUserPaused=!0,this.suspended||this._doPause()}disconnect(){this._doDisconnect()}connect(){this._doConnect()}clear(){this._doClear()}constructor(...s){super(...s),this._isUserPaused=!1,this.filter=null}get connectionStatus(){return(this._isUserPaused||this.suspended)&&\"connected\"===this._streamConnectionStatus?\"paused\":this._streamConnectionStatus}_onSuspendedChange(s){s?this._doPause():this._isUserPaused||this._doResume()}};return s([e()],i.prototype,\"_isUserPaused\",void 0),s([e({readOnly:!0})],i.prototype,\"connectionStatus\",null),s([e({type:o})],i.prototype,\"filter\",void 0),i=s([t(\"esri.views.layers.StreamLayerView\")],i),i};export{r as default};\n"],"names":["p","h","c","constructor","super","arguments","this","pipelineConnectionStatus","pipelineErrorString","initialize","addHandles","n","layer","customParameters","async","getWorker","streamMessenger","updateCustomParameters","e","on","sendMessageToSocket","sendMessageToClient","_isUserPaused","type","incrementSourceRefreshVersion","purgeOptions","_update","suspended","_onSuspendedChange","bind","_doResume","destroy","_doPause","connectionError","r","Array","isArray","t","map","includes","then","enableEvent","o","i","s","remove","_workerProxy","closed","hasEventListener","queryLatestObservations","_this$layer$timeInfo","_this$layer$timeInfo2","_this$layer$timeInfo3","timeInfo","endField","startField","trackIdField","l","features","executeQueryForLatestObservations","_cleanUpQuery","a","fromJSON","forEach","sourceLayer","detach","_streamConnectionStatus","_refreshInterval","clearInterval","setInterval","updateInterval","_doDisconnect","disconnect","_doConnect","connect","resume","_doClear","clear","_createClientOptions","container","featureContainer","setProperty","set","propertyName","value","prototype","readOnly","u","pause","filter","connectionStatus"],"sourceRoot":""}