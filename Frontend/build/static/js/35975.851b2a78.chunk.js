"use strict";(self.webpackChunknorthwind=self.webpackChunknorthwind||[]).push([[35975],{8904:(t,e,n)=>{n.d(e,{G$:()=>p,OB:()=>u,Tl:()=>m});n(59486),n(93169);var s=n(42537),a=n(32718),i=n(68860),o=n(65156),l=n(81753),r=n(848);const c=()=>a.Z.getLogger("esri.layers.support.ElevationSampler");class h{queryElevation(t){return p(t.clone(),this)}on(){return(0,s.kB)()}projectIfRequired(t,e){return f(t,e)}}class u extends h{get spatialReference(){return this.extent.spatialReference}constructor(t,e,n){super(),this.tile=t,this.noDataValue=n;const s=t.tile.extent;this.extent=(0,o.HH)(s,e.spatialReference),this.extent.zmin=t.zmin,this.extent.zmax=t.zmax,this._aaExtent=s;const a=(0,i.c9)(e.spatialReference),l=e.lodAt(t.tile.level).resolution*a;this.demResolution={min:l,max:l}}contains(t){const e=this.projectIfRequired(t,this.spatialReference);return null!=e&&this.containsAt(e.x,e.y)}containsAt(t,e){return(0,o.jE)(this._aaExtent,t,e)}elevationAt(t,e){var n;if(!this.containsAt(t,e)){const n=this.extent,s="".concat(n.xmin,", ").concat(n.ymin,", ").concat(n.xmax,", ").concat(n.ymax);return c().warn("#elevationAt()","Point used to sample elevation (".concat(t,", ").concat(e,") is outside of the sampler extent (").concat(s,")")),this.noDataValue}return null!==(n=this.tile.sample(t,e))&&void 0!==n?n:this.noDataValue}}class m extends h{get spatialReference(){return this.extent.spatialReference}constructor(t,e,n){let s;super(),"number"==typeof e?(this.noDataValue=e,s=null):(s=e,this.noDataValue=n),this.samplers=s?t.map((t=>new u(t,s,this.noDataValue))):t;const a=this.samplers[0];if(a){this.extent=a.extent.clone();const{min:t,max:e}=a.demResolution;this.demResolution={min:t,max:e};for(let n=1;n<this.samplers.length;n++){const t=this.samplers[n];this.extent.union(t.extent),this.demResolution.min=Math.min(this.demResolution.min,t.demResolution.min),this.demResolution.max=Math.max(this.demResolution.max,t.demResolution.max)}}else this.extent=(0,o.HH)((0,o.Ue)(),s.spatialReference),this.demResolution={min:0,max:0}}elevationAt(t,e){let n,s=!1;for(const a of this.samplers)if(a.containsAt(t,e)&&(s=!0,n=a.elevationAt(t,e),n!==a.noDataValue))return n;return null!=n?n:(s||c().warn("#elevationAt()","Point used to sample elevation (".concat(t,", ").concat(e,") is outside of the sampler")),this.noDataValue)}}function p(t,e){const n=f(t,e.spatialReference);if(!n)return null;switch(t.type){case"point":!function(t,e,n){t.z=n.elevationAt(e.x,e.y)}(t,n,e);break;case"polyline":!function(t,e,n){x.spatialReference=e.spatialReference;const s=t.hasM&&!t.hasZ;for(let a=0;a<t.paths.length;a++){const i=t.paths[a],o=e.paths[a];for(let t=0;t<i.length;t++){const e=i[t],a=o[t];x.x=a[0],x.y=a[1],s&&(e[3]=e[2]),e[2]=n.elevationAt(x.x,x.y)}}t.hasZ=!0}(t,n,e);break;case"multipoint":!function(t,e,n){x.spatialReference=e.spatialReference;const s=t.hasM&&!t.hasZ;for(let a=0;a<t.points.length;a++){const i=t.points[a],o=e.points[a];x.x=o[0],x.y=o[1],s&&(i[3]=i[2]),i[2]=n.elevationAt(x.x,x.y)}t.hasZ=!0}(t,n,e)}return t}function f(t,e){if(null==t)return null;const n=t.spatialReference;if(n.equals(e))return t;const s=(0,l.iV)(t,e);return s||c().error("Cannot project geometry spatial reference (wkid:".concat(n.wkid,") to elevation sampler spatial reference (wkid:").concat(e.wkid,")")),s}const x=new r.Z},11939:(t,e,n)=>{n.d(e,{K:()=>s});class s{constructor(t,e){this.data=t,this.safeWidth=.99999999*(t.width-1),this.dx=(t.width-1)/(e[2]-e[0]),this.dy=(t.width-1)/(e[3]-e[1]),this.x0=e[0],this.y1=e[3]}}}}]);
//# sourceMappingURL=35975.851b2a78.chunk.js.map