"use strict";(self.webpackChunknorthwind=self.webpackChunknorthwind||[]).push([[94658,77671,55785],{77671:(e,t,i)=>{i.d(t,{Y:()=>r});var s=i(74177);const r={readOnly:!0,get(){return(0,s.R)(this.view)}}},74177:(e,t,i)=>{i.d(t,{R:()=>n});var s=i(68860),r=i(7575);function n(e){var t,i,n,a,l;const o="metric";if(null==e)return o;const d=e.map,u=null!==(t=d&&"portalItem"in d?null===(i=d.portalItem)||void 0===i?void 0:i.portal:null)&&void 0!==t?t:r.Z.getDefault();switch(null!==(n=null===(a=u.user)||void 0===a?void 0:a.units)&&void 0!==n?n:u.units){case o:return o;case"english":return"imperial"}return null!==(l=(0,s.yT)(e.spatialReference))&&void 0!==l?l:o}},94658:(e,t,i)=>{i.r(t),i.d(t,{default:()=>y});var s=i(27366),r=i(66978),n=i(94172),a=i(49861),l=(i(93169),i(32718),i(84936),i(69912)),o=i(33565),d=i(7138),u=i(68860),v=i(77671);let c=class extends d.default{constructor(e){super(e),this.activeTool=null,this.activeViewModel=null,this.view=null}get areaUnit(){return this.defaultUnit}set areaUnit(e){this._overrideIfSome("areaUnit",e)}get linearUnit(){return this.defaultUnit}set linearUnit(e){this._overrideIfSome("linearUnit",e)}get state(){const{activeViewModel:e}=this;return e?e.state:"disabled"}};(0,s._)([(0,a.Cb)({type:["area","distance","direct-line"]})],c.prototype,"activeTool",void 0),(0,s._)([(0,a.Cb)()],c.prototype,"activeViewModel",void 0),(0,s._)([(0,a.Cb)({type:u.fN})],c.prototype,"areaUnit",null),(0,s._)([(0,a.Cb)(v.Y)],c.prototype,"defaultUnit",void 0),(0,s._)([(0,a.Cb)({type:u.oD})],c.prototype,"linearUnit",null),(0,s._)([(0,a.Cb)({readOnly:!0})],c.prototype,"state",null),(0,s._)([(0,a.Cb)()],c.prototype,"view",void 0),c=(0,s._)([(0,l.j)("esri.widgets.Measurement.MeasurementViewModel")],c);const h=c;i(80975);var w=i(80532),g=i(67005);const p="esri-measurement";let _=class extends o.Z{constructor(e,t){super(e,t),this._widgets=new Map,this.activeWidget=null,this.messages=null,this.viewModel=new h}initialize(){this.activeWidget&&this.viewModel.set("activeViewModel",this.activeWidget.viewModel),this.view&&this.activeTool&&this._getActiveWidget().then((e=>{this._set("activeWidget",e)})),this.addHandles([(0,n.watch)((()=>[this.view,this.activeTool]),(async()=>{this._set("activeWidget",await this._getActiveWidget())})),(0,n.watch)((()=>this.activeWidget),((e,t)=>{this.viewModel.set("activeViewModel",e?e.viewModel:null),t&&(t.visible=!1)})),(0,n.watch)((()=>[this.areaUnit,this.linearUnit,this.uiStrings]),(()=>this._updateSubWidgetProperties()))])}destroy(){this._destroyWidgets()}get activeTool(){return this.viewModel.activeTool}set activeTool(e){this.viewModel.activeTool=e}get areaUnit(){return this.viewModel.areaUnit}set areaUnit(e){this.viewModel.areaUnit=e}get icon(){return"measure"}set icon(e){this._overrideIfSome("icon",e)}get label(){var e,t;return null!==(e=null===(t=this.messages)||void 0===t?void 0:t.widgetLabel)&&void 0!==e?e:""}set label(e){this._overrideIfSome("label",e)}get linearUnit(){return this.viewModel.linearUnit}set linearUnit(e){this.viewModel.linearUnit=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){const{activeWidget:e}=this,t=e&&!e.destroyed?e.render():null;return(0,g.u)("div",{class:p},t)}clear(){this.activeTool=null,this._destroyWidgets()}startMeasurement(){const{activeViewModel:e}=this.viewModel;e&&(0,r.R8)(e.start())}async _createWidget(e){const{areaUnit:t,linearUnit:s,view:r}=this;if(!r)return null;switch(e){case"area":{const{type:s}=r;switch(s){case"2d":return new(0,(await Promise.all([i.e(99058),i.e(34470),i.e(17877),i.e(121),i.e(38856),i.e(73807),i.e(95537),i.e(9194),i.e(83394),i.e(68643),i.e(41421)]).then(i.bind(i,41421))).default)({view:r,unit:t,uiStrings:this._createUIStringsForWidget(e)});case"3d":return new(0,(await Promise.all([i.e(57808),i.e(99058),i.e(34470),i.e(17877),i.e(25158),i.e(89414),i.e(121),i.e(38856),i.e(73807),i.e(69656),i.e(46316),i.e(25269),i.e(11219),i.e(96106),i.e(96026),i.e(10039),i.e(68683),i.e(97411),i.e(9194),i.e(29950),i.e(28035)]).then(i.bind(i,33826))).default)({view:r,unit:t,uiStrings:this._createUIStringsForWidget(e)});default:return null}}case"distance":{const{type:t}=r;return"2d"===t?new(0,(await Promise.all([i.e(99058),i.e(34470),i.e(17877),i.e(121),i.e(38856),i.e(73807),i.e(95537),i.e(9194),i.e(83394),i.e(68643),i.e(35107)]).then(i.bind(i,35107))).default)({view:r,unit:s,uiStrings:this._createUIStringsForWidget(e)}):null}case"direct-line":{const{type:t}=r;return"3d"===t?new(0,(await Promise.all([i.e(57808),i.e(99058),i.e(34470),i.e(17877),i.e(25158),i.e(89414),i.e(121),i.e(38856),i.e(73807),i.e(69656),i.e(46316),i.e(25269),i.e(11219),i.e(96106),i.e(96026),i.e(10039),i.e(68683),i.e(97411),i.e(9194),i.e(29950),i.e(31516)]).then(i.bind(i,68074))).default)({view:r,unit:s,uiStrings:this._createUIStringsForWidget(e)}):null}default:return null}}_destroyWidgets(){this._widgets.forEach((e=>e.destroy())),this._widgets.clear()}async _getActiveWidget(){const{activeTool:e,view:t}=this;if(!t||!e)return null;let i=null;if(this._widgets.has(e))i=this._widgets.get(e),i.visible=!0;else{if(i=await this._createWidget(e),!i)return null;await i.viewModel.start(),this._widgets.set(e,i)}return i}_createUIStringsForWidget(e){var t;if(!this.uiStrings)return;const i=e+"-"+(null===(t=this.view)||void 0===t?void 0:t.type);return this.uiStrings[i]}_updateSubWidgetProperties(){this._widgets.forEach(((e,t)=>{const{areaUnit:i,linearUnit:s}=this;e.unit=function(e){return"esri.widgets.AreaMeasurement2D"===(null===e||void 0===e?void 0:e.declaredClass)||"esri.widgets.AreaMeasurement3D"===(null===e||void 0===e?void 0:e.declaredClass)}(e)?i:s,e.uiStrings=this._createUIStringsForWidget(t)}))}};(0,s._)([(0,a.Cb)()],_.prototype,"activeTool",null),(0,s._)([(0,a.Cb)({readOnly:!0})],_.prototype,"activeWidget",void 0),(0,s._)([(0,a.Cb)()],_.prototype,"areaUnit",null),(0,s._)([(0,a.Cb)()],_.prototype,"icon",null),(0,s._)([(0,a.Cb)()],_.prototype,"label",null),(0,s._)([(0,a.Cb)()],_.prototype,"linearUnit",null),(0,s._)([(0,a.Cb)(),(0,w.H)("esri/widgets/Measurement/t9n/Measurement")],_.prototype,"messages",void 0),(0,s._)([(0,a.Cb)()],_.prototype,"uiStrings",void 0),(0,s._)([(0,a.Cb)()],_.prototype,"view",null),(0,s._)([(0,a.Cb)({type:h})],_.prototype,"viewModel",void 0),_=(0,s._)([(0,l.j)("esri.widgets.Measurement")],_);const y=_}}]);
//# sourceMappingURL=94658.531aca9e.chunk.js.map