"use strict";(self.webpackChunknorthwind=self.webpackChunknorthwind||[]).push([[5407],{5407:(e,i,t)=>{t.r(i),t.d(i,{default:()=>u});var l=t(27366),s=t(80987),r=t(60354),a=t(94172),n=t(49861),d=(t(93169),t(32718),t(84936),t(69912)),y=t(67581);let o=class extends y.Z{constructor(e){super(e),this.type="group",this.layerViews=new s.Z}destroy(){this.layerViews.length=0}_allLayerViewVisibility(e){this.layerViews.forEach((i=>{i.visible=e}))}initialize(){this.addHandles([this.layerViews.on("change",(e=>this._layerViewsChangeHandler(e))),(0,a.watch)((()=>{var e;return null===(e=this.layer)||void 0===e?void 0:e.visibilityMode}),(()=>{this.layer&&this._applyVisibility((()=>this._allLayerViewVisibility(this.visible)),(()=>this._applyExclusiveVisibility(null)))}),a.sync),(0,a.watch)((()=>this.visible),(e=>{this._applyVisibility((()=>this._allLayerViewVisibility(e)),(()=>{}))}),a.sync)],"grouplayerview"),this._layerViewsChangeHandler({target:null,added:this.layerViews.toArray(),removed:[],moved:[]})}get creatingLayerViews(){var e,i;return null!==(e=null===(i=this.view)||void 0===i||null===(i=i.layerViewManager)||void 0===i?void 0:i.isCreatingLayerViewsForLayer(this.layer))&&void 0!==e&&e}set layerViews(e){this._set("layerViews",(0,r.Z)(e,this._get("layerViews")))}get updatingProgress(){return 0===this.layerViews.length?1:this.layerViews.reduce(((e,i)=>e+i.updatingProgress),0)/this.layerViews.length}isUpdating(){return this.creatingLayerViews||this.layerViews.some((e=>e.updating))}_hasLayerViewVisibleOverrides(){return this.layerViews.some((e=>e._isOverridden("visible")))}_findLayerViewForLayer(e){return e&&this.layerViews.find((i=>i.layer===e))}_firstVisibleOnLayerOrder(){const e=this.layer.layers.find((e=>{const i=this._findLayerViewForLayer(e);return!(null===i||void 0===i||!i.visible)}));return e&&this._findLayerViewForLayer(e)}_applyExclusiveVisibility(e){null==e&&null==(e=this._firstVisibleOnLayerOrder())&&this.layerViews.length>0&&(e=this._findLayerViewForLayer(this.layer.layers.at(0))),this.layerViews.forEach((i=>{i.visible=i===e}))}_layerViewsChangeHandler(e){this.removeHandles("grouplayerview:visible"),this.addHandles(this.layerViews.map((e=>(0,a.watch)((()=>e.visible),(i=>this._applyVisibility((()=>{i!==this.visible&&(e.visible=this.visible)}),(()=>this._applyExclusiveVisibility(i?e:null)))),a.sync))).toArray(),"grouplayerview:visible");const i=e.added[e.added.length-1];this._applyVisibility((()=>this._allLayerViewVisibility(this.visible)),(()=>this._applyExclusiveVisibility(null!==i&&void 0!==i&&i.visible?i:null)))}_applyVisibility(e,i){var t,l;this._hasLayerViewVisibleOverrides()&&("inherited"===(null===(t=this.layer)||void 0===t?void 0:t.visibilityMode)?e():"exclusive"===(null===(l=this.layer)||void 0===l?void 0:l.visibilityMode)&&i())}};(0,l._)([(0,n.Cb)({readOnly:!0})],o.prototype,"creatingLayerViews",null),(0,l._)([(0,n.Cb)({cast:r.R})],o.prototype,"layerViews",null),(0,l._)([(0,n.Cb)({readOnly:!0})],o.prototype,"updatingProgress",null),(0,l._)([(0,n.Cb)()],o.prototype,"view",void 0),o=(0,l._)([(0,d.j)("esri.views.layers.GroupLayerView")],o);const u=o},67581:(e,i,t)=>{t.d(i,{Z:()=>b});var l=t(27366),s=t(7138),r=t(91505),a=t(79056),n=t(32718),d=t(92026),y=t(67426),o=t(49861),u=(t(93169),t(84936),t(69912)),h=t(46634),v=t(69787);let p=class extends((0,a.IG)((0,y.v)(r.Z.EventedMixin(s.default)))){constructor(e){super(e),this._updatingHandles=new h.R,this.layer=null,this.parent=null}initialize(){this.when().catch((e=>{if("layerview:create-error"!==e.name){var i;const t=this.layer&&this.layer.id||"no id",l=(null===(i=this.layer)||void 0===i?void 0:i.title)||"no title";n.Z.getLogger(this).error("#resolve()","Failed to resolve layer view (layer title: '".concat(l,"', id: '").concat(t,"')"),e)}}))}destroy(){this._updatingHandles=(0,d.SC)(this._updatingHandles)}get fullOpacity(){var e,i,t,l;return(null!==(e=null===(i=this.layer)||void 0===i?void 0:i.opacity)&&void 0!==e?e:1)*(null!==(t=null===(l=this.parent)||void 0===l?void 0:l.fullOpacity)&&void 0!==t?t:1)}get suspended(){return this.destroyed||!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){var e;return!this.suspended&&!0===(null===(e=this.layer)||void 0===e?void 0:e.legendEnabled)}get updating(){var e;return!((null===(e=this._updatingHandles)||void 0===e||!e.updating)&&!this.isUpdating())}get updatingProgress(){return this.updating?0:1}get updateSuspended(){return this.suspended}get visible(){var e;return!0===(null===(e=this.layer)||void 0===e?void 0:e.visible)}set visible(e){this._overrideIfSome("visible",e)}get visibleAtCurrentScale(){return!0}get visibleAtCurrentTimeExtent(){var e;const i=this.view.timeExtent,t=null===(e=this.layer)||void 0===e?void 0:e.visibilityTimeExtent;return!i||!t||!i.intersection(t).isEmpty}canResume(){var e,i,t;const l=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;return this.visible&&(null===(e=this.layer)||void 0===e?void 0:e.loaded)&&!(null!==(i=this.parent)&&void 0!==i&&i.suspended)&&(null===(t=this.view)||void 0===t?void 0:t.ready)&&(0,v.Cy)(l)&&this.visibleAtCurrentScale&&this.visibleAtCurrentTimeExtent||!1}getSuspendInfo(){var e,i;const t=null!==(e=this.parent)&&void 0!==e&&e.suspended?this.parent.suspendInfo:{};null!==(i=this.view)&&void 0!==i&&i.ready||(t.viewNotReady=!0),this.layer&&this.layer.loaded||(t.layerNotLoaded=!0);const l=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;return(0,v.Cy)(l)&&this.visibleAtCurrentScale||(t.outsideScaleRange=!0),this.visibleAtCurrentTimeExtent||(t.outsideVisibilityTimeExtent=!0),this.visible||(t.layerInvisible=!0),t}isUpdating(){return!1}};(0,l._)([(0,o.Cb)()],p.prototype,"view",void 0),(0,l._)([(0,o.Cb)()],p.prototype,"fullOpacity",null),(0,l._)([(0,o.Cb)()],p.prototype,"layer",void 0),(0,l._)([(0,o.Cb)()],p.prototype,"parent",void 0),(0,l._)([(0,o.Cb)({readOnly:!0})],p.prototype,"suspended",null),(0,l._)([(0,o.Cb)({readOnly:!0})],p.prototype,"suspendInfo",null),(0,l._)([(0,o.Cb)({readOnly:!0})],p.prototype,"legendEnabled",null),(0,l._)([(0,o.Cb)({type:Boolean,readOnly:!0})],p.prototype,"updating",null),(0,l._)([(0,o.Cb)({readOnly:!0})],p.prototype,"updatingProgress",null),(0,l._)([(0,o.Cb)()],p.prototype,"updateSuspended",null),(0,l._)([(0,o.Cb)()],p.prototype,"visible",null),(0,l._)([(0,o.Cb)({readOnly:!0})],p.prototype,"visibleAtCurrentScale",null),(0,l._)([(0,o.Cb)({readOnly:!0})],p.prototype,"visibleAtCurrentTimeExtent",null),p=(0,l._)([(0,u.j)("esri.views.layers.LayerView")],p);const b=p}}]);
//# sourceMappingURL=5407.80002ee0.chunk.js.map