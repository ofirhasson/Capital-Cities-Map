/*! For license information please see 23746.5b9edd8f.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunknorthwind=self.webpackChunknorthwind||[]).push([[23746],{23746:(e,t,i)=>{i.r(t),i.d(t,{arcgis_sketch:()=>h});var s=i(62042),o=i(62153),n=i(53466),l=i(34872),a=i(20077);i(14285);const r=(0,a.m)(o.a5),h=class{constructor(e){(0,s.r)(this,e),this.arcgisReady=(0,s.c)(this,"arcgisReady",7),this.arcgisPropertyChange=(0,s.c)(this,"arcgisPropertyChange",7),this.widgetCreate=(0,s.c)(this,"arcgisCreate",7),this.widgetDelete=(0,s.c)(this,"arcgisDelete",7),this.widgetRedo=(0,s.c)(this,"arcgisRedo",7),this.widgetUndo=(0,s.c)(this,"arcgisUndo",7),this.widgetUpdate=(0,s.c)(this,"arcgisUpdate",7),this.manager=(0,l.u)(this),this.widget=r(this,{editConstructorProperties:this._editConstructorProperties}),this.viewModel=this.widget.viewModel,this.arcgisPropertyChange=(0,n.u)()("state"),this.autoDestroyDisabled=!1,this.referenceElement=void 0,this.activeTool=this.widget.activeTool,this.availableCreateTools=this.widget.availableCreateTools,this.createGraphic=this.widget.createGraphic,this.creationMode=this.widget.creationMode,this.defaultCreateOptions=this.widget.defaultCreateOptions,this.defaultUpdateOptions=this.widget.defaultUpdateOptions,this.defaultGraphicsLayerDisabled=!1,this.icon=this.widget.icon,this.label=this.widget.label,this.labelOptions=this.widget.labelOptions,this.layer=this.widget.layer,this.layout=this.widget.layout,this.pointSymbol=this.viewModel.pointSymbol,this.polylineSymbol=this.viewModel.polylineSymbol,this.polygonSymbol=this.viewModel.polygonSymbol,this.snappingOptions=this.widget.snappingOptions,this.tooltipOptions=this.widget.tooltipOptions,this.updateGraphics=this.widget.updateGraphics,this.hideCreateToolsPoint=this.widget.visibleElements.createTools.point,this.hideCreateToolsPolyline=this.widget.visibleElements.createTools.polyline,this.hideCreateToolsPolygon=this.widget.visibleElements.createTools.polygon,this.hideCreateToolsRectangle=this.widget.visibleElements.createTools.rectangle,this.hideCreateToolsCircle=this.widget.visibleElements.createTools.circle,this.hideDuplicateButton=this.widget.visibleElements.duplicateButton,this.hideSelectionToolsRectangleSelection=this.widget.visibleElements.selectionTools["rectangle-selection"],this.hideSelectionToolsLassoSelection=this.widget.visibleElements.selectionTools["lasso-selection"],this.hideSettingsMenu=this.widget.visibleElements.settingsMenu,this.hideLabelsToggle=this.widget.visibleElements.labelsToggle,this.hideTooltipsToggle=this.widget.visibleElements.tooltipsToggle,this.hideSnappingControls=this.widget.visibleElements.snappingControls,this.showSnappingControlsElementsHeader=this.widget.visibleElements.snappingControlsElements.header,this.hideSnappingControlsElementsEnabledToggle=this.widget.visibleElements.snappingControlsElements.enabledToggle,this.hideSnappingControlsElementsSelfEnabledToggle=this.widget.visibleElements.snappingControlsElements.selfEnabledToggle,this.hideSnappingControlsElementsFeatureEnabledToggle=this.widget.visibleElements.snappingControlsElements.featureEnabledToggle,this.hideSnappingControlsElementsLayerList=this.widget.visibleElements.snappingControlsElements.layerList,this.hideUndoRedoMenu=this.widget.visibleElements.undoRedoMenu,this.position="bottom-left",this.state=this.widget.state}componentDidLoad(){var e;this.defaultGraphicsLayerDisabled||(null===(e=this.el.view)||void 0===e||e.map.add(this.widget.layer))}async _editConstructorProperties(e){var t;this.defaultGraphicsLayerDisabled||(null!==(t=e.layer)&&void 0!==t||(e.layer=await(0,o.a4)({title:"Sketch Layer"})));return e}async cancel(){var e;null===(e=this.widget)||void 0===e||e.cancel()}async complete(){var e;null===(e=this.widget)||void 0===e||e.complete()}async create(e,t){var i;await(null===(i=this.widget)||void 0===i?void 0:i.create(e,t))}async delete(){var e;null===(e=this.widget)||void 0===e||e.delete()}async destroy(){await this.manager.destroy()}async duplicate(){var e;null===(e=this.widget)||void 0===e||e.duplicate()}async redo(){var e;null===(e=this.widget)||void 0===e||e.redo()}async undo(){var e;null===(e=this.widget)||void 0===e||e.undo()}async update(e,t){var i;null===(i=this.widget)||void 0===i||i.update(e,t)}get el(){return(0,s.g)(this)}};h.style="arcgis-sketch{}"},53466:(e,t,i)=>{i.d(t,{l:()=>n,m:()=>l,u:()=>a});var s=i(34872),o=i(62153),n=e=>(0,s.b)(e),l=e=>function(){let{blocking:t=!1,name:i}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,s.b)(((s,n)=>{if(n.onLifecycle((()=>(0,o.s)(s.el,e("./assets"),(e=>{var t;let{t9nLocale:i,t9nStrings:o,lang:l}=e;n.exports={...o,_lang:l,_t9nLocale:i};const a=null!==(t=o.componentLabel)&&void 0!==t?t:o.widgetLabel;var r;"string"===typeof a&&"label"in s&&null==s.label&&(null!==(r=s.label)&&void 0!==r||(s.label=a))}),i))),t)return n.ready;const l=(0,o.g)(s.el);return{_lang:l.lang,_t9nLocale:l.t9nLocale}}))},a=e=>h,r="arcgisPropertyChange",h=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return(0,s.b)(((e,i)=>{const s=e;e.manager.isLit&&(s[r]={emit:t=>{const i=new CustomEvent(r,{detail:t,cancelable:!0});return e.el.dispatchEvent(i),i}});const o=s[r];return i.onLoad((()=>i.onLifecycle((()=>t.map((t=>e.manager.watch(t,(()=>o.emit({name:t}))))))))),o}))}},20077:(e,t,i)=>{i.d(t,{m:()=>n});var s=i(34872),o=(i(62153),i(14285));const n=(e,t)=>(t,i)=>a(t,e,i);class l extends s.A{constructor(e,t,i){super(e,t,i),this._watchedViewModelProperties=new Map,this._watchedVisibleElementsProperties={},this._isBindingViewModel={value:!0},Object.defineProperty(this.exports,"viewModel",{value:s.a.makeGetterProxy(e,this._watchedViewModelProperties,this._isBindingViewModel)}),Object.defineProperty(this.exports,"visibleElements",{value:this._makeVisibleElementsBinder()})}hostConnected(){super.hostConnected(),this._isBindingViewModel.value=!1,this.component.manager.didLoadCalled&&(0,o.a)(this.component)}async hostLoad(){if(this._watchedProperties.delete("viewModel"),await super.hostLoad(),this.component.manager.destroyed)return;this._watchMetaProperties(),s.a.reEmitAccessorEvents(this,this._instance,this.reactiveUtils,"widget"),this.onLifecycle((()=>this.reactiveUtils.watch((()=>this._instance.viewModel),(e=>{this.component.viewModel=e}),{initial:!0})));const e=this._instance.viewModel;if("object"===typeof e)s.a.reEmitAccessorEvents(this,e,this.reactiveUtils,"viewModel"),s.a.watchComponentUpdates(this,e,this._watchedViewModelProperties),s.a.watchAccessorUpdates(this,e,this._watchedViewModelProperties);else if(this._watchedViewModelProperties.size>0)throw new Error("The widget does not have a viewModel to bind to. Tried to bind the following properties: ".concat(Array.from(this._watchedViewModelProperties.keys()).join(", ")));const t=Object.entries(this._watchedVisibleElementsProperties);t.length>0&&this.onLifecycle((()=>t.map((e=>{var t;let i,[s,o]=e,n=null!==(t=this._instance.visibleElements)&&void 0!==t?t:{};for(const h of o.slice(0,-1)){if("object"!==typeof n[h]||null===n[h]){i=Boolean(n[h]);break}n=n[h]}var l;void 0===i&&(i=Boolean(null===(l=n[o.slice(-1)[0]])||void 0===l||l));s.startsWith("hide");const a=s.startsWith("hide")||s.startsWith("show")?s.startsWith("hide"):i,r=this.component;return"boolean"===typeof r[s]?this._updateWidgetVisibleElement(o,r[s],a):r[s]=!1,this.watch(s,(e=>this._updateWidgetVisibleElement(o,e,a)))}))))}_updateWidgetVisibleElement(e,t,i){var s;let o=null!==(s=this._instance.visibleElements)&&void 0!==s?s:{};for(const l of e.slice(0,-1))"object"===typeof o[l]&&null!==o[l]||(o[l]={}),o=o[l];const n=Boolean(i?!t:t);o[e.at(-1)]=n}hostLoaded(){var e;const{el:t}=this.component;null!==(e=t.childElem)&&void 0!==e||(t.childElem=document.createElement("div")),this._instance.container=t.childElem;let i=!1;const s=this.component.el.view;Object.defineProperty(this.component.el,"view",{get:()=>{var e,t;return null!==(e=this._instance.view)&&void 0!==e?e:null===(t=this._instance.viewModel)||void 0===t?void 0:t.view},set:e=>{"view"in this._instance||"object"!==typeof this._instance.viewModel?this._instance.view=e:this._instance.viewModel.view=e,this._watchViewDestroy(),i||(i=!0,this.component.arcgisReady.emit())},configurable:!0,enumerable:!0}),s&&(this._instance.view=s),this.component.el.isConnected&&((0,o.a)(this.component),this._watchViewDestroy())}hostDisconnected(){var e;"object"===typeof this.component.el.childElem&&(null===(e=this.component.el.view)||void 0===e||null===(e=e.ui)||void 0===e||e.remove(this.component.el.childElem))}hostDestroy(){var e;super.hostDestroy(),null===(e=this._watchViewDestroyHandle)||void 0===e||e.remove()}_watchMetaProperties(){this.watch("position",(e=>{null!=this.component.el.childElem&&"string"===typeof e&&(0,o.a)(this.component)})),this.watch("referenceElement",(()=>(0,o.a)(this.component)))}_makeVisibleElementsBinder(){return new Proxy({},{has:(e,t)=>"string"===typeof t||Reflect.has(e,t),get:(e,t)=>{if("symbol"===typeof t||t in Promise.prototype)return Reflect.get(e,t);const i=[t],s=this._makeRecursiveProxy(i);return this.component.manager.trackPropKey((e=>{if(void 0===e)throw new Error("Unable to bind visibleElements property. Check for incorrect this.widget.visibleElements usage");this.component[e]=!1,this._watchedVisibleElementsProperties[e]=i}),s)}})}_makeRecursiveProxy(e){const t=new Proxy({},{get:(i,s)=>{const o=Reflect.get(i,s);return"symbol"===typeof s||s in Promise.prototype?o:(e.push(s),t)}});return t}_watchViewDestroy(){var e;null===(e=this._watchViewDestroyHandle)||void 0===e||e.remove(),this._watchViewDestroyHandle=this.reactiveUtils.when((()=>{var e;return!0===(null===(e=this.component.el.view)||void 0===e?void 0:e.destroyed)}),(()=>{this.component.destroy().catch(console.error)}),{sync:!0})}}const a=(0,s.p)(l)}}]);
//# sourceMappingURL=23746.5b9edd8f.chunk.js.map