"use strict";(self.webpackChunknorthwind=self.webpackChunknorthwind||[]).push([[45739],{83217:(t,n,e)=>{e.d(n,{x:()=>i});const i=Symbol("WebScene")},45739:(t,n,e)=>{e.d(n,{getTimeSliderSettingsFromWebDocument:()=>f,Jb:()=>T,b3:()=>v});var i=e(62044),l=e(63780),u=(e(44927),e(84652)),o=(e(32718),e(86710)),r=e(38675),s=e(83217);function a(t){return void 0!==t.timeInfo}async function m(t,n){var e,u;return null!==(e=null===(u=t.widgets)||void 0===u||null===(u=u.timeSlider)||void 0===u?void 0:u.fullTimeExtent)&&void 0!==e?e:async function(t,n){if(0===t.length)return i.Z.allTime;await Promise.all(t.map((t=>t.load({signal:n}))));const e=t.filter(a),u=t.filter((t=>!a(t)&&null!=t.visibilityTimeExtent));if(0===e.length&&0===u.length)return i.Z.allTime;const o=[],r=[];for(const i of e){var s;"feature"!==(null===i||void 0===i?void 0:i.type)&&"map-image"!==(null===i||void 0===i?void 0:i.type)||null===(s=i.timeInfo)||void 0===s||!s.hasLiveData?r.push(i):o.push(i)}const m=t=>null==t||t.isAllTime,d=[...r.map((t=>{var n,e;const i=null===(n=t.timeInfo)||void 0===n?void 0:n.fullTimeExtent,{visibilityTimeExtent:l}=t;return null!==(e=null===i||void 0===i?void 0:i.intersection(l))&&void 0!==e?e:l})),...u.map((t=>t.visibilityTimeExtent))];if(d.some(m))return i.Z.allTime;const c=o.map((async t=>{var e,i,l,u;const o=null!==(e=null===(i=await t.fetchRecomputedExtents({signal:n}))||void 0===i?void 0:i.timeExtent)&&void 0!==e?e:null===(l=t.timeInfo)||void 0===l?void 0:l.fullTimeExtent,{visibilityTimeExtent:r}=t;return null!==(u=null===o||void 0===o?void 0:o.intersection(r))&&void 0!==u?u:r})),f=(await Promise.allSettled(c)).map((t=>"fulfilled"===t.status?t.value:null));if(f.some(m))return i.Z.allTime;const v=[...f,...d].filter(l.pC);return 0===v.length?i.Z.allTime:v.reduce(((t,n)=>t.union(n)))}(t.allLayers,n)}function d(t){const{numStops:n,stopInterval:e,stops:i}=t;return i?{dates:(0,u.d9)(i)}:e?{interval:e.clone()}:{count:null!==n&&void 0!==n?n:5}}function c(t,n){var e;const l=t.currentTimeExtent;if(!l)return null;const{start:u,end:o}=l,r=null!==(e=null!==u&&void 0!==u?u:o)&&void 0!==e?e:null;switch(n){case"time-window":return new i.Z({start:u,end:o});case"cumulative-from-start":return new i.Z({start:null,end:r});case"cumulative-from-end":return new i.Z({start:r,end:null});case"instant":return new i.Z({start:r,end:r})}}async function f(t,n){var e,i;if(!(0,r.s)(t)&&!function(t){return null!=t&&"object"==typeof t&&s.x in t}(t))return null;await t.load({signal:n});const l=null===t||void 0===t||null===(e=t.widgets)||void 0===e?void 0:e.timeSlider;if(!l)return null;const u=await m(t,n),o=l.loop,a=function(t){var n;const e=null!==(n=t.numThumbs)&&void 0!==n?n:2,i=t.currentTimeExtent;if(i){const{start:t,end:n}=i;return null!=t&&null!=n&&t.getTime()===n.getTime()?"instant":2===e?"time-window":null==t||0===t.getTime()?"cumulative-from-start":"cumulative-from-end"}return 2===e?"time-window":"cumulative-from-start"}(l);return{fullTimeExtent:u,loop:o,mode:a,playRate:null!==(i=l.stopDelay)&&void 0!==i?i:2e3,stops:d(l),timeExtent:c(l,a)}}function v(t){if(!t)return t;const{start:n,end:e}=t;return new i.Z({start:null!=n?(0,o.Nm)(n,-n.getTimezoneOffset(),"minutes"):n,end:null!=e?(0,o.Nm)(e,-e.getTimezoneOffset(),"minutes"):e})}function T(t){if(!t)return t;const{start:n,end:e}=t;return new i.Z({start:null!=n?(0,o.Nm)(n,n.getTimezoneOffset(),"minutes"):n,end:null!=e?(0,o.Nm)(e,e.getTimezoneOffset(),"minutes"):e})}}}]);
//# sourceMappingURL=45739.c569c646.chunk.js.map