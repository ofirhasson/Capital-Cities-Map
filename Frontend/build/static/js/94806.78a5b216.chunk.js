"use strict";(self.webpackChunknorthwind=self.webpackChunknorthwind||[]).push([[94806],{94806:(e,a,t)=>{t.r(a),t.d(a,{default:()=>k});var i=t(27366),s=t(49861),n=t(89125),l=(t(84936),t(93169),t(69912)),o=t(23037),r=t(33565),c=t(7138),p=t(94172),d=t(79803),m=t(92975);let u=class extends c.default{constructor(e){super(e),this._basemapCache={},this._loadingProjectionEngine=!1,this.nextBasemap=(0,o.se)("hybrid",this._basemapCache),this.view=null}initialize(){(0,p.watch)((()=>this.nextBasemap),(e=>{e&&!e.loaded&&e.load().catch((()=>{}))}),p.initial)}destroy(){this.view=null,(0,o.Bf)(this._basemapCache),this._basemapCache=null}get _nextBasemapSpatialReferenceTask(){return(0,o.Us)(this.view,this.nextBasemap)}get _viewSpatialReferenceLocked(){const{view:e}=this;return!e||!("spatialReferenceLocked"in e)||e.spatialReferenceLocked}get activeBasemap(){var e,a;return(0,o.se)(null!==(e=null===(a=this.view)||void 0===a||null===(a=a.map)||void 0===a?void 0:a.basemap)&&void 0!==e?e:"topo-vector",this._basemapCache)}castNextBasemap(e){return(0,o.se)(e,this._basemapCache)}get state(){const{view:e}=this;if(null===e||void 0===e||!e.ready)return"disabled";if(this._nextBasemapSpatialReferenceTask.updating)return"disabled";const{spatialReference:a}=this._nextBasemapSpatialReferenceTask;return this._viewSpatialReferenceLocked&&null!=a&&!e.spatialReference.equals(a)?"incompatible-next-basemap":this._loadingProjectionEngine?"loading":"ready"}async toggle(){const{activeBasemap:e,nextBasemap:a,state:t,view:i}=this;if(!i||"disabled"===t||"incompatible-next-basemap"===t)return;const s=this._viewSpatialReferenceLocked;if(!s){if(await(0,p.whenOnce)((()=>!this._nextBasemapSpatialReferenceTask.updating)),a!==this.nextBasemap||e!==this.activeBasemap)return;const{spatialReference:t}=this._nextBasemapSpatialReferenceTask;if(null==t||(0,m.fS)(i.spatialReference,t)||(0,d.isLoaded)()||(0,d.canProjectWithoutEngine)(i.spatialReference,t)||(this._loadingProjectionEngine=!0,await(0,d.load)(),this._loadingProjectionEngine=!1),a!==this.nextBasemap||e!==this.activeBasemap)return}i.map.basemap=a,s||null==this._nextBasemapSpatialReferenceTask.spatialReference||(0,m.fS)(i.spatialReference,this._nextBasemapSpatialReferenceTask.spatialReference)||(i.spatialReference=this._nextBasemapSpatialReferenceTask.spatialReference),this.nextBasemap=e}static getThumbnailUrl(e){return(0,o.Qs)(e)}};(0,i._)([(0,s.Cb)()],u.prototype,"_loadingProjectionEngine",void 0),(0,i._)([(0,s.Cb)({readOnly:!0})],u.prototype,"_nextBasemapSpatialReferenceTask",null),(0,i._)([(0,s.Cb)({readOnly:!0})],u.prototype,"_viewSpatialReferenceLocked",null),(0,i._)([(0,s.Cb)({readOnly:!0})],u.prototype,"activeBasemap",null),(0,i._)([(0,s.Cb)()],u.prototype,"nextBasemap",void 0),(0,i._)([(0,n.p)("nextBasemap")],u.prototype,"castNextBasemap",null),(0,i._)([(0,s.Cb)({readOnly:!0})],u.prototype,"state",null),(0,i._)([(0,s.Cb)()],u.prototype,"view",void 0),(0,i._)([(0,s.Cb)()],u.prototype,"toggle",null),u=(0,i._)([(0,l.j)("esri.widgets.BasemapToggle.BasemapToggleViewModel")],u);const h=u,v="esri-basemap-toggle",g="esri-basemap-thumbnail",b={base:v,secondaryBasemapImage:"".concat(v,"__image--secondary"),container:"".concat(g," ").concat(v,"__container"),image:"".concat(g,"__image ").concat(v,"__image"),imageLoading:"".concat(v,"__image--loading"),overlay:"".concat(g,"__overlay ").concat(v,"__image-overlay"),title:"".concat(g,"__title ").concat(v,"__title"),overlayScrim:"".concat(g,"__overlay-scrim")};var _=t(8905),y=t(7021),B=(t(80975),t(80532)),f=t(67005);function w(e){const a=(0,o.Qs)(e);return a?{backgroundImage:"url("+a+")"}:{backgroundImage:""}}const x={title:!1};let R=class extends r.Z{constructor(e,a){super(e,a),this.messages=null,this.viewModel=new h,this.visibleElements={...x},this.toggle=()=>this.viewModel.toggle()}loadDependencies(){return(0,_.h)({button:()=>Promise.all([t.e(92358),t.e(46895),t.e(54438),t.e(14105),t.e(32275)]).then(t.bind(t,32275)),icon:()=>Promise.all([t.e(92358),t.e(87474)]).then(t.bind(t,87474)),scrim:()=>Promise.all([t.e(92358),t.e(46895),t.e(99174)]).then(t.bind(t,99174))})}get activeBasemap(){return this.viewModel.activeBasemap}get icon(){return"layer-basemap"}set icon(e){this._overrideIfSome("icon",e)}get label(){var e,a;return null!==(e=null===(a=this.messages)||void 0===a?void 0:a.widgetLabel)&&void 0!==e?e:""}set label(e){this._overrideIfSome("label",e)}get nextBasemap(){return this.viewModel.nextBasemap}set nextBasemap(e){this.viewModel.nextBasemap=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}castVisibleElements(e){return{...x,...e}}render(){var e;const a=this.viewModel,t="disabled"===a.state?null:a.activeBasemap,i="disabled"===a.state?null:a.nextBasemap,s="loading"===a.state,n="incompatible-next-basemap"===a.state,l=null!==(e=null===i||void 0===i?void 0:i.title)&&void 0!==e?e:"",o=i&&"loaded"!==i.loadStatus;let r;const c=this.visibleElements.title&&l,p=n;return(c||p)&&(r=(0,f.u)("div",{class:b.overlay,key:"overlay"},c?(0,f.u)("span",{class:b.title,title:l},l):null,p?(0,f.u)("calcite-scrim",{class:b.overlayScrim,title:this.messages.incompatibleSpatialReference},(0,f.u)("calcite-icon",{icon:"exclamation-mark-triangle"})):null)),(0,f.u)("div",{class:this.classes(b.base,y.z.widget)},(0,f.u)("calcite-button",{appearance:"transparent","data-basemap-id":i?i.id:"",disabled:n,kind:"neutral",label:this.label,onclick:()=>{this.toggle()},title:this.label},(0,f.u)("div",{class:this.classes(b.container,b.secondaryBasemapImage)},(0,f.u)("div",{class:b.image,styles:w(t)})),(0,f.u)("div",{class:b.container},(0,f.u)("div",{class:this.classes(b.image,o?b.imageLoading:null),styles:w(i)},o||s?(0,f.u)("calcite-scrim",null,(0,f.u)("span",{"aria-hidden":"true",class:y.z.loaderAnimation,role:"presentation"})):null),r)))}};(0,i._)([(0,s.Cb)({readOnly:!0})],R.prototype,"activeBasemap",null),(0,i._)([(0,s.Cb)()],R.prototype,"icon",null),(0,i._)([(0,s.Cb)()],R.prototype,"label",null),(0,i._)([(0,s.Cb)(),(0,B.H)("esri/widgets/BasemapToggle/t9n/BasemapToggle")],R.prototype,"messages",void 0),(0,i._)([(0,s.Cb)()],R.prototype,"nextBasemap",null),(0,i._)([(0,s.Cb)()],R.prototype,"view",null),(0,i._)([(0,s.Cb)({type:h})],R.prototype,"viewModel",void 0),(0,i._)([(0,s.Cb)()],R.prototype,"visibleElements",void 0),(0,i._)([(0,n.p)("visibleElements")],R.prototype,"castVisibleElements",null),R=(0,i._)([(0,l.j)("esri.widgets.BasemapToggle")],R);const k=R}}]);
//# sourceMappingURL=94806.78a5b216.chunk.js.map